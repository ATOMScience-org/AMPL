<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>utils package &mdash; ATOM Data-Driven Modeling Pipeline 1.5.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="pipeline package" href="pipeline.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            ATOM Data-Driven Modeling Pipeline
          </a>
              <div class="version">
                1.5.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="guide/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide/tests.html">Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide/running_ampl.html">Running AMPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide/advanced_ampl_usage.html">Advanced AMPL Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide/advanced_installation.html">Advanced Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide/advanced_testing.html">Advanced Testing</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">atomsci</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pipeline.html">pipeline package</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">utils package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.checksum_utils">utils.checksum_utils module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.checksum_utils.create_checksum"><code class="docutils literal notranslate"><span class="pre">create_checksum()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.checksum_utils.get_dataset_hash_from_tar"><code class="docutils literal notranslate"><span class="pre">get_dataset_hash_from_tar()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.checksum_utils.uses_same_training_data_by_datasets"><code class="docutils literal notranslate"><span class="pre">uses_same_training_data_by_datasets()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.checksum_utils.uses_same_training_data_by_tarballs"><code class="docutils literal notranslate"><span class="pre">uses_same_training_data_by_tarballs()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.compare_split_csv">utils.compare_split_csv module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.compare_split_csv.compare_split_files"><code class="docutils literal notranslate"><span class="pre">compare_split_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.compare_split_csv.compare_splits"><code class="docutils literal notranslate"><span class="pre">compare_splits()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.compare_split_csv.parse_args"><code class="docutils literal notranslate"><span class="pre">parse_args()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.compare_splits_plots">utils.compare_splits_plots module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.compare_splits_plots.SplitStats"><code class="docutils literal notranslate"><span class="pre">SplitStats</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.compare_splits_plots.parse_args"><code class="docutils literal notranslate"><span class="pre">parse_args()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.compare_splits_plots.save_figure"><code class="docutils literal notranslate"><span class="pre">save_figure()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.compare_splits_plots.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.curate_data">utils.curate_data module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.add_classification_column"><code class="docutils literal notranslate"><span class="pre">add_classification_column()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.aggregate_assay_data"><code class="docutils literal notranslate"><span class="pre">aggregate_assay_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.average_and_remove_duplicates"><code class="docutils literal notranslate"><span class="pre">average_and_remove_duplicates()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.create_new_rows_for_extra_results"><code class="docutils literal notranslate"><span class="pre">create_new_rows_for_extra_results()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.filter_in_by_column_values"><code class="docutils literal notranslate"><span class="pre">filter_in_by_column_values()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.filter_in_out_by_column_values"><code class="docutils literal notranslate"><span class="pre">filter_in_out_by_column_values()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.filter_out_by_column_values"><code class="docutils literal notranslate"><span class="pre">filter_out_by_column_values()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.filter_out_comments"><code class="docutils literal notranslate"><span class="pre">filter_out_comments()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.freq_table"><code class="docutils literal notranslate"><span class="pre">freq_table()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.get_rdkit_smiles_parent"><code class="docutils literal notranslate"><span class="pre">get_rdkit_smiles_parent()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.labeled_freq_table"><code class="docutils literal notranslate"><span class="pre">labeled_freq_table()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.mle_censored_mean"><code class="docutils literal notranslate"><span class="pre">mle_censored_mean()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.remove_outlier_replicates"><code class="docutils literal notranslate"><span class="pre">remove_outlier_replicates()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.replicate_rmsd"><code class="docutils literal notranslate"><span class="pre">replicate_rmsd()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.set_group_permissions"><code class="docutils literal notranslate"><span class="pre">set_group_permissions()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.summarize_data"><code class="docutils literal notranslate"><span class="pre">summarize_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.curate_data.xc50topxc50_for_nm"><code class="docutils literal notranslate"><span class="pre">xc50topxc50_for_nm()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.data_curation_functions">utils.data_curation_functions module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.atom_curation"><code class="docutils literal notranslate"><span class="pre">atom_curation()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.atom_curation_excape"><code class="docutils literal notranslate"><span class="pre">atom_curation_excape()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.down_select"><code class="docutils literal notranslate"><span class="pre">down_select()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.exclude_organometallics"><code class="docutils literal notranslate"><span class="pre">exclude_organometallics()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.filter_dtc_data"><code class="docutils literal notranslate"><span class="pre">filter_dtc_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.get_smiles_4dtc_data"><code class="docutils literal notranslate"><span class="pre">get_smiles_4dtc_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.get_smiles_dtc_data"><code class="docutils literal notranslate"><span class="pre">get_smiles_dtc_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.get_smiles_excape_data"><code class="docutils literal notranslate"><span class="pre">get_smiles_excape_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.ic50topic50"><code class="docutils literal notranslate"><span class="pre">ic50topic50()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.is_organometallic"><code class="docutils literal notranslate"><span class="pre">is_organometallic()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.set_data_root"><code class="docutils literal notranslate"><span class="pre">set_data_root()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.standardize_relations"><code class="docutils literal notranslate"><span class="pre">standardize_relations()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.upload_df_dtc_base_smiles_all"><code class="docutils literal notranslate"><span class="pre">upload_df_dtc_base_smiles_all()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.upload_df_dtc_mleqonly"><code class="docutils literal notranslate"><span class="pre">upload_df_dtc_mleqonly()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.upload_df_dtc_mleqonly_class"><code class="docutils literal notranslate"><span class="pre">upload_df_dtc_mleqonly_class()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.upload_df_dtc_smiles"><code class="docutils literal notranslate"><span class="pre">upload_df_dtc_smiles()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.upload_df_dtc_smiles_regr_all_class"><code class="docutils literal notranslate"><span class="pre">upload_df_dtc_smiles_regr_all_class()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.upload_df_excape_mleqonly"><code class="docutils literal notranslate"><span class="pre">upload_df_excape_mleqonly()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.upload_df_excape_mleqonly_class"><code class="docutils literal notranslate"><span class="pre">upload_df_excape_mleqonly_class()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.upload_df_excape_smiles"><code class="docutils literal notranslate"><span class="pre">upload_df_excape_smiles()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.upload_file_dtc_raw_data"><code class="docutils literal notranslate"><span class="pre">upload_file_dtc_raw_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.upload_file_dtc_smiles_regr_all"><code class="docutils literal notranslate"><span class="pre">upload_file_dtc_smiles_regr_all()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.data_curation_functions.upload_file_excape_raw_data"><code class="docutils literal notranslate"><span class="pre">upload_file_excape_raw_data()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.datastore_functions">utils.datastore_functions module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.bulk_export_kv_for_files"><code class="docutils literal notranslate"><span class="pre">bulk_export_kv_for_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.bulk_update_kv"><code class="docutils literal notranslate"><span class="pre">bulk_update_kv()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.check_key_val"><code class="docutils literal notranslate"><span class="pre">check_key_val()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.config_client"><code class="docutils literal notranslate"><span class="pre">config_client()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.copy_datasets_to_bucket"><code class="docutils literal notranslate"><span class="pre">copy_datasets_to_bucket()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.dataset_key_exists"><code class="docutils literal notranslate"><span class="pre">dataset_key_exists()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.filter_datasets_interactive"><code class="docutils literal notranslate"><span class="pre">filter_datasets_interactive()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.get_key_val"><code class="docutils literal notranslate"><span class="pre">get_key_val()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.get_keyval"><code class="docutils literal notranslate"><span class="pre">get_keyval()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.initialize_model_tracker"><code class="docutils literal notranslate"><span class="pre">initialize_model_tracker()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.key_exists"><code class="docutils literal notranslate"><span class="pre">key_exists()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.list_key_values"><code class="docutils literal notranslate"><span class="pre">list_key_values()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.repeat_defined_search"><code class="docutils literal notranslate"><span class="pre">repeat_defined_search()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.retrieve_bucket_names"><code class="docutils literal notranslate"><span class="pre">retrieve_bucket_names()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.retrieve_columns_from_dataset"><code class="docutils literal notranslate"><span class="pre">retrieve_columns_from_dataset()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.retrieve_dataset_by_dataset_oid"><code class="docutils literal notranslate"><span class="pre">retrieve_dataset_by_dataset_oid()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.retrieve_dataset_by_datasetkey"><code class="docutils literal notranslate"><span class="pre">retrieve_dataset_by_datasetkey()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.retrieve_keys"><code class="docutils literal notranslate"><span class="pre">retrieve_keys()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.retrieve_values_for_key"><code class="docutils literal notranslate"><span class="pre">retrieve_values_for_key()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.search_datasets_by_key_value"><code class="docutils literal notranslate"><span class="pre">search_datasets_by_key_value()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.search_files_interactive"><code class="docutils literal notranslate"><span class="pre">search_files_interactive()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.string_to_dict"><code class="docutils literal notranslate"><span class="pre">string_to_dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.string_to_list"><code class="docutils literal notranslate"><span class="pre">string_to_list()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.summarize_datasets"><code class="docutils literal notranslate"><span class="pre">summarize_datasets()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.update_distribution_kv"><code class="docutils literal notranslate"><span class="pre">update_distribution_kv()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.update_kv"><code class="docutils literal notranslate"><span class="pre">update_kv()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.upload_df_to_DS"><code class="docutils literal notranslate"><span class="pre">upload_df_to_DS()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.upload_file_to_DS"><code class="docutils literal notranslate"><span class="pre">upload_file_to_DS()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.datastore_functions.upload_pickle_to_DS"><code class="docutils literal notranslate"><span class="pre">upload_pickle_to_DS()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.file_utils">utils.file_utils module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.file_utils.is_within_directory"><code class="docutils literal notranslate"><span class="pre">is_within_directory()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.file_utils.safe_extract"><code class="docutils literal notranslate"><span class="pre">safe_extract()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.genTestset">utils.genTestset module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.genTestset.Union"><code class="docutils literal notranslate"><span class="pre">Union()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.genTestset.aggregate_basesmiles"><code class="docutils literal notranslate"><span class="pre">aggregate_basesmiles()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.genTestset.genUnionSet"><code class="docutils literal notranslate"><span class="pre">genUnionSet()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.genTestset.generateTestset"><code class="docutils literal notranslate"><span class="pre">generateTestset()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.genTestset.intersection"><code class="docutils literal notranslate"><span class="pre">intersection()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.hyperparam_search_wrapper">utils.hyperparam_search_wrapper module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.GeometricSearch"><code class="docutils literal notranslate"><span class="pre">GeometricSearch</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.GridSearch"><code class="docutils literal notranslate"><span class="pre">GridSearch</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.HyperOptSearch"><code class="docutils literal notranslate"><span class="pre">HyperOptSearch</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.HyperparameterSearch"><code class="docutils literal notranslate"><span class="pre">HyperparameterSearch</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.RandomSearch"><code class="docutils literal notranslate"><span class="pre">RandomSearch</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.UserSpecifiedSearch"><code class="docutils literal notranslate"><span class="pre">UserSpecifiedSearch</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.build_hyperopt_search_domain"><code class="docutils literal notranslate"><span class="pre">build_hyperopt_search_domain()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.build_search"><code class="docutils literal notranslate"><span class="pre">build_search()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.gen_maestro_command"><code class="docutils literal notranslate"><span class="pre">gen_maestro_command()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.get_num_params"><code class="docutils literal notranslate"><span class="pre">get_num_params()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.parse_params"><code class="docutils literal notranslate"><span class="pre">parse_params()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.permutate_NNlayer_combo_params"><code class="docutils literal notranslate"><span class="pre">permutate_NNlayer_combo_params()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.reformat_filter_dict"><code class="docutils literal notranslate"><span class="pre">reformat_filter_dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.run_cmd"><code class="docutils literal notranslate"><span class="pre">run_cmd()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.hyperparam_search_wrapper.run_command"><code class="docutils literal notranslate"><span class="pre">run_command()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.llnl_utils">utils.llnl_utils module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.llnl_utils.get_command_output"><code class="docutils literal notranslate"><span class="pre">get_command_output()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.llnl_utils.get_my_username"><code class="docutils literal notranslate"><span class="pre">get_my_username()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.llnl_utils.is_lc_system"><code class="docutils literal notranslate"><span class="pre">is_lc_system()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.llnl_utils.throttle_jobs"><code class="docutils literal notranslate"><span class="pre">throttle_jobs()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.many_to_one">utils.many_to_one module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.many_to_one.ManyToOneException"><code class="docutils literal notranslate"><span class="pre">ManyToOneException</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.many_to_one.NANCompoundIDException"><code class="docutils literal notranslate"><span class="pre">NANCompoundIDException</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.many_to_one.NANSMILESException"><code class="docutils literal notranslate"><span class="pre">NANSMILESException</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.many_to_one.has_nans"><code class="docutils literal notranslate"><span class="pre">has_nans()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.many_to_one.many_to_one"><code class="docutils literal notranslate"><span class="pre">many_to_one()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.many_to_one.many_to_one_df"><code class="docutils literal notranslate"><span class="pre">many_to_one_df()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.many_to_one.no_nan_ids_or_smiles"><code class="docutils literal notranslate"><span class="pre">no_nan_ids_or_smiles()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.model_retrain">utils.model_retrain module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.model_retrain.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.model_retrain.train_model"><code class="docutils literal notranslate"><span class="pre">train_model()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.model_retrain.train_model_from_tar"><code class="docutils literal notranslate"><span class="pre">train_model_from_tar()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.model_retrain.train_model_from_tracker"><code class="docutils literal notranslate"><span class="pre">train_model_from_tracker()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.model_retrain.train_models_from_dataset_keys"><code class="docutils literal notranslate"><span class="pre">train_models_from_dataset_keys()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.model_version_utils">utils.model_version_utils module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.model_version_utils.check_version_compatible"><code class="docutils literal notranslate"><span class="pre">check_version_compatible()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.model_version_utils.get_ampl_version"><code class="docutils literal notranslate"><span class="pre">get_ampl_version()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.model_version_utils.get_ampl_version_from_dir"><code class="docutils literal notranslate"><span class="pre">get_ampl_version_from_dir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.model_version_utils.get_ampl_version_from_json"><code class="docutils literal notranslate"><span class="pre">get_ampl_version_from_json()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.model_version_utils.get_ampl_version_from_model"><code class="docutils literal notranslate"><span class="pre">get_ampl_version_from_model()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.model_version_utils.get_major_version"><code class="docutils literal notranslate"><span class="pre">get_major_version()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.model_version_utils.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.model_version_utils.validate_version"><code class="docutils literal notranslate"><span class="pre">validate_version()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#utils-open-docs-module">utils.open-docs module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.process_slurm">utils.process_slurm module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.process_slurm.get_timings"><code class="docutils literal notranslate"><span class="pre">get_timings()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.process_slurm.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.process_slurm.move_failed_slurm"><code class="docutils literal notranslate"><span class="pre">move_failed_slurm()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.process_slurm.rerun_failed"><code class="docutils literal notranslate"><span class="pre">rerun_failed()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.process_slurm.run_cmd"><code class="docutils literal notranslate"><span class="pre">run_cmd()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.process_slurm.run_command"><code class="docutils literal notranslate"><span class="pre">run_command()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.pubchem_utils">utils.pubchem_utils module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.pubchem_utils.download_SID_from_bioactivity_assay"><code class="docutils literal notranslate"><span class="pre">download_SID_from_bioactivity_assay()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.pubchem_utils.download_activitytype"><code class="docutils literal notranslate"><span class="pre">download_activitytype()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.pubchem_utils.download_bioactivity_assay"><code class="docutils literal notranslate"><span class="pre">download_bioactivity_assay()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.pubchem_utils.download_dose_response_from_bioactivity"><code class="docutils literal notranslate"><span class="pre">download_dose_response_from_bioactivity()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.pubchem_utils.download_smiles"><code class="docutils literal notranslate"><span class="pre">download_smiles()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.rdkit_easy">utils.rdkit_easy module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.rdkit_easy.add_mol_column"><code class="docutils literal notranslate"><span class="pre">add_mol_column()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.rdkit_easy.calculate_descriptors"><code class="docutils literal notranslate"><span class="pre">calculate_descriptors()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.rdkit_easy.cluster_dataframe"><code class="docutils literal notranslate"><span class="pre">cluster_dataframe()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.rdkit_easy.cluster_fingerprints"><code class="docutils literal notranslate"><span class="pre">cluster_fingerprints()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.rdkit_easy.matching_atoms_and_bonds"><code class="docutils literal notranslate"><span class="pre">matching_atoms_and_bonds()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.rdkit_easy.mol_to_html"><code class="docutils literal notranslate"><span class="pre">mol_to_html()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.rdkit_easy.mol_to_pil"><code class="docutils literal notranslate"><span class="pre">mol_to_pil()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.rdkit_easy.mol_to_svg"><code class="docutils literal notranslate"><span class="pre">mol_to_svg()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.rdkit_easy.save_png"><code class="docutils literal notranslate"><span class="pre">save_png()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.rdkit_easy.save_svg"><code class="docutils literal notranslate"><span class="pre">save_svg()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.rdkit_easy.setup_notebook"><code class="docutils literal notranslate"><span class="pre">setup_notebook()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.rdkit_easy.show_df"><code class="docutils literal notranslate"><span class="pre">show_df()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.rdkit_easy.show_html"><code class="docutils literal notranslate"><span class="pre">show_html()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.struct_utils">utils.struct_utils module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utils.struct_utils.base_mol_from_inchi"><code class="docutils literal notranslate"><span class="pre">base_mol_from_inchi()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.struct_utils.base_mol_from_smiles"><code class="docutils literal notranslate"><span class="pre">base_mol_from_smiles()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.struct_utils.base_smiles_from_inchi"><code class="docutils literal notranslate"><span class="pre">base_smiles_from_inchi()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.struct_utils.base_smiles_from_smiles"><code class="docutils literal notranslate"><span class="pre">base_smiles_from_smiles()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.struct_utils.draw_structure"><code class="docutils literal notranslate"><span class="pre">draw_structure()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.struct_utils.fix_moe_smiles"><code class="docutils literal notranslate"><span class="pre">fix_moe_smiles()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.struct_utils.get_rdkit_smiles"><code class="docutils literal notranslate"><span class="pre">get_rdkit_smiles()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.struct_utils.kekulize_smiles"><code class="docutils literal notranslate"><span class="pre">kekulize_smiles()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.struct_utils.mol_wt_from_smiles"><code class="docutils literal notranslate"><span class="pre">mol_wt_from_smiles()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.struct_utils.mols_from_smiles"><code class="docutils literal notranslate"><span class="pre">mols_from_smiles()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.struct_utils.rdkit_smiles_from_smiles"><code class="docutils literal notranslate"><span class="pre">rdkit_smiles_from_smiles()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#utils.struct_utils.smiles_to_inchi_key"><code class="docutils literal notranslate"><span class="pre">smiles_to_inchi_key()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ATOM Data-Driven Modeling Pipeline</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">atomsci</a></li>
      <li class="breadcrumb-item active">utils package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/utils.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="utils-package">
<h1>utils package<a class="headerlink" href="#utils-package" title="Permalink to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</section>
<section id="module-utils.checksum_utils">
<span id="utils-checksum-utils-module"></span><h2>utils.checksum_utils module<a class="headerlink" href="#module-utils.checksum_utils" title="Permalink to this heading"></a></h2>
<p>checksum_utils.py</p>
<p>Utilities for checksum related functions</p>
<dl class="py function">
<dt class="sig sig-object py" id="utils.checksum_utils.create_checksum">
<span class="sig-prename descclassname"><span class="pre">utils.checksum_utils.</span></span><span class="sig-name descname"><span class="pre">create_checksum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/checksum_utils.html#create_checksum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.checksum_utils.create_checksum" title="Permalink to this definition"></a></dt>
<dd><p>Calculates hash of the file</p>
<dl class="simple">
<dt>Args:</dt><dd><p>filename (str): path to the dataset file</p>
</dd>
<dt>Returns:</dt><dd><p>returns the checksum</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.checksum_utils.get_dataset_hash_from_tar">
<span class="sig-prename descclassname"><span class="pre">utils.checksum_utils.</span></span><span class="sig-name descname"><span class="pre">get_dataset_hash_from_tar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tar</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/checksum_utils.html#get_dataset_hash_from_tar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.checksum_utils.get_dataset_hash_from_tar" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.checksum_utils.uses_same_training_data_by_datasets">
<span class="sig-prename descclassname"><span class="pre">utils.checksum_utils.</span></span><span class="sig-name descname"><span class="pre">uses_same_training_data_by_datasets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ds2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/checksum_utils.html#uses_same_training_data_by_datasets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.checksum_utils.uses_same_training_data_by_datasets" title="Permalink to this definition"></a></dt>
<dd><p>Checks if the two input files’ checksums match.</p>
<dl>
<dt>Args:</dt><dd><p>ds1 (str): dataset 1</p>
<p>ds2 (str): dataset 2</p>
</dd>
<dt>Return:</dt><dd><p>True if the checksums of the two input match</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.checksum_utils.uses_same_training_data_by_tarballs">
<span class="sig-prename descclassname"><span class="pre">utils.checksum_utils.</span></span><span class="sig-name descname"><span class="pre">uses_same_training_data_by_tarballs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tar1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tar2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/checksum_utils.html#uses_same_training_data_by_tarballs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.checksum_utils.uses_same_training_data_by_tarballs" title="Permalink to this definition"></a></dt>
<dd><p>Checks if the two input files’ checksums match.</p>
<dl>
<dt>Args:</dt><dd><p>tar1 (str): path to the first tar file</p>
<p>tar2 (str):  path to the second tar file</p>
</dd>
<dt>Return:</dt><dd><p>True if the checksums of the two input files match
False if</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>the two checksums don’t match</p></li>
<li><p>one of the file doesn’t have checksums (will generate a warning)</p></li>
</ol>
</div></blockquote>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-utils.compare_split_csv">
<span id="utils-compare-split-csv-module"></span><h2>utils.compare_split_csv module<a class="headerlink" href="#module-utils.compare_split_csv" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="utils.compare_split_csv.compare_split_files">
<span class="sig-prename descclassname"><span class="pre">utils.compare_split_csv.</span></span><span class="sig-name descname"><span class="pre">compare_split_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">split1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/compare_split_csv.html#compare_split_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.compare_split_csv.compare_split_files" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.compare_split_csv.compare_splits">
<span class="sig-prename descclassname"><span class="pre">utils.compare_split_csv.</span></span><span class="sig-name descname"><span class="pre">compare_splits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">split1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/compare_split_csv.html#compare_splits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.compare_split_csv.compare_splits" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.compare_split_csv.parse_args">
<span class="sig-prename descclassname"><span class="pre">utils.compare_split_csv.</span></span><span class="sig-name descname"><span class="pre">parse_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/compare_split_csv.html#parse_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.compare_split_csv.parse_args" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-utils.compare_splits_plots">
<span id="utils-compare-splits-plots-module"></span><h2>utils.compare_splits_plots module<a class="headerlink" href="#module-utils.compare_splits_plots" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="utils.compare_splits_plots.SplitStats">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">utils.compare_splits_plots.</span></span><span class="sig-name descname"><span class="pre">SplitStats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">total_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_cols</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/compare_splits_plots.html#SplitStats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.compare_splits_plots.SplitStats" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This object manages a dataset and a given split dataframe.</p>
<dl class="py method">
<dt class="sig sig-object py" id="utils.compare_splits_plots.SplitStats.dist_hist_plot">
<span class="sig-name descname"><span class="pre">dist_hist_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dists</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/compare_splits_plots.html#SplitStats.dist_hist_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.compare_splits_plots.SplitStats.dist_hist_plot" title="Permalink to this definition"></a></dt>
<dd><p>Creates a histogram of pairwise Tanimoto distances between training
and test sets</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>dist_path (str): Optional Where to save the plot. The string ‘_dist_hist’ will be</dt><dd><p>appended to this input</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.compare_splits_plots.SplitStats.make_all_plots">
<span class="sig-name descname"><span class="pre">make_all_plots</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dist_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/compare_splits_plots.html#SplitStats.make_all_plots"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.compare_splits_plots.SplitStats.make_all_plots" title="Permalink to this definition"></a></dt>
<dd><p>Makes a series of diagnostic plots</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>dist_path (str): Optional Where to save the plot. The string ‘_frac_box’ will be</dt><dd><p>appended to this input</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.compare_splits_plots.SplitStats.print_stats">
<span class="sig-name descname"><span class="pre">print_stats</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/compare_splits_plots.html#SplitStats.print_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.compare_splits_plots.SplitStats.print_stats" title="Permalink to this definition"></a></dt>
<dd><p>Prints useful statistics to stdout</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.compare_splits_plots.SplitStats.subset_frac_plot">
<span class="sig-name descname"><span class="pre">subset_frac_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dist_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/compare_splits_plots.html#SplitStats.subset_frac_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.compare_splits_plots.SplitStats.subset_frac_plot" title="Permalink to this definition"></a></dt>
<dd><p>Makes a box plot of the subset fractions</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>dist_path (str): Optional Where to save the plot. The string ‘_frac_box’ will be</dt><dd><p>appended to this input</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.compare_splits_plots.SplitStats.umap_plot">
<span class="sig-name descname"><span class="pre">umap_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dist_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/compare_splits_plots.html#SplitStats.umap_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.compare_splits_plots.SplitStats.umap_plot" title="Permalink to this definition"></a></dt>
<dd><p>Plots the first 10000 samples in Umap space using Morgan Fingerprints</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>dist_path (str): Optional Where to save the plot. The string ‘_umap_scatter’ will be</dt><dd><p>appended to this input</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.compare_splits_plots.parse_args">
<span class="sig-prename descclassname"><span class="pre">utils.compare_splits_plots.</span></span><span class="sig-name descname"><span class="pre">parse_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/compare_splits_plots.html#parse_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.compare_splits_plots.parse_args" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.compare_splits_plots.save_figure">
<span class="sig-prename descclassname"><span class="pre">utils.compare_splits_plots.</span></span><span class="sig-name descname"><span class="pre">save_figure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/compare_splits_plots.html#save_figure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.compare_splits_plots.save_figure" title="Permalink to this definition"></a></dt>
<dd><p>Saves a figure to disk. Saves both png and svg formats.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>filename (str): The name of the figure.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.compare_splits_plots.split">
<span class="sig-prename descclassname"><span class="pre">utils.compare_splits_plots.</span></span><span class="sig-name descname"><span class="pre">split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">total_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_col</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/compare_splits_plots.html#split"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.compare_splits_plots.split" title="Permalink to this definition"></a></dt>
<dd><p>Splits a dataset into training, test and validation sets using a given split.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>total_df (DataFrame): A pandas dataframe.
split_df (DataFrame): A split dataframe containing ‘cmpd_id’ and ‘subset’ columns.
id_col (str): The ID column in total_df</p>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>(DataFrame, DataFrame, DataFrame): Three dataframes for train, test, and valid </dt><dd><p>respectively.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-utils.curate_data">
<span id="utils-curate-data-module"></span><h2>utils.curate_data module<a class="headerlink" href="#module-utils.curate_data" title="Permalink to this heading"></a></h2>
<p>Utility functions used for AMPL dataset curation and creation.</p>
<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.add_classification_column">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">add_classification_column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">thresholds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_inclusive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#add_classification_column"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.add_classification_column" title="Permalink to this definition"></a></dt>
<dd><p>Add a classification column to a DataFrame.</p>
<p>Add a classification column ‘label_column’ to DataFrame ‘data’ based on values in ‘value_column’,
according to a sequence of thresholds. The number of classes is one plus the number of thresholds.</p>
<dl>
<dt>Args:</dt><dd><dl class="simple">
<dt>thresholds (float or sequence of floats): Thresholds to use to assign class labels. Label i will</dt><dd><p>be assigned to values such that thresholds[i-1] &lt; value &lt;= thresholds[i] (if right_inclusive is True)
or thresholds[i-1] &lt;= value &lt; thresholds[i] (otherwise).</p>
</dd>
</dl>
<p>value_column (str): Name of the column from which class labels are derived.</p>
<p>label_column (str): Name of the new column to be created for class labels.</p>
<p>data (DataFrame): DataFrame holding all data.</p>
<dl class="simple">
<dt>right_inclusive (bool): Whether the thresholding intervals are closed on the right or on the left.</dt><dd><p>Set this False to get the same behavior as add_binary_tertiary_classification. The default behavior
is preferred for the common case where the classification is based on a left-censoring threshold.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>DataFrame: DataFrame updated to include class label column.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.aggregate_assay_data">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">aggregate_assay_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'VALUE_NUM'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_value_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_actives</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active_thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'CMPD_NUMBER'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rdkit_smiles'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relation_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'VALUE_FLAG'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#aggregate_assay_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.aggregate_assay_data" title="Permalink to this definition"></a></dt>
<dd><p>Aggregates replicated values in assay data</p>
<p>Map RDKit SMILES strings in assay_df to base structures, then compute an MLE estimate of the mean value over replicate measurements
for the same SMILES strings, taking censoring into account. Generate an aggregated result table with one value for each unique base
SMILES string, to be used in an ML-ready dataset.</p>
<dl>
<dt>Args:</dt><dd><p>assay_df (DataFrame): The input DataFrame to be processed.</p>
<p>value_col (str): The column in the DataFrame containing assay values to be averaged.</p>
<p>output_value_col (str): Optional; the column name to use in the output DataFrame for the averaged data.</p>
<p>label_actives (bool): If True, generate an additional column ‘active’ indicating whether the mean value is above a threshold specified by active_thresh.</p>
<dl class="simple">
<dt>active_thresh (float): The threshold to be used for labeling compounds as active or inactive.</dt><dd><p>If active_thresh is None (the default), the threshold used is the minimum reported value across all records
with left-censored values (i.e., those with ‘&lt;’ in the relation column.</p>
</dd>
</dl>
<p>id_col (str): The input DataFrame column containing compound IDs.</p>
<p>smiles_col (str): The input DataFrame column containing SMILES strings.</p>
<p>relation_col (str): The input DataFrame column containing relational operators (&lt;, &gt;, etc.).</p>
<dl class="simple">
<dt>date_col (str): The input DataFrame column containing dates when the assay data was uploaded. If not None, the code will assign the earliest</dt><dd><p>date among replicates to the aggregate data record.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>A DataFrame containing averaged assay values, with one value per compound.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.average_and_remove_duplicates">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">average_and_remove_duplicates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_bad_duplicates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_stdev</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compound_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'CMPD_NUMBER'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rm_duplicate_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rdkit_smiles_parent'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#average_and_remove_duplicates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.average_and_remove_duplicates" title="Permalink to this definition"></a></dt>
<dd><p>This while loop loops through until no ‘bad duplicates’ are left.</p>
<p>This function removes duplicates based on max_stdev and tolerance. If the
value in data[column] falls too far from the mean based on tolerance and
max_stdev then that entry is removed. This is repeated until all bad
entries are removed</p>
<dl>
<dt>Args:</dt><dd><p>column (str): column with the value of interest</p>
<dl class="simple">
<dt>tolerance (float): acceptable % difference between value and average</dt><dd><p>ie.: if “[(value - mean)/mean*100]&gt;tolerance” then remove data row</p>
</dd>
</dl>
<p>list_bad_duplicates (str): ‘Yes’ to list the bad duplicates</p>
<p>data (DataFrame): input DataFrame</p>
<p>max_stdev (float): maximum standard deviation threshold</p>
<p>compound_id (str): column containing compound ids</p>
<dl class="simple">
<dt>rm_duplicate_only (bool): only remove bad duplicates, don’t average good ones, the resulting table can be fed into aggregate assay data to further process.</dt><dd><p>note: The mean is recalculated on each loop through to make sure it isn’t skewed by the ‘bad duplicate’ values</p>
</dd>
</dl>
<p>smiles_col (str): column containing base rdkit smiles strings</p>
</dd>
<dt>Returns:</dt><dd><p>DataFrame: Returns remaining rows after all bad duplicates have been removed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.create_new_rows_for_extra_results">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">create_new_rows_for_extra_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">extra_result_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#create_new_rows_for_extra_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.create_new_rows_for_extra_results" title="Permalink to this definition"></a></dt>
<dd><p>Moves results from an extra column to an existing column</p>
<p>Returns a new DataFrame with values from ‘extra_result_col’ appended to the
end of ‘value_col’. NaN values in ‘extra_result_col’ are dropped. ‘Extra_result_col’
is dropped from the resulting DataFrame</p>
<dl>
<dt>Args:</dt><dd><p>extra_result_col (str): A column in ‘data’.</p>
<p>value_col (str): A column in ‘data’.</p>
<p>data (DataFrame):</p>
</dd>
<dt>Returns:</dt><dd><p>DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.filter_in_by_column_values">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">filter_in_by_column_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#filter_in_by_column_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.filter_in_by_column_values" title="Permalink to this definition"></a></dt>
<dd><p>Include rows only for given values in specified column.</p>
<p>Filters in all rows in data if row[column] in values.</p>
<dl>
<dt>Args:</dt><dd><p>column (str): Name of a column in data.</p>
<dl class="simple">
<dt>values (iterable): An iterable, Series, DataFrame, or dict of values</dt><dd><p>contained in data[column].</p>
</dd>
</dl>
<p>data (DataFrame): A DataFrame.</p>
</dd>
<dt>Returns:</dt><dd><p>DataFrame: DataFrame containing filtered rows.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.filter_in_out_by_column_values">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">filter_in_out_by_column_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_out</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#filter_in_out_by_column_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.filter_in_out_by_column_values" title="Permalink to this definition"></a></dt>
<dd><p>Include rows only for given values in specified column.</p>
<p>Given a DataFrame, column, and an iterable, Series, DataFrame, or dict, of values, 
return a DataFrame with rows containing value in values or all rows 
that do not containe a value in values.</p>
<dl>
<dt>Args:</dt><dd><p>column (str): Name of a column in data.</p>
<dl class="simple">
<dt>values (iterable): An iterable, Series, DataFrame, or dict of values</dt><dd><p>contained in data[column].</p>
</dd>
</dl>
<p>data (DataFrame): A DataFrame.</p>
<dl class="simple">
<dt>in_out (str): If set to ‘in’, will filter in rows that contain a value</dt><dd><p>in values. If set to anything else, this function will filter out
rows that contian a value in values.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>DataFrame: DataFrame containing filtered rows.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.filter_out_by_column_values">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">filter_out_by_column_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#filter_out_by_column_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.filter_out_by_column_values" title="Permalink to this definition"></a></dt>
<dd><p>Exclude rows only for given values in specified column.</p>
<p>Filters out all rows in data if row[column] in values.</p>
<dl>
<dt>Args:</dt><dd><p>column (str): Name of a column in data.</p>
<dl class="simple">
<dt>values (iterable): An iterable, Series, DataFrame, or dict of values</dt><dd><p>contained in data[column].</p>
</dd>
</dl>
<p>data (DataFrame): A DataFrame.</p>
</dd>
<dt>Returns:</dt><dd><p>DataFrame: DataFrame containing filtered rows.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.filter_out_comments">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">filter_out_comments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values_cs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#filter_out_comments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.filter_out_comments" title="Permalink to this definition"></a></dt>
<dd><p>Remove rows that contain the text listed</p>
<p>Removes any rows where data[‘COMMENTS’] contains the words in
values or values_cs. Used for removing results that indicate
bad data in the comments.</p>
<dl>
<dt>Args:</dt><dd><p>values (str): list of values that are not case sensitive</p>
<p>values_cs (str): list of values that are case sensitive</p>
<p>data (DataFrame): DataFrame containing a column named ‘COMMENTS’</p>
</dd>
<dt>Returns:</dt><dd><p>DataFrame: Returns a DataFrame with the remaining rows</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.freq_table">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">freq_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#freq_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.freq_table" title="Permalink to this definition"></a></dt>
<dd><p>Generate a DataFrame tabluating the repeat requencies of unique values.</p>
<p>Generate a DataFrame tabulating the repeat frequencies of each unique value in ‘column’.
Restrict it to values occurring at least min_freq times.</p>
<dl>
<dt>Args:</dt><dd><p>dset_df (DataFrame): An input DataFrame</p>
<p>column (str): The name of one column in DataFrame</p>
<p>min_freq (int): Restrict unique count to at least min_freq times.</p>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>DataFrame: Dataframe containing two columns: the column passed in as the ‘column’ argument</dt><dd><p>and the column ‘Count’. The ‘Count’ column contains the number of occurances for each
value in the ‘column’ argument.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.get_rdkit_smiles_parent">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">get_rdkit_smiles_parent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#get_rdkit_smiles_parent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.get_rdkit_smiles_parent" title="Permalink to this definition"></a></dt>
<dd><p>Strip the salts off the rdkit SMILES strings</p>
<p>First, loops through data and determines the base/parent smiles string for each row.
Appends the base smiles string to a new row in a list.
Then adds the list as a new column, ‘rdkit_smiles_parent’, in ‘data’.
Basically calls base_smiles_from_smiles for each smile in the column ‘rdkit_smiles’</p>
<dl class="simple">
<dt>Args:</dt><dd><p>data (DataFrame): A DataFrame with a column named ‘rdkit_smiles’.</p>
</dd>
<dt>Returns:</dt><dd><p>DataFrame with column ‘rdkit_smiles_parent’ with salts stripped</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.labeled_freq_table">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">labeled_freq_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#labeled_freq_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.labeled_freq_table" title="Permalink to this definition"></a></dt>
<dd><p>Generate a frequency table in which additional columns are included.</p>
<p>Generate a frequency table in which additional columns are included. The first column in ‘columns’
is assumed to be a unique ID; there should be a many-to-1 mapping from the ID to each of the additional
columns.</p>
<dl>
<dt>Args:</dt><dd><p>dset_df (DataFrame): The input DataFrame.</p>
<dl class="simple">
<dt>columns (list(str)): A list of columns to include in the output frequency table.</dt><dd><p>The first column in ‘columns’ is assumed to be a unique ID; there should be 
a many-to-1 mapping from the ID to each of the additional columns.</p>
</dd>
</dl>
<p>min_freq (int): Restrict unique count to at least min_freq times.</p>
</dd>
<dt>Returns:</dt><dd><p>DataFrame: A DataFrame containing a frequency table.</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception: If the DataFrame violates the rule: there should be a many-to-1 </dt><dd><p>mapping from the ID to each of the additional columns.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.mle_censored_mean">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">mle_censored_mean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmpd_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std_est</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PIC50'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relation_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'relation'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#mle_censored_mean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.mle_censored_mean" title="Permalink to this definition"></a></dt>
<dd><p>Computes maximum likelihood estimate of the true mean value for a single replicated compound.</p>
<p>Compute a maximum likelihood estimate of the true mean value underlying the distribution of replicate assay measurements for a
single compound. The data may be a mix of censored and uncensored measurements, as indicated by the ‘relation’ column in the input
DataFrame cmpd_df. std_est is an estimate for the standard deviation of the distribution, which is assumed to be Gaussian;
we typically compute a common estimate for the whole dataset using replicate_rmsd().</p>
<dl>
<dt>Args:</dt><dd><p>cmpd_df (DataFrame): DataFrame containing measurements and SMILES strings.</p>
<p>std_est (float): An estimate for the standard deviation of the distribution.</p>
<p>smiles_col (str): Name of the column that contains SMILES strings.</p>
<p>value_col (str): Name of the column that contains target values.</p>
<p>relation_col (str): The input DataFrame column containing relational operators (&lt;, &gt;, etc.).</p>
</dd>
<dt>Returns:</dt><dd><p>float: maximum likelihood estimate of the true mean for a replicated compound
str: Relation, ‘’ not censored, ‘&gt;’ right censored, ‘&lt;’ left censored</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.remove_outlier_replicates">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">remove_outlier_replicates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pIC50'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'compound_id'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_diff_from_median</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#remove_outlier_replicates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.remove_outlier_replicates" title="Permalink to this definition"></a></dt>
<dd><p>Examine groups of replicate measurements for compounds identified by compound ID and compute median response
for each group. Eliminate measurements that differ by more than a given value from the median; note that
in some groups this will result in all replicates being deleted. This function should be used together with
<cite>aggregate_assay_data</cite> instead of <cite>average_and_remove_duplicates</cite> to reduce data to a single value per compound.</p>
<dl>
<dt>Args:</dt><dd><p>df (DataFrame): Table of compounds and response data</p>
<p>response_col (str): Column containing response values</p>
<p>id_col (str): Column that uniquely identifies compounds, and therefore measurements to be treated as replicates.</p>
<p>max_diff_from_median (float): Maximum absolute difference from median value allowed for retained replicates.</p>
</dd>
<dt>Returns:</dt><dd><p>result_df (DataFrame): Filtered data frame with outlier replicates removed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.replicate_rmsd">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">replicate_rmsd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'base_rdkit_smiles'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PIC50'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relation_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'relation'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#replicate_rmsd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.replicate_rmsd" title="Permalink to this definition"></a></dt>
<dd><p>Compute RMS deviation of all replicate uncensored measurements from means</p>
<p>Compute RMS deviation of all replicate uncensored measurements in dset_df from their means. Measurements are treated
as replicates if they correspond to the same SMILES string, and are considered censored if the relation
column contains &gt; or &lt;. The resulting value is meant to be used as an estimate of measurement error for all compounds
in the dataset.</p>
<dl>
<dt>Args:</dt><dd><p>dset_df (DataFrame): DataFrame containing uncensored measurements and SMILES strings.</p>
<p>smiles_col (str): Name of the column that contains SMILES strings.</p>
<p>value_col (str): Name of the column that contains target values.</p>
<p>relation_col (str): The input DataFrame column containing relational operators (&lt;, &gt;, etc.).</p>
<p>default_val (float): The value to return if there are no compounds with replicate measurements.</p>
</dd>
<dt>Returns:</dt><dd><p>float: returns root mean squared deviation of all replicate uncensored measurements</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.set_group_permissions">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">set_group_permissions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AD'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">owner</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'GSK'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#set_group_permissions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.set_group_permissions" title="Permalink to this definition"></a></dt>
<dd><p>Sets file and group permissions
Set file group and permissions to standard values for a dataset containing proprietary
data owned by ‘owner’. Later we may add a ‘public’ option, or groups for data from other pharma companies.</p>
<dl>
<dt>Args:</dt><dd><p>path (string): File path</p>
<p>system (string): Computing environment from which group ownerships will be derived; currently, either ‘LC’ for LC
filesystems or ‘AD’ for LLNL systems where owners and groups are managed by Active Directory.</p>
<p>owner (string): Who the data belongs to, either ‘public’ or the name of a company (e.g. ‘GSK’) associated with a
restricted access group.</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.summarize_data">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">summarize_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_bins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'No'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#summarize_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.summarize_data" title="Permalink to this definition"></a></dt>
<dd><p>Summarizes the in data[column]</p>
<p>Summarizes the data by printing mean, stdev, max, and min of the data. Creates
plots of the binned values in data[column]. If log_column != ‘No’ this also
creates plots that compares normal and log distributions of the data.</p>
<dl>
<dt>Args:</dt><dd><p>column (str): Column of interest.</p>
<p>num_bins (int): Number of bins in the histogram.</p>
<p>title (str): Title of the histogram.</p>
<p>units (str): Units for values in ‘column’.</p>
<p>filepath (str): This file path gets printed to the console.</p>
<p>data (DataFrame): Input DataFrame.</p>
<dl class="simple">
<dt>log_column (str): Defaults to ‘No’. Any other value will generate</dt><dd><p>a plot comparing normal and log distributions.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.curate_data.xc50topxc50_for_nm">
<span class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></span><span class="sig-name descname"><span class="pre">xc50topxc50_for_nm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#xc50topxc50_for_nm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.xc50topxc50_for_nm" title="Permalink to this definition"></a></dt>
<dd><p>Convert XC50 values measured in nanomolars to -log10 (PX50)</p>
<p>Convert XC50 values measured in nanomolars to -log10 (PX50)</p>
<dl class="simple">
<dt>Args :</dt><dd><p>x (float): input XC50 value measured in nanomolars</p>
</dd>
<dt>Returns :</dt><dd><p>float: -log10 value of x</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-utils.data_curation_functions">
<span id="utils-data-curation-functions-module"></span><h2>utils.data_curation_functions module<a class="headerlink" href="#module-utils.data_curation_functions" title="Permalink to this heading"></a></h2>
<p>data_curation_functions.py</p>
<p>Extract Kevin’s functions for curation of public datasets
Modify them to match Jonathan’s curation methods in notebook
01/30/2020</p>
<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.atom_curation">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">atom_curation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">targ_lst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_lst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared_inchi_keys</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#atom_curation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.atom_curation" title="Permalink to this definition"></a></dt>
<dd><p>Apply ATOM standard ‘curation’ step to “shared_df”</p>
<p>Apply ATOM standard ‘curation’ step to “shared_df”: Average replicate assays, 
remove duplicates and drop cases with large variance between replicates.
mleqonly</p>
<dl>
<dt>Args:</dt><dd><p>targ_lst (list): A list of targets.</p>
<dl class="simple">
<dt>smiles_lst (list): A list of DataFrames.</dt><dd><p>These DataFrames must contain the columns gene_names, standard_type,
standard_relation, standard_inchi_key, PIC50, and rdkit_smiles</p>
</dd>
</dl>
<p>shared_inchi_keys (list): A list of inchi keys used in this dataset.</p>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>list, list:A list of curated DataFrames and a list of the number of compounds</dt><dd><p>dropped during the curation process for each target.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.atom_curation_excape">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">atom_curation_excape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">targ_lst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_lst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared_inchi_keys</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#atom_curation_excape"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.atom_curation_excape" title="Permalink to this definition"></a></dt>
<dd><p>Apply ATOM standard ‘curation’ step</p>
<p>Apply ATOM standard ‘curation’ step: Average replicate assays, 
remove duplicates and drop cases with large variance between replicates.
Rows with NaN values in rdkit_smiles, VALUE_NUM_mean, and pXC50 are dropped</p>
<dl>
<dt>Args:</dt><dd><p>targ_lst (list): A list of targets.</p>
<dl class="simple">
<dt>smiles_lst (list): A of DataFrames.</dt><dd><p>These DataFrames must contain the columns gene_names, standard_type,
standard_relation, standard_inchi_key, pXC50, and rdkit_smiles</p>
</dd>
</dl>
<p>shared_inchi_keys (list): A list of inchi keys used in this dataset.</p>
</dd>
<dt>Returns:</dt><dd><p>list:A list of curated DataFrames</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.down_select">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">down_select</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kv_lst</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#down_select"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.down_select" title="Permalink to this definition"></a></dt>
<dd><p>Filters rows given a set of values</p>
<p>Given a DataFrame and a list of tuples columns (k) to values (v), this function
filters out all rows where df[k] == v.</p>
<dl>
<dt>Args:</dt><dd><p>df (DataFrame): An input DataFrame.</p>
<p>kv_list (list): A list of tuples of (column, value)</p>
</dd>
<dt>Returns:</dt><dd><p>DataFrame: Rows where all df[k] == v</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.exclude_organometallics">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">exclude_organometallics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rdkit_smiles'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#exclude_organometallics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.exclude_organometallics" title="Permalink to this definition"></a></dt>
<dd><p>Filters data frame df based on column smiles_col to exclude organometallic compounds</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.filter_dtc_data">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">filter_dtc_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geneNames</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#filter_dtc_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.filter_dtc_data" title="Permalink to this definition"></a></dt>
<dd><p>Extracts and post processes JAK1, 2, and 3 datasets from DTC</p>
<p>This is specific to the DTC database.
Extract JAK1, 2 and 3 datasets from Drug Target Commons database, filtered for data usability.
filter criteria:</p>
<blockquote>
<div><p>gene_names == JAK1 | JAK2 | JAK3
InChi key not missing
standard_type IC50
units NM
standard_relation mappable to =, &lt; or &gt;
wildtype_or_mutant != ‘mutated’
valid SMILES
maps to valid RDKit base SMILES
standard_value not missing
pIC50 &gt; 3</p>
</div></blockquote>
<dl>
<dt>Args:</dt><dd><dl class="simple">
<dt>orig_df (DataFrame): Input DataFrame. Must contain the following columns: gene_names</dt><dd><p>standard_inchi_key, standard_type, standard_units, standard_value, compound_id,
wildtype_or_mutant.</p>
</dd>
</dl>
<p>geneNames (list): A list of gene names to filter out of orig_df e.g. [‘JAK1’, ‘JAK2’].</p>
</dd>
<dt>Returns:</dt><dd><p>DataFrame: The filtered rows of the orig_df</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.get_smiles_4dtc_data">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">get_smiles_4dtc_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nm_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targ_lst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_smiles_df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#get_smiles_4dtc_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.get_smiles_4dtc_data" title="Permalink to this definition"></a></dt>
<dd><p>Returns SMILES strings from DTC data</p>
<p>nm_df must be a DataFrame from DTC with the following columns: gene_names,
standard_type, standard_value, ‘standard_inchi_key’, and standard_relation.</p>
<p>This function selects all rows where nm_df[‘gene_names’] is in targ_lst,
nm_df[‘standard_type’]==’IC50’, nm_df[‘standard_relation’]==’=’, and 
‘standard_value’ &gt; 0.</p>
<p>Then pIC50 values are calculated and added to the ‘PIC50’ column, and
smiles strings are merged in from save_smiles_df</p>
<dl>
<dt>Args:</dt><dd><p>nm_df (DataFrame): Input DataFrame.</p>
<p>targ_lst (list): A list of targets.</p>
<p>save_smiles_df (DataFrame): A DataFrame with the column ‘standard_inchi_key’</p>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>list, list, str: A list of smiles. A list of inchi keys shared between targets.</dt><dd><p>And a description of the targets</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.get_smiles_dtc_data">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">get_smiles_dtc_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nm_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targ_lst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_smiles_df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#get_smiles_dtc_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.get_smiles_dtc_data" title="Permalink to this definition"></a></dt>
<dd><p>Returns SMILES strings from DTC data</p>
<p>nm_df must be a DataFrame from DTC with the following columns: gene_names,
standard_type, standard_value, ‘standard_inchi_key’, and standard_relation.</p>
<p>This function selects all rows where nm_df[‘gene_names’] is in targ_lst,
nm_df[‘standard_type’]==’IC50’, nm_df[‘standard_relation’]==’=’, and 
‘standard_value’ &gt; 0.</p>
<p>Then pIC50 values are calculated and added to the ‘PIC50’ column, and
smiles strings are merged in from save_smiles_df</p>
<dl>
<dt>Args:</dt><dd><p>nm_df (DataFrame): Input DataFrame.</p>
<p>targ_lst (list): A list of targets.</p>
<p>save_smiles_df (DataFrame): A DataFrame with the column ‘standard_inchi_key’</p>
</dd>
<dt>Returns:</dt><dd><p>list, list: A list of smiles and a list of inchi keys shared between targets.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.get_smiles_excape_data">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">get_smiles_excape_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nm_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targ_lst</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#get_smiles_excape_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.get_smiles_excape_data" title="Permalink to this definition"></a></dt>
<dd><p>Calculate base rdkit smiles</p>
<p>Divides up nm_df based on target and makes one DataFrame for each target.</p>
<p>Rows with NaN pXC50 values are dropped. Base rdkit SMILES are calculated
from the SMILES column using 
atomsci.ddm.utils.struct_utils.base_rdkit_smiles_from_smiles. A new column,
‘rdkit_smiles, is added to each output DataFrame.</p>
<dl>
<dt>Args:</dt><dd><dl class="simple">
<dt>nm_df (DataFrame): DataFrame for Excape database. Should contain the columns,</dt><dd><p>pXC50, SMILES, and Ambit_InchiKey</p>
</dd>
</dl>
<p>targ_lst (list): A list of targets to filter out of nm_df</p>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>list, list: A list of DataFrames, one for each target, and a list of </dt><dd><p>all inchi keys used in the dataset.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.ic50topic50">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">ic50topic50</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#ic50topic50"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.ic50topic50" title="Permalink to this definition"></a></dt>
<dd><p>Calculates pIC50 from IC50</p>
<p>Calculates pIC50 from IC50</p>
<dl class="simple">
<dt>Args:</dt><dd><p>x (float): An IC50 in nanomolar (nM) units.</p>
</dd>
<dt>Returns:</dt><dd><p>float: The pIC50.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.is_organometallic">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">is_organometallic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mol</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#is_organometallic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.is_organometallic" title="Permalink to this definition"></a></dt>
<dd><p>Returns True if the molecule is organometallic</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.set_data_root">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">set_data_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#set_data_root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.set_data_root" title="Permalink to this definition"></a></dt>
<dd><p>Set global variables for data directories</p>
<p>Creates paths for DTC and Excape given a root data directory. 
Global variables ‘data_root’ and ‘data_dirs’. ‘data_root’ is the
root data directory. ‘data_dirs’ is a dictionary that maps ‘DTC’ and ‘Excape’
to directores calcuated from ‘data_root’</p>
<dl class="simple">
<dt>Args:</dt><dd><p>dir (str): root data directory containing folds ‘dtc’ and ‘excape’</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.standardize_relations">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">standardize_relations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rel_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_rel_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invert</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#standardize_relations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.standardize_relations" title="Permalink to this definition"></a></dt>
<dd><p>Standardizes censoring operators</p>
<p>Standardize the censoring operators to =, &lt; or &gt;, and remove any rows whose operators
don’t map to a standard one. There is a special case for db=’ChEMBL’ that strips
the extra “‘“s around relationship symbols. Assumes relationship columns are 
‘Standard Relation’, ‘standard_relation’ and ‘activity_prefix’ for ChEMBL, DTC and GoStar respectively.</p>
<p>This function makes the following mappings: “&gt;” to “&gt;”, “&gt;=” to “&gt;”, “&lt;” to “&lt;”,
“&lt;=” to “&lt;”, and “=” to “=”. All other relations are removed from the DataFrame.</p>
<dl>
<dt>Args:</dt><dd><dl class="simple">
<dt>dset_df (DataFrame): Input DataFrame. Must contain either ‘Standard Relation’</dt><dd><p>or ‘standard_relation’</p>
</dd>
</dl>
<p>db (str): Source database. Must be either ‘GoStar’, ‘DTC’ or ‘ChEMBL’. Required if rel_col is not specified.</p>
<dl class="simple">
<dt>rel_col (str): Column containing relational operators. If specified, overrides the default relation column </dt><dd><p>for db.</p>
</dd>
<dt>output_rel_col (str): If specified, put the standardized operators in a new column with this name and leave</dt><dd><p>the original operator column unchanged.</p>
</dd>
<dt>invert (bool): If true, replace the inequality operators with their inverses. This is useful when a reported</dt><dd><p>value such as IC50 is converted to its negative log such as pIC50.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>DataFrame: Dataframe with the standardized relationship sybmols</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.upload_df_dtc_base_smiles_all">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">upload_df_dtc_base_smiles_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">functional_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assay_category</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtc_mleqonly_fileID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'journal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">species</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'human'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#upload_df_dtc_base_smiles_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.upload_df_dtc_base_smiles_all" title="Permalink to this definition"></a></dt>
<dd><p>Uploads DTC base smiles data to the datastore</p>
<p>Uploads base SMILES string for the DTC dataset.</p>
<p>Returns the datastore OID of the uploaded dataset. The dataset is uploaded to the
public bucket and lists <a class="reference external" href="https://doi.org/10.1016/j.chembiol.2017.11.009">https://doi.org/10.1016/j.chembiol.2017.11.009</a>’ as the doi.
This also assumes that the id_col is ‘compound_id’, the response column is set to PIC50,
and the SMILES are assumed to be in ‘base_rdkit_smiles’.</p>
<dl>
<dt>Args:</dt><dd><p>dset_name (str): Name of the dataset. Should not include a file extension.</p>
<p>title (str): title of the file in (human friendly format)</p>
<p>description (str): long text box to describe file (background/use notes)</p>
<p>tags (list): Must be a list of strings.</p>
<p>functional_area (str): The functional area.</p>
<p>target (str): The target.</p>
<p>target_type (str): The target type of the dataset.</p>
<p>activity (str): The activity of the dataset.</p>
<p>assay_category (str): The assay category of the dataset.</p>
<p>data_df (DataFrame): DataFrame to be uploaded.</p>
<p>dtc_mleqonly_fileID (str): Source file id used to generate data_df.</p>
<p>data_origin (str): The origin of the dataset e.g. journal.</p>
<p>species (str): The species of the dataset e.g. human, rat, dog.</p>
<p>force_update (bool): Overwrite existing datasets in the datastore.</p>
</dd>
<dt>Returns:</dt><dd><p>str: datastore OID of the uploaded dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.upload_df_dtc_mleqonly">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">upload_df_dtc_mleqonly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">functional_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assay_category</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtc_smiles_fileID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'journal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">species</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'human'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#upload_df_dtc_mleqonly"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.upload_df_dtc_mleqonly" title="Permalink to this definition"></a></dt>
<dd><p>Uploads DTC mleqonly data to the datastore</p>
<p>Upload mleqonly data to the datastore from the given DataFrame. The DataFrame
must contain the column ‘rdkit_smiles’ and ‘VALUE_NUM_mean’. This function is 
meant to upload data that has been aggregated using 
atomsci.ddm.utils.curate_data.average_and_remove_duplicates.
Returns the datastore OID of the uploaded dataset. The dataset is uploaded to the
public bucket and lists <a class="reference external" href="https://doi.org/10.1016/j.chembiol.2017.11.009">https://doi.org/10.1016/j.chembiol.2017.11.009</a>’ as the doi.
This also assumes that the id_col is ‘compound_id’.</p>
<dl>
<dt>Args:</dt><dd><p>dset_name (str): Name of the dataset. Should not include a file extension.</p>
<p>title (str): title of the file in (human friendly format)</p>
<p>description (str): long text box to describe file (background/use notes)</p>
<p>tags (list): Must be a list of strings.</p>
<p>functional_area (str): The functional area.</p>
<p>target (str): The target.</p>
<p>target_type (str): The target type of the dataset.</p>
<p>activity (str): The activity of the dataset.</p>
<p>assay_category (str): The assay category of the dataset.</p>
<p>data_df (DataFrame): DataFrame to be uploaded.</p>
<p>dtc_smiles_fileID (str): Source file id used to generate data_df.</p>
<p>data_origin (str): The origin of the dataset e.g. journal.</p>
<p>species (str): The species of the dataset e.g. human, rat, dog.</p>
<p>force_update (bool): Overwrite existing datasets in the datastore.</p>
</dd>
<dt>Returns:</dt><dd><p>str: datastore OID of the uploaded dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.upload_df_dtc_mleqonly_class">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">upload_df_dtc_mleqonly_class</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">functional_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assay_category</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtc_mleqonly_fileID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'journal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">species</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'human'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#upload_df_dtc_mleqonly_class"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.upload_df_dtc_mleqonly_class" title="Permalink to this definition"></a></dt>
<dd><p>Uploads DTC mleqonly classification data to the datastore</p>
<p>Upload mleqonly classification data to the datastore from the given DataFrame. The DataFrame
must contain the column ‘rdkit_smiles’ and ‘binary_class’. This function is 
meant to upload data that has been aggregated using 
atomsci.ddm.utils.curate_data.average_and_remove_duplicates and then thresholded to
make a binary classification dataset.
Returns the datastore OID of the uploaded dataset. The dataset is uploaded to the
public bucket and lists <a class="reference external" href="https://doi.org/10.1016/j.chembiol.2017.11.009">https://doi.org/10.1016/j.chembiol.2017.11.009</a>’ as the doi.
This also assumes that the id_col is ‘compound_id’.</p>
<dl>
<dt>Args:</dt><dd><p>dset_name (str): Name of the dataset. Should not include a file extension.</p>
<p>title (str): title of the file in (human friendly format)</p>
<p>description (str): long text box to describe file (background/use notes)</p>
<p>tags (list): Must be a list of strings.</p>
<p>functional_area (str): The functional area.</p>
<p>target (str): The target.</p>
<p>target_type (str): The target type of the dataset.</p>
<p>activity (str): The activity of the dataset.</p>
<p>assay_category (str): The assay category of the dataset.</p>
<p>data_df (DataFrame): DataFrame to be uploaded.</p>
<p>dtc_mleqonly_fileID (str): Source file id used to generate data_df.</p>
<p>data_origin (str): The origin of the dataset e.g. journal.</p>
<p>species (str): The species of the dataset e.g. human, rat, dog.</p>
<p>force_update (bool): Overwrite existing datasets in the datastore.</p>
</dd>
<dt>Returns:</dt><dd><p>str: datastore OID of the uploaded dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.upload_df_dtc_smiles">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">upload_df_dtc_smiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">functional_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assay_category</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig_fileID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'journal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">species</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'human'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#upload_df_dtc_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.upload_df_dtc_smiles" title="Permalink to this definition"></a></dt>
<dd><p>Uploads DTC smiles data to the datastore</p>
<p>Upload a raw dataset to the datastore from the given DataFrame. 
Returns the datastore OID of the uploaded dataset. The dataset is uploaded to the
public bucket and lists <a class="reference external" href="https://doi.org/10.1016/j.chembiol.2017.11.009">https://doi.org/10.1016/j.chembiol.2017.11.009</a>’ as the doi.
This also assumes that the id_col is ‘compound_id’</p>
<dl>
<dt>Args:</dt><dd><p>dset_name (str): Name of the dataset. Should not include a file extension.</p>
<p>title (str): title of the file in (human friendly format)</p>
<p>description (str): long text box to describe file (background/use notes)</p>
<p>tags (list): Must be a list of strings.</p>
<p>functional_area (str): The functional area.</p>
<p>target (str): The target.</p>
<p>target_type (str): The target type of the dataset.</p>
<p>activity (str): The activity of the dataset.</p>
<p>assay_category (str): The assay category of the dataset.</p>
<p>smiles_df (DataFrame): DataFrame containing SMILES to be uploaded.</p>
<p>orig_fileID (str): Source file id used to generate smiles_df.</p>
<p>data_origin (str): The origin of the dataset e.g. journal.</p>
<p>species (str): The species of the dataset e.g. human, rat, dog.</p>
<p>force_update (bool): Overwrite existing datasets in the datastore.</p>
</dd>
<dt>Returns:</dt><dd><p>str: datastore OID of the uploaded dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.upload_df_dtc_smiles_regr_all_class">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">upload_df_dtc_smiles_regr_all_class</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">functional_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assay_category</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtc_smiles_regr_all_fileID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'journal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">species</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'human'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#upload_df_dtc_smiles_regr_all_class"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.upload_df_dtc_smiles_regr_all_class" title="Permalink to this definition"></a></dt>
<dd><p>Uploads DTC classification data to the datastore</p>
<p>Uploads binary classiciation data for the DTC dataset. Classnames are assumed to
be ‘active’ and ‘inactive’</p>
<p>Returns the datastore OID of the uploaded dataset. The dataset is uploaded to the
public bucket and lists <a class="reference external" href="https://doi.org/10.1016/j.chembiol.2017.11.009">https://doi.org/10.1016/j.chembiol.2017.11.009</a>’ as the doi.
This also assumes that the id_col is ‘compound_id’, the response column is set to PIC50.</p>
<dl>
<dt>Args:</dt><dd><p>dset_name (str): Name of the dataset. Should not include a file extension.</p>
<p>title (str): title of the file in (human friendly format)</p>
<p>description (str): long text box to describe file (background/use notes)</p>
<p>tags (list): Must be a list of strings.</p>
<p>functional_area (str): The functional area.</p>
<p>target (str): The target.</p>
<p>target_type (str): The target type of the dataset.</p>
<p>activity (str): The activity of the dataset.</p>
<p>assay_category (str): The assay category of the dataset.</p>
<p>data_df (DataFrame): DataFrame to be uploaded.</p>
<p>dtc_smiles_regr_all_fileID(str): Source file id used to generate data_df.</p>
<p>smiles_column (str): Column containing SMILES.</p>
<p>data_origin (str): The origin of the dataset e.g. journal.</p>
<p>species (str): The species of the dataset e.g. human, rat, dog.</p>
<p>force_update (bool): Overwrite existing datasets in the datastore.</p>
</dd>
<dt>Returns:</dt><dd><p>str: datastore OID of the uploaded dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.upload_df_excape_mleqonly">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">upload_df_excape_mleqonly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">functional_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assay_category</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_fileID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'journal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">species</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'human'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#upload_df_excape_mleqonly"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.upload_df_excape_mleqonly" title="Permalink to this definition"></a></dt>
<dd><p>Uploads Excape mleqonly data to the datastore</p>
<p>Upload mleqonly to the datastore from the given DataFrame. 
Returns the datastore OID of the uploaded dataset. The dataset is uploaded to the
public bucket and lists <a class="reference external" href="https://dx.doi.org/10.1186%2Fs13321-017-0203-5">https://dx.doi.org/10.1186%2Fs13321-017-0203-5</a> as the doi.
This also assumes that the id_col is ‘Original_Entry_ID’, smiles_col is ‘rdkit_smiles’
and response_col is ‘VALUE_NUM_mean’.</p>
<dl>
<dt>Args:</dt><dd><p>dset_name (str): Name of the dataset. Should not include a file extension.</p>
<p>title (str): title of the file in (human friendly format)</p>
<p>description (str): long text box to describe file (background/use notes)</p>
<p>tags (list): Must be a list of strings.</p>
<p>functional_area (str): The functional area.</p>
<p>target (str): The target.</p>
<p>target_type (str): The target type of the dataset.</p>
<p>activity (str): The activity of the dataset.</p>
<p>assay_category (str): The assay category of the dataset.</p>
<p>data_df (DataFrame): DataFrame containing SMILES to be uploaded.</p>
<p>smiles_fileID (str): Source file id used to generate data_df.</p>
<p>data_origin (str): The origin of the dataset e.g. journal.</p>
<p>species (str): The species of the dataset e.g. human, rat, dog.</p>
<p>force_update (bool): Overwrite existing datasets in the datastore.</p>
</dd>
<dt>Returns:</dt><dd><p>str: datastore OID of the uploaded dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.upload_df_excape_mleqonly_class">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">upload_df_excape_mleqonly_class</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">functional_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assay_category</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mleqonly_fileID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'journal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">species</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'human'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#upload_df_excape_mleqonly_class"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.upload_df_excape_mleqonly_class" title="Permalink to this definition"></a></dt>
<dd><p>Uploads Excape mleqonly classification data to the datastore</p>
<p>data_df contains a binary classification dataset with ‘active’ and ‘incative’ classes.</p>
<p>Upload mleqonly classification to the datastore from the given DataFrame. 
Returns the datastore OID of the uploaded dataset. The dataset is uploaded to the
public bucket and lists <a class="reference external" href="https://dx.doi.org/10.1186%2Fs13321-017-0203-5">https://dx.doi.org/10.1186%2Fs13321-017-0203-5</a> as the doi.
This also assumes that the id_col is ‘Original_Entry_ID’, smiles_col is ‘rdkit_smiles’
and response_col is ‘binary_class’.</p>
<dl>
<dt>Args:</dt><dd><p>dset_name (str): Name of the dataset. Should not include a file extension.</p>
<p>title (str): title of the file in (human friendly format)</p>
<p>description (str): long text box to describe file (background/use notes)</p>
<p>tags (list): Must be a list of strings.</p>
<p>functional_area (str): The functional area.</p>
<p>target (str): The target.</p>
<p>target_type (str): The target type of the dataset.</p>
<p>activity (str): The activity of the dataset.</p>
<p>assay_category (str): The assay category of the dataset.</p>
<p>data_df (DataFrame): DataFrame containing SMILES to be uploaded.</p>
<p>mleqonly_fileID (str): Source file id used to generate data_df.</p>
<p>data_origin (str): The origin of the dataset e.g. journal.</p>
<p>species (str): The species of the dataset e.g. human, rat, dog.</p>
<p>force_update (bool): Overwrite existing datasets in the datastore.</p>
</dd>
<dt>Returns:</dt><dd><p>str: datastore OID of the uploaded dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.upload_df_excape_smiles">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">upload_df_excape_smiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">functional_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assay_category</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig_fileID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'journal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">species</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'human'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#upload_df_excape_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.upload_df_excape_smiles" title="Permalink to this definition"></a></dt>
<dd><p>Uploads Excape SMILES data to the datastore</p>
<p>Upload SMILES to the datastore from the given DataFrame. 
Returns the datastore OID of the uploaded dataset. The dataset is uploaded to the
public bucket and lists <a class="reference external" href="https://dx.doi.org/10.1186%2Fs13321-017-0203-5">https://dx.doi.org/10.1186%2Fs13321-017-0203-5</a> as the doi.
This also assumes that the id_col is ‘Original_Entry_ID’</p>
<dl>
<dt>Args:</dt><dd><p>dset_name (str): Name of the dataset. Should not include a file extension.</p>
<p>title (str): title of the file in (human friendly format)</p>
<p>description (str): long text box to describe file (background/use notes)</p>
<p>tags (list): Must be a list of strings.</p>
<p>functional_area (str): The functional area.</p>
<p>target (str): The target.</p>
<p>target_type (str): The target type of the dataset.</p>
<p>activity (str): The activity of the dataset.</p>
<p>assay_category (str): The assay category of the dataset.</p>
<p>smiles_df (DataFrame): DataFrame containing SMILES to be uploaded.</p>
<p>orig_fileID (str): Source file id used to generate smiles_df.</p>
<p>data_origin (str): The origin of the dataset e.g. journal.</p>
<p>species (str): The species of the dataset e.g. human, rat, dog.</p>
<p>force_update (bool): Overwrite existing datasets in the datastore.</p>
</dd>
<dt>Returns:</dt><dd><p>str: datastore OID of the uploaded dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.upload_file_dtc_raw_data">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">upload_file_dtc_raw_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">functional_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assay_category</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'journal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">species</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'human'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#upload_file_dtc_raw_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.upload_file_dtc_raw_data" title="Permalink to this definition"></a></dt>
<dd><p>Uploads raw DTC data to the datastore</p>
<p>Upload a raw dataset to the datastore from the given DataFrame. 
Returns the datastore OID of the uploaded dataset. The dataset is uploaded to the
public bucket and lists <a class="reference external" href="https://doi.org/10.1016/j.chembiol.2017.11.009">https://doi.org/10.1016/j.chembiol.2017.11.009</a>’ as the doi.
This also assumes that the id_col is ‘compound_id’</p>
<dl>
<dt>Args:</dt><dd><p>dset_name (str): Name of the dataset. Should not include a file extension.</p>
<p>title (str): title of the file in (human friendly format)</p>
<p>description (str): long text box to describe file (background/use notes)</p>
<p>tags (list): Must be a list of strings.</p>
<p>functional_area (str): The functional area.</p>
<p>target (str): The target.</p>
<p>target_type (str): The target type of the dataset.</p>
<p>activity (str): The activity of the dataset.</p>
<p>assay_category (str): The assay category of the dataset.</p>
<p>file_path (str): The filepath of the dataset.</p>
<p>data_origin (str): The origin of the dataset e.g. journal.</p>
<p>species (str): The species of the dataset e.g. human, rat, dog.</p>
<p>force_update (bool): Overwrite existing datasets in the datastore.</p>
</dd>
<dt>Returns:</dt><dd><p>str: datastore OID of the uploaded dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.upload_file_dtc_smiles_regr_all">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">upload_file_dtc_smiles_regr_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">functional_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assay_category</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtc_smiles_fileID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'journal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">species</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'human'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#upload_file_dtc_smiles_regr_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.upload_file_dtc_smiles_regr_all" title="Permalink to this definition"></a></dt>
<dd><p>Uploads regression DTC data to the datastore</p>
<p>Uploads regression dataset for DTC dataset.</p>
<p>Returns the datastore OID of the uploaded dataset. The dataset is uploaded to the
public bucket and lists <a class="reference external" href="https://doi.org/10.1016/j.chembiol.2017.11.009">https://doi.org/10.1016/j.chembiol.2017.11.009</a>’ as the doi.
This also assumes that the id_col is ‘compound_id’, the response column is set to PIC50.</p>
<dl>
<dt>Args:</dt><dd><p>dset_name (str): Name of the dataset. Should not include a file extension.</p>
<p>title (str): title of the file in (human friendly format)</p>
<p>description (str): long text box to describe file (background/use notes)</p>
<p>tags (list): Must be a list of strings.</p>
<p>functional_area (str): The functional area.</p>
<p>target (str): The target.</p>
<p>target_type (str): The target type of the dataset.</p>
<p>activity (str): The activity of the dataset.</p>
<p>assay_category (str): The assay category of the dataset.</p>
<p>data_df (DataFrame): DataFrame to be uploaded.</p>
<p>dtc_smiles_fileID(str): Source file id used to generate data_df.</p>
<p>smiles_column (str): Column containing SMILES.</p>
<p>data_origin (str): The origin of the dataset e.g. journal.</p>
<p>species (str): The species of the dataset e.g. human, rat, dog.</p>
<p>force_update (bool): Overwrite existing datasets in the datastore.</p>
</dd>
<dt>Returns:</dt><dd><p>str: datastore OID of the uploaded dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.data_curation_functions.upload_file_excape_raw_data">
<span class="sig-prename descclassname"><span class="pre">utils.data_curation_functions.</span></span><span class="sig-name descname"><span class="pre">upload_file_excape_raw_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">functional_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assay_category</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'journal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">species</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'human'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/data_curation_functions.html#upload_file_excape_raw_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.data_curation_functions.upload_file_excape_raw_data" title="Permalink to this definition"></a></dt>
<dd><p>Uploads raw Excape data to the datastore</p>
<p>Upload a raw dataset to the datastore from the given DataFrame. 
Returns the datastore OID of the uploaded dataset. The dataset is uploaded to the
public bucket and lists <a class="reference external" href="https://dx.doi.org/10.1186%2Fs13321-017-0203-5">https://dx.doi.org/10.1186%2Fs13321-017-0203-5</a> as the doi.
This also assumes that the id_col is ‘Original_Entry_ID’</p>
<dl>
<dt>Args:</dt><dd><p>dset_name (str): Name of the dataset. Should not include a file extension.</p>
<p>title (str): title of the file in (human friendly format)</p>
<p>description (str): long text box to describe file (background/use notes)</p>
<p>tags (list): Must be a list of strings.</p>
<p>functional_area (str): The functional area.</p>
<p>target (str): The target.</p>
<p>target_type (str): The target type of the dataset.</p>
<p>activity (str): The activity of the dataset.</p>
<p>assay_category (str): The assay category of the dataset.</p>
<p>file_path (str): The filepath of the dataset.</p>
<p>data_origin (str): The origin of the dataset e.g. journal.</p>
<p>species (str): The species of the dataset e.g. human, rat, dog.</p>
<p>force_update (bool): Overwrite existing datasets in the datastore.</p>
</dd>
<dt>Returns:</dt><dd><p>str: datastore OID of the uploaded dataset.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-utils.datastore_functions">
<span id="utils-datastore-functions-module"></span><h2>utils.datastore_functions module<a class="headerlink" href="#module-utils.datastore_functions" title="Permalink to this heading"></a></h2>
<p>This file contains functions to make it easier to browse and retrieve data from the datastore.
Intended for general use. Add/modify functions as needed. Created 23Jul18 CHW</p>
<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.bulk_export_kv_for_files">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">bulk_export_kv_for_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_as</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#bulk_export_kv_for_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.bulk_export_kv_for_files" title="Permalink to this definition"></a></dt>
<dd><p>exports a csv file with 3 columns: bucket, dataset_key, key/value pairs to make reviewing  metadata easier</p>
<dl>
<dt>Args:</dt><dd><p>files (list of tuples): format [(bucket1, dataset_key1), (bucket2, dataset_key2)]</p>
<p>save_as (str): filename to use for new file</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.bulk_update_kv">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">bulk_update_kv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#bulk_update_kv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.bulk_update_kv" title="Permalink to this definition"></a></dt>
<dd><p>this function allows you to upload a properly formatted csv file with 4 columns (order and spelling of headings must match): bucket, dataset_key, kv_add, kv_del
the metadata for the files listed will then be updated in the Datastore</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.check_key_val">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">check_key_val</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enforced</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#check_key_val"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.check_key_val" title="Permalink to this definition"></a></dt>
<dd><p>Checks to ensure the keys and values specified are ‘approved’ and that (optionally) all required keys are filled out.</p>
<dl>
<dt>Args:</dt><dd><p>key_values (dict): keys and values specified by user for a file</p>
<p>client (optional): set client if not using the default</p>
<p>df (DataFrame): dataframe to be uploaded</p>
<p>enforced (bool, optional): If True (default) checks that all required keys are filled out</p>
</dd>
<dt>Returns:</dt><dd><p>(bool): returns True if all keys and values are ‘approved’ AND enforcement criteria are met</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.config_client">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">config_client</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'https://twintron-blue.llnl.gov/atom/datastore/api/v1.0/swagger.json'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_instance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#config_client"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.config_client" title="Permalink to this definition"></a></dt>
<dd><p>Configures client to access datastore service.</p>
<dl>
<dt>Args:</dt><dd><p>token (str): Path to file containing token for accessing datastore. Defaults to 
/usr/local/data/ds_token.txt on non-LC systems, or to $HOME/data/ds_token.txt on LC systems.</p>
<p>url (str): URL for datastore REST service.</p>
<p>new_instance (bool): True to force creation of a new client object. By default, a shared
singleton object is returned.</p>
</dd>
<dt>Returns:</dt><dd><p>returns configured client</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.copy_datasets_to_bucket">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">copy_datasets_to_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">from_bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ds_client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#copy_datasets_to_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.copy_datasets_to_bucket" title="Permalink to this definition"></a></dt>
<dd><p>Copy each named dataset from one bucket to another.</p>
<dl>
<dt>Args:</dt><dd><p>dataset_keys (str or list of str): List of dataset_keys for datasets to move.</p>
<p>from_bucket (str): Bucket where datasets are now.</p>
<p>to_bucket (str): Bucket to move datasets to.</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.dataset_key_exists">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">dataset_key_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#dataset_key_exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.dataset_key_exists" title="Permalink to this definition"></a></dt>
<dd><p>Returns a boolean indicating whether the given dataset_key is already present in the bucket specified.</p>
<dl>
<dt>Args:</dt><dd><p>dataset_key (str): the dataset_key for the dataset you want (unique in each bucket)</p>
<p>bucket (str): the bucket the dataset you want resides in</p>
<p>client (optional): set client if not using the default</p>
</dd>
<dt>Returns:</dt><dd><p>(bool): returns ‘True’ if dataset_key is present in bucket specified</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.filter_datasets_interactive">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">filter_datasets_interactive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_search</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restrict_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restrict_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_oid_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_all_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#filter_datasets_interactive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.filter_datasets_interactive" title="Permalink to this definition"></a></dt>
<dd><p>This is an old way of searching for files. Not based on the current format. Only use</p>
<dl>
<dt>Args:</dt><dd><p>bucket (str or list, optional): buckets to search (defaults to searching all buckets you have access to in the datastore)</p>
<p>client (optional): set client if not using the default</p>
<p>restrict_key (bool, optional): if set to True, restricts the search to keys that are on the approved list (see file in bucket with dataset_key: accepted_key_values)</p>
<p>restrict_key (bool, optional): if set to True, restricts the search to values that are on the approved list (see file in bucket with dataset_key: accepted_key_values)</p>
<p>dataset_oid_only (bool, optional): if True, return a list of dataset_oids meeting the criteria;   if False, returns a dataframe of all the metadata for the files meeting search criteria</p>
<p>display_all_columns (bool, optional): If ‘False’ (default), then show only a selected subset of the columns</p>
<p>max_rows (int, optional): maximum rows to display during interactive search</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.get_key_val">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">get_key_val</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#get_key_val"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.get_key_val" title="Permalink to this definition"></a></dt>
<dd><p>Simple utility to search through list of key value pairs and return values for query key</p>
<dl>
<dt>Args:</dt><dd><blockquote>
<div><blockquote>
<div><dl class="simple">
<dt>metadata list of key,value pairs (list): a list with position 0 = string/list of buckets, and remaining positions dictionaries of search criteria</dt><dd><dl class="simple">
<dt>example:</dt><dd><p>[{‘key’: ‘species’, ‘value’: [‘rat’] },
{‘key’: ‘assay_category’,’value’: [‘solubility’, ‘volume_of_distribution’]}]</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>key (str):  key to search for</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>returns When key is provide, returns value for matching key if found, None otherwise
returns dictionary for the list of key,value pairs when a query key is not provided.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.get_keyval">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">get_keyval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_oid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#get_keyval"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.get_keyval" title="Permalink to this definition"></a></dt>
<dd><p>Requires either dataset_oid <em>or</em> dataset_key+bucket.
Function extracts the key:value pairs and converts from the ‘datastore format’ (list of dictionaries) into ‘model tracker format’ (a single dictionary).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.initialize_model_tracker">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">initialize_model_tracker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_instance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#initialize_model_tracker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.initialize_model_tracker" title="Permalink to this definition"></a></dt>
<dd><p>Create or obtain a client object for the model tracker service..</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>mlmt_client (MLMTClientSingleton): The client object for the model tracker service.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.key_exists">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">key_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#key_exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.key_exists" title="Permalink to this definition"></a></dt>
<dd><p>Check if key exists in bucket(s) specified.</p>
<dl>
<dt>Args:</dt><dd><p>key (str): the key of interest</p>
<p>bucket (str or list, optional): ‘all’ by default. Specify bucket (as a str or list) to limit search</p>
<p>client (optional): set client if not using the default</p>
</dd>
<dt>Returns:</dt><dd><p>(bool): Returns True if key exists in bucket(s) specified</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.list_key_values">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">list_key_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">category</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'experimental'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#list_key_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.list_key_values" title="Permalink to this definition"></a></dt>
<dd><p>List the values for input key.  Requires that the input key be in the ‘approved’ list</p>
<dl>
<dt>Args:</dt><dd><p>bucket (str or list, optional): buckets to search (defaults to searching all buckets you have access to in the datastore)</p>
<p>input_key: user specified key to query</p>
<p>category: ‘experimental’ or ‘pdb_bind’</p>
<p>client (optional): set client if not using the default</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.repeat_defined_search">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">repeat_defined_search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">defined_search</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_return</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'df'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_all_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#repeat_defined_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.repeat_defined_search" title="Permalink to this definition"></a></dt>
<dd><p>Retrieves a DataFrame of files (and associated metadata) meeting the search criteria.
This is designed to work well with the output from the filter_datasets_interactive function with defined_search=True</p>
<dl>
<dt>Args:</dt><dd><dl class="simple">
<dt>defined_search (list): a list with position 0 = string/list of buckets, and remaining positions dictionaries of search criteria</dt><dd><dl class="simple">
<dt>example: defined_search = [‘gsk_ml’,</dt><dd><p>{‘key’: ‘species’, ‘value’: [‘rat’], ‘operator’: ‘in’},
{‘key’: ‘assay_category’,’value’: [‘solubility’, ‘volume_of_distribution’], ‘operator’: ‘in’}]</p>
</dd>
</dl>
</dd>
</dl>
<p>client (optional): set client if not using the default
to_return (str, optional): (default=df)</p>
<blockquote>
<div><p>‘df’ (df_results)  = return a pandas dataframe summarizing metadata of files meeting criteria
‘oid’ (dataset_oid) = return a list of dataset_oids meeting criteria
‘ds_key’ (dataset_key) = return a list of dataset_key + bucket tuples</p>
</div></blockquote>
<p>display_all_column (bool, optional): default False. If True, displays all associated metadata instead of just a selected subset</p>
</dd>
<dt>Returns:</dt><dd><p>One of the following will be returned (based on selection for ‘to_return’)
(DataFrame): dataframe of metadata for the files matching the criteria specified in the search
(list): list of dataset_oids meeting the criteria specified in the search
(list): list of bucket and dataset_key meeting the criteria specified in the search</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.retrieve_bucket_names">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">retrieve_bucket_names</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#retrieve_bucket_names"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.retrieve_bucket_names" title="Permalink to this definition"></a></dt>
<dd><p>Retrieve a list of the bucket names in datastore</p>
<dl class="simple">
<dt>Args:</dt><dd><p>client (optional): set client if not using the default</p>
</dd>
<dt>Returns:</dt><dd><p>(list): list of bucket names that exist in the datastore which user has access to</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.retrieve_columns_from_dataset">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">retrieve_columns_from_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#retrieve_columns_from_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.retrieve_columns_from_dataset" title="Permalink to this definition"></a></dt>
<dd><dl>
<dt>Retrieve column(s) from csv file (may be bz2 compressed) in datastore.</dt><dd><p>‘NA’ returned if column not in file (as well as warning message).</p>
</dd>
<dt>Args:</dt><dd><p>return_names (bool): If true, just return column headers from file</p>
<p>max_rows (int): default=0 which will return all rows</p>
<p>client (optional): set client if not using the default</p>
</dd>
<dt>Returns:</dt><dd><p>(dict): dictionary corresponding to selected columns</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.retrieve_dataset_by_dataset_oid">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">retrieve_dataset_by_dataset_oid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_oid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nrows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tarpath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#retrieve_dataset_by_dataset_oid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.retrieve_dataset_by_dataset_oid" title="Permalink to this definition"></a></dt>
<dd><p>retrieves the dataset and returns as a pandas dataframe (or other format as needed depending on file type).</p>
<dl>
<dt>Args:</dt><dd><p>dataset_oid (str): unique identifier for the dataset you want</p>
<p>client (optional): set client if not using the default</p>
<p>return_metadata (bool, optional): if set to True, return a dictionary of the metadata INSTEAD of a dataframe of the data</p>
<p>nrows (num, optional): used to limit the number of rows returned</p>
<p>print_metadata (bool, optional): if set to True, displays the document metadata/properties</p>
<p>sep (str, optional): separator used for csv file</p>
<p>tarpath (str, optional): path to use for tarball files</p>
<p>index_col (int, optional): For csv files, column to use as the row labels of the DataFrame</p>
</dd>
<dt>Returns:</dt><dd><p>(DataFrame, OrderedDict, str, dict): filetype determines what type of object is returned.
xls and xlsx files returns an OrderedDict.
tarball (gz and tgz) files returns the location of the files as a string
csv returns a DataFrame</p>
<p>optionally, return a dictionary of the metadata only if ‘return_metadata’ is set to TRUE.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.retrieve_dataset_by_datasetkey">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">retrieve_dataset_by_datasetkey</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nrows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tarpath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#retrieve_dataset_by_datasetkey"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.retrieve_dataset_by_datasetkey" title="Permalink to this definition"></a></dt>
<dd><p>Retrieves the dataset and returns as a pandas dataframe (or other format as needed depending on file type).</p>
<dl>
<dt>Args:</dt><dd><p>dataset_key (str): the dataset_key for the dataset you want (unique in each bucket)</p>
<p>bucket (str): the bucket the dataset you want resides in</p>
<p>client (optional): set client if not using the default</p>
<p>return_metadata (bool, optional): if set to True, return a dictionary of the metadata INSTEAD of a dataframe of the data</p>
<p>nrows (num, optional): used to limit the number of rows returned</p>
<p>print_metadata (bool, optional): if set to True, displays the document metadata/properties</p>
<p>sep (str, optional): separator used for csv file</p>
<p>tarpath (str, optional): path to use for tarball files</p>
<p>index_col (int, optional): For csv files, column to use as the row labels of the DataFrame</p>
</dd>
<dt>Returns:</dt><dd><p>(DataFrame, OrderedDict, str, dict): filetype determines what type of object is returned.
xls and xlsx files returns an OrderedDict.
tarball (gz and tgz) files returns the location of the files as a string
csv returns a DataFrame</p>
<p>optionally, return a dictionary of the metadata only if ‘return_metadata’ is set to TRUE.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.retrieve_keys">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">retrieve_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#retrieve_keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.retrieve_keys" title="Permalink to this definition"></a></dt>
<dd><p>Get a list of keys in bucket(s) specified.</p>
<dl>
<dt>Args:</dt><dd><p>bucket (str, optional): ‘all’ by default. Specify bucket (as a str or list) to limit search</p>
<p>client (optional): set client if not using the default</p>
<p>sort (bool, optional): if ‘True’ (default), sort the keys alphabetically</p>
</dd>
<dt>Returns:</dt><dd><p>(list): returns a list of keys in bucket(s) specified</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.retrieve_values_for_key">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">retrieve_values_for_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#retrieve_values_for_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.retrieve_values_for_key" title="Permalink to this definition"></a></dt>
<dd><p>Get a list of values associated with a specified key.</p>
<dl>
<dt>Args:</dt><dd><p>key (str): the key of interest</p>
<p>bucket (str or list, optional): ‘all’ by default. Specify bucket (as a str or list) to limit search</p>
<p>client (optional): set client if not using the default</p>
</dd>
<dt>Returns:</dt><dd><p>(list): Returns a list of values (str) associated with a specified key</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.search_datasets_by_key_value">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">search_datasets_by_key_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'in'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_all_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#search_datasets_by_key_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.search_datasets_by_key_value" title="Permalink to this definition"></a></dt>
<dd><p>Find datasets by key:value pairs and returns a DataFrame of datasets and associated properties.</p>
<dl>
<dt>Args:</dt><dd><p>key (str): the key of interest</p>
<p>value (str): the value of interest</p>
<p>client (optional): set client if not using the default</p>
<dl class="simple">
<dt>operator (str, optional): ‘in’ by default, but can be changed to any of the following:</dt><dd><p>=, !=, &lt;, &lt;=, &gt;, &gt;=, all, in, not in</p>
</dd>
</dl>
<p>bucket (str or list, optional): ‘all’ by default. Specify bucket (as a str or list) to limit search</p>
<p>display_all_columns (bool, optional): If ‘False’ (default), then show only a selected subset of the columns</p>
</dd>
<dt>Returns:</dt><dd><p>(DataFrame): summary table of the files and relevant metadata matching the criteria specified</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.search_files_interactive">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">search_files_interactive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_return</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'df'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_all_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#search_files_interactive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.search_files_interactive" title="Permalink to this definition"></a></dt>
<dd><p>This tool helps you find the files you need via an interactive/guided interface.</p>
<dl>
<dt>Args:</dt><dd><p>bucket (str or list, optional): buckets to search (defaults to searching all buckets you have access to in the datastore)</p>
<p>client (optional): set client if not using the default</p>
<dl>
<dt>to_return (str): ‘df’ (df_results)  = return a pandas dataframe summarizing metadata of files meeting criteria</dt><dd><dl class="simple">
<dt>‘search’ (search_criteria) = return a list containing search criteria where position 0 = string/list of buckets, and remaining positions are dictionaries of search criteria.</dt><dd><p>Designed to work with ‘repeat_defined_search’ function.</p>
</dd>
</dl>
<p>‘oid’ (dataset_oid) = return a list of dataset_oids meeting criteria
‘ds_key’ (dataset_key) = return a list of dataset_key + bucket tuples</p>
</dd>
</dl>
<p>display_all_columns (bool, optional): If ‘False’ (default), then show only a selected subset of the columns</p>
<p>max_rows (int, optional): maximum rows to display during interactive search</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.string_to_dict">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">string_to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dict_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#string_to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.string_to_dict" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.string_to_list">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">string_to_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">list_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#string_to_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.string_to_list" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.summarize_datasets">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">summarize_datasets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_as</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_ht</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#summarize_datasets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.summarize_datasets" title="Permalink to this definition"></a></dt>
<dd><p>Generate summary statistics such as min/max/median/mean on files specified (all files must be in same bucket).</p>
<dl>
<dt>Args:</dt><dd><p>dataset_keys (list): dataset_keys corresponding to the files to summarize</p>
<p>bucket (str): bucket the files reside in</p>
<p>client (optional): set client if not using the default</p>
<p>column (str, optional): column to summarize (will be prompted to specify if not pre-specified or if column does not exist in file)</p>
<p>save_as (str, optional): filename to save image of box plot(s) to</p>
<p>plot_ht (int, optional): height of box plots (default = 10)</p>
<p>labels (‘str’, optional):</p>
<p>last (bool optional): If True (default=False), then summarize values from last column instead of specifying column heading</p>
</dd>
<dt>Returns</dt><dd><p>(DataFrame): returns table summarizing the stats for the file(s) specified</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.update_distribution_kv">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">update_distribution_kv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kv_add</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kv_del</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#update_distribution_kv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.update_distribution_kv" title="Permalink to this definition"></a></dt>
<dd><p>update the key:values for specified file. No change to file.</p>
<dl>
<dt>Args:</dt><dd><p>bucket (str): Specify bucket where the file exists</p>
<p>dataset_key (str): dataset_key for the file to update metadata for</p>
<p>client (optional): set client if not using the default</p>
<p>kv_add (dict, optional): key-value pairs to add to the metadata for the file specified</p>
<p>kv_del (str or list, optional): keys to delete from the metadata for the file specified</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.update_kv">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">update_kv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kv_add</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kv_del</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#update_kv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.update_kv" title="Permalink to this definition"></a></dt>
<dd><p>update the key:values for specified file. No change to file.</p>
<dl>
<dt>Args:</dt><dd><p>bucket (str): Specify bucket where the file exists</p>
<p>dataset_key (str): dataset_key for the file to update metadata for</p>
<p>client (optional): set client if not using the default</p>
<p>kv_add (dict, optional): key-value pairs to add to the metadata for the file specified</p>
<p>kv_del (str or list, optional): keys to delete from the metadata for the file specified</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.upload_df_to_DS">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">upload_df_to_DS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#upload_df_to_DS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.upload_df_to_DS" title="Permalink to this definition"></a></dt>
<dd><p>This function will upload a file to the Datastore along with the associated metadata</p>
<dl>
<dt>Args:</dt><dd><p>df (DataFrame): dataframe to be uploaded</p>
<p>bucket (str): bucket the file will be put in</p>
<p>filename (str): the filename to save the dataframe as in the datastore. Include the extension</p>
<p>title (str): title of the file in (human friendly format)</p>
<p>description (str): long text box to describe file (background/use notes)</p>
<p>tags (list): must be a list.</p>
<p>key_values (dict): key-value pairs to enable future users to find the file. Must be a dictionary.</p>
<p>client (optional): set client if not using the default</p>
<p>dataset_key (str): If updating a file already in the datastore enter the corresponding dataset_key.  If not, leave as ‘none’ and the dataset_key will be automatically generated.</p>
<p>data_type (str,optional): Specify dataType (e.g. csv,bz, etc) if not specified attempt to use file extension</p>
</dd>
<dt>Returns:</dt><dd><p>(dict): if return_metadata=True, then function returns a dictionary of the metadata for the uploaded dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.upload_file_to_DS">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">upload_file_to_DS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_ref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#upload_file_to_DS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.upload_file_to_DS" title="Permalink to this definition"></a></dt>
<dd><p>This function will upload a file to the Datastore along with the associated metadata</p>
<dl>
<dt>Args:</dt><dd><p>bucket (str): bucket the file will be put in</p>
<p>title (str): title of the file in (human friendly format)</p>
<p>description (str): long text box to describe file (background/use notes)</p>
<p>tags (list): must be a list.</p>
<p>key_values (dict): key:value pairs to enable future users to find the file. Must be a dictionary.</p>
<p>filepath (str): current location of the file</p>
<p>filename (str): current filename of the file</p>
<p>client (optional): set client if not using the default</p>
<p>dataset_key (str, optional): If updating a file already in the datastore enter the corresponding dataset_key.  If not, leave as ‘none’ and the dataset_key will be automatically generated.</p>
<p>override_check (bool, optional): If ‘True’ then do NOT perform a check of the keys/values against approved list and enforcement criteria</p>
<p>return_metadata (bool, optional): If ‘True’ (default=False), then return the metadata from the uploaded file</p>
<p>file_ref (bool, optional): If ‘True’ (default=False), links file to the datastore instead of creating a copy to managed by the datastore.</p>
<p>data_type (str,optional): Specify dataType (e.g. csv,bz, etc) if not specified attempt to use file extension</p>
</dd>
<dt>Returns:</dt><dd><p>(dict): optionally returns the metadata from the uploaded file (if return_metadata=True)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.datastore_functions.upload_pickle_to_DS">
<span class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></span><span class="sig-name descname"><span class="pre">upload_pickle_to_DS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#upload_pickle_to_DS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.upload_pickle_to_DS" title="Permalink to this definition"></a></dt>
<dd><p>This function will upload a file to the Datastore along with the associated metadata.</p>
<dl>
<dt>Args:</dt><dd><p>data (DataFrame, str, list, tuple, pickle): data to be pickled and uploaded</p>
<p>bucket (str): bucket the file will be put in</p>
<p>filename (str): the filename to save the dataframe as in the datastore. Include the extension</p>
<p>title (str): title of the file in (human friendly format)</p>
<p>description (str): long text box to describe file (background/use notes)</p>
<p>tags (list): must be a list.</p>
<p>key_values (dict): key:value pairs to enable future users to find the file. Must be a dictionary.</p>
<p>client (optional): set client if not using the default</p>
<dl class="simple">
<dt>dataset_key (str, optional): If updating a file already in the datastore enter the corresponding dataset_key.</dt><dd><p>If not, leave as ‘none’ and the dataset_key will be automatically generated.</p>
</dd>
</dl>
<p>override_check (bool, optional): If True, overrides checking the metadata for the file when uploaded.</p>
<p>return_metadata (bool, optional): If True, returns metadata for the file after it is uploaded.</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-utils.file_utils">
<span id="utils-file-utils-module"></span><h2>utils.file_utils module<a class="headerlink" href="#module-utils.file_utils" title="Permalink to this heading"></a></h2>
<p>file_utils.py
Utilities for file related functions</p>
<dl class="py function">
<dt class="sig sig-object py" id="utils.file_utils.is_within_directory">
<span class="sig-prename descclassname"><span class="pre">utils.file_utils.</span></span><span class="sig-name descname"><span class="pre">is_within_directory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/file_utils.html#is_within_directory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.file_utils.is_within_directory" title="Permalink to this definition"></a></dt>
<dd><p>Check if the member target is within the directory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.file_utils.safe_extract">
<span class="sig-prename descclassname"><span class="pre">utils.file_utils.</span></span><span class="sig-name descname"><span class="pre">safe_extract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">members</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numeric_owner</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/file_utils.html#safe_extract"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.file_utils.safe_extract" title="Permalink to this definition"></a></dt>
<dd><p>Fix the vulnerability of the path traversal attack in extract() and 
extractall() functions.</p>
<p>&#64;see bugs -  CVE-2007-4559
<a class="reference external" href="https://www.trellix.com/en-us/about/newsroom/stories/research/tarfile-exploiting-the-world.html">https://www.trellix.com/en-us/about/newsroom/stories/research/tarfile-exploiting-the-world.html</a></p>
<dl class="simple">
<dt>Args:</dt><dd><p>tar (tarfile.TarFile): A TarFile object representing an open tar archive.
path: Output file path where the archive is to be extracted.
members: Relative paths for the members of the tar archive to be extracted.
numeric_owner: If True, use the uid and gid number from the tar file to set owner/group of the extracted files.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-utils.genTestset">
<span id="utils-gentestset-module"></span><h2>utils.genTestset module<a class="headerlink" href="#module-utils.genTestset" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="utils.genTestset.Union">
<span class="sig-prename descclassname"><span class="pre">utils.genTestset.</span></span><span class="sig-name descname"><span class="pre">Union</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lst1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lst2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lst3</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/genTestset.html#Union"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.genTestset.Union" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.genTestset.aggregate_basesmiles">
<span class="sig-prename descclassname"><span class="pre">utils.genTestset.</span></span><span class="sig-name descname"><span class="pre">aggregate_basesmiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pIC50'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_value_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_actives</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active_thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'compound_id'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'base_rdkit_smiles'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relation_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'VALUE_FLAG'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/genTestset.html#aggregate_basesmiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.genTestset.aggregate_basesmiles" title="Permalink to this definition"></a></dt>
<dd><blockquote>
<div><p>Extract from aggregate_assay_data() without the need to compute base_smiles_from_smiles().  
Compute an MLE estimate of the mean value over rep</p>
</div></blockquote>
<dl>
<dt>licate measurements</dt><dd><p>for the same SMILES strings, taking censoring into account. Generate an aggregated result table with one value f</p>
</dd>
<dt>or each unique base </dt><dd><blockquote>
<div><p>SMILES string, to be used in an ML-ready dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">param assay_df<span class="colon">:</span></dt>
<dd class="field-odd"><p>The input data frame to be processed.</p>
</dd>
<dt class="field-even">param value_col<span class="colon">:</span></dt>
<dd class="field-even"><p>The column in the data frame containing assay values to be averaged.</p>
</dd>
<dt class="field-odd">param output_value_col<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional; the column name to use in the output data frame for the averaged data.</p>
</dd>
<dt class="field-even">param label_actives<span class="colon">:</span></dt>
<dd class="field-even"><p>If True, generate an additional column ‘active’ indicating whether the mean value is above</p>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>a threshold specified by active_thresh.</dt><dd><dl class="field-list simple">
<dt class="field-odd">param active_thresh<span class="colon">:</span></dt>
<dd class="field-odd"><p>The threshold to be used for labeling compounds as active or inactive.</p>
</dd>
</dl>
<p>If active_thresh is None (the default), the threshold used is the minimum reported value across all records
with left-censored values (i.e., those with ‘&lt;’ in the relation column.
:param id_col: The input data frame column containing compound IDs.
:param smiles_col: The input data frame column containing SMILES strings.
:param relation_col: The input data frame column containing relational operators (&lt;, &gt;, etc.).
:param date_col: The input data frame column containing dates when the assay data was uploaded. If not None, the</p>
</dd>
<dt>code will assign the earliest</dt><dd><p>date among replicates to the aggregate data record.
:return: A data frame containing averaged assay values, with one value per compound.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.genTestset.genUnionSet">
<span class="sig-prename descclassname"><span class="pre">utils.genTestset.</span></span><span class="sig-name descname"><span class="pre">genUnionSet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtc_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ex_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ch_df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/genTestset.html#genUnionSet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.genTestset.genUnionSet" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.genTestset.generateTestset">
<span class="sig-prename descclassname"><span class="pre">utils.genTestset.</span></span><span class="sig-name descname"><span class="pre">generateTestset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtc_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ex_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ch_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.15</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/genTestset.html#generateTestset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.genTestset.generateTestset" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.genTestset.intersection">
<span class="sig-prename descclassname"><span class="pre">utils.genTestset.</span></span><span class="sig-name descname"><span class="pre">intersection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lst1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lst2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/genTestset.html#intersection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.genTestset.intersection" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-utils.hyperparam_search_wrapper">
<span id="utils-hyperparam-search-wrapper-module"></span><h2>utils.hyperparam_search_wrapper module<a class="headerlink" href="#module-utils.hyperparam_search_wrapper" title="Permalink to this heading"></a></h2>
<p>Script to generate hyperparameter combinations based on input params and send off jobs to a slurm system.
Author: Amanda Minnich</p>
<dl class="py class">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.GeometricSearch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">GeometricSearch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GeometricSearch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GeometricSearch" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#utils.hyperparam_search_wrapper.HyperparameterSearch" title="utils.hyperparam_search_wrapper.HyperparameterSearch"><code class="xref py py-class docutils literal notranslate"><span class="pre">HyperparameterSearch</span></code></a></p>
<p>Generates parameter values in logistic steps, rather than linear like GridSearch does</p>
<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.GeometricSearch.generate_assay_list">
<span class="sig-name descname"><span class="pre">generate_assay_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GeometricSearch.generate_assay_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GeometricSearch.generate_assay_list" title="Permalink to this definition"></a></dt>
<dd><p>Generates the list of datasets to build models for, with their key, bucket, split, and split uuid</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.GeometricSearch.generate_combo">
<span class="sig-name descname"><span class="pre">generate_combo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GeometricSearch.generate_combo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GeometricSearch.generate_combo" title="Permalink to this definition"></a></dt>
<dd><p>Method to generate all combinations from a given set of key-value pairs</p>
<dl class="simple">
<dt>Args:</dt><dd><p>params_dict: Set of key-value pairs with the key being the param name and the value being the list of values
you want to try for that param</p>
</dd>
<dt>Returns:</dt><dd><p>new_dict: The list of all combinations of parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.GeometricSearch.generate_param_combos">
<span class="sig-name descname"><span class="pre">generate_param_combos</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GeometricSearch.generate_param_combos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GeometricSearch.generate_param_combos" title="Permalink to this definition"></a></dt>
<dd><p>Performs additional parsing of parameters and generates all combinations</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.GeometricSearch.split_and_save_dataset">
<span class="sig-name descname"><span class="pre">split_and_save_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GeometricSearch.split_and_save_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GeometricSearch.split_and_save_dataset" title="Permalink to this definition"></a></dt>
<dd><p>Splits a given dataset, saves it, and sets the split_uuid in the metadata</p>
<dl class="simple">
<dt>Args:</dt><dd><p>assay_params: Dataset metadata</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.GridSearch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">GridSearch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GridSearch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GridSearch" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#utils.hyperparam_search_wrapper.HyperparameterSearch" title="utils.hyperparam_search_wrapper.HyperparameterSearch"><code class="xref py py-class docutils literal notranslate"><span class="pre">HyperparameterSearch</span></code></a></p>
<p>Generates fixed steps on a grid for a given hyperparameter range</p>
<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.GridSearch.generate_assay_list">
<span class="sig-name descname"><span class="pre">generate_assay_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GridSearch.generate_assay_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GridSearch.generate_assay_list" title="Permalink to this definition"></a></dt>
<dd><p>Generates the list of datasets to build models for, with their key, bucket, split, and split uuid</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.GridSearch.generate_combo">
<span class="sig-name descname"><span class="pre">generate_combo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GridSearch.generate_combo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GridSearch.generate_combo" title="Permalink to this definition"></a></dt>
<dd><p>Method to generate all combinations from a given set of key-value pairs</p>
<dl class="simple">
<dt>Args:</dt><dd><p>params_dict: Set of key-value pairs with the key being the param name and the value being the list of values
you want to try for that param</p>
</dd>
<dt>Returns:</dt><dd><p>new_dict: The list of all combinations of parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.GridSearch.generate_param_combos">
<span class="sig-name descname"><span class="pre">generate_param_combos</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GridSearch.generate_param_combos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GridSearch.generate_param_combos" title="Permalink to this definition"></a></dt>
<dd><p>Performs additional parsing of parameters and generates all combinations</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.GridSearch.split_and_save_dataset">
<span class="sig-name descname"><span class="pre">split_and_save_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GridSearch.split_and_save_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GridSearch.split_and_save_dataset" title="Permalink to this definition"></a></dt>
<dd><p>Splits a given dataset, saves it, and sets the split_uuid in the metadata</p>
<dl class="simple">
<dt>Args:</dt><dd><p>assay_params: Dataset metadata</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperOptSearch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">HyperOptSearch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperOptSearch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperOptSearch" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Perform hyperparameter search with Bayesian Optmization (Tree Parzen Estimator)</p>
<p>To use HyperOptSearch, modify the config json file as follows:</p>
<blockquote>
<div><p>serach_type: use “hyperopt”</p>
<p>result_dir: use two directories (recommended), separated by comma, 1st one will be used to save the best model tarball, 2nd one will be used to store all models during the process.  e.g. “result_dir”: “/path/of/the/final/dir,/path/of/the/temp/dir”</p>
<p>model_type: RF or NN, also add max number of HyperOptSearch evaluations, e.g. “model_type”: “RF|100”.  If no max number provide, the default 100 will be used.  #For NN models only</p>
<dl>
<dt>lr: specify learning rate searching method and related parameters as the following scheme.</dt><dd><p>method|parameter1,parameter2…</p>
<p>method: supported searching schemes in HyperOpt include: choice, uniform, loguniform, and uniformint, see <a class="reference external" href="https://github.com/hyperopt/hyperopt/wiki/FMin">https://github.com/hyperopt/hyperopt/wiki/FMin</a> for details.</p>
<dl>
<dt>parameters:</dt><dd><p>choice: all values to search from, separated by comma, e.g. choice|0.0001,0.0005,0.0002,0.001</p>
<p>uniform: low and high bound of the interval to serach, e.g. uniform|0.00001,0.001</p>
<p>loguniform: low and high bound (in natural log) of the interval to serach, e.g. loguniform|-13.8,-6.9</p>
<p>uniformint: low and high bound of the interval to serach, e.g. uniformint|8,256</p>
</dd>
</dl>
</dd>
</dl>
<p>ls: similar as learning_rate, specify number of layers and size of each one.</p>
<blockquote>
<div><p>method|num_layers|parameter1,parameter2…
e.g. choice|2|8,16,32,64,128,256,512  #this will generate a two-layer config, each layer takes size from the list “8,16,32,64,128,256,512”
e.g. uniformint|3|8,512  #this will generate a three-layer config, each layer takes size from the uniform interval [8,512]</p>
</div></blockquote>
<p>dp: similar as layer_sizes, just make sure dropouts and layer_sizes should have the same number of layers.</p>
<blockquote>
<div><p>e.g. uniform|3|0,0.4   #this will generate a three-layer config, each layer takes size from the uniform interval [0,0.4]</p>
</div></blockquote>
<p>#For RF models only
rfe: rf_estimator, same structure as the learning rate above, e.g. uniformint|64,512  #take integer values from a uniform interval [64,512]</p>
<p>rfd: rf_max_depth, e.g. uniformint|8,256</p>
<p>rff: rf_max_feature, e.g. uniformint|8,128</p>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperOptSearch.run_search">
<span class="sig-name descname"><span class="pre">run_search</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperOptSearch.run_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperOptSearch.run_search" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">HyperparameterSearch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The class for generating and running all hyperparameter combinations based on the input params given</p>
<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.already_run">
<span class="sig-name descname"><span class="pre">already_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.already_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.already_run" title="Permalink to this definition"></a></dt>
<dd><p>Checks to see if a model with a given metadata combination has already been built</p>
<dl class="simple">
<dt>Args:</dt><dd><p>assay_params: model metadata information</p>
</dd>
<dt>Returns:</dt><dd><p>Boolean specifying if model has been previously built</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.assemble_layers">
<span class="sig-name descname"><span class="pre">assemble_layers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.assemble_layers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.assemble_layers" title="Permalink to this definition"></a></dt>
<dd><p>Reformats layer parameters</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.build_jobs">
<span class="sig-name descname"><span class="pre">build_jobs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.build_jobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.build_jobs" title="Permalink to this definition"></a></dt>
<dd><p>Builds jobs.
Reformats parameters as necessary</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.filter_jobs">
<span class="sig-name descname"><span class="pre">filter_jobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.filter_jobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.filter_jobs" title="Permalink to this definition"></a></dt>
<dd><p>Removes jobs that should not be run</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.generate_assay_list">
<span class="sig-name descname"><span class="pre">generate_assay_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.generate_assay_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.generate_assay_list" title="Permalink to this definition"></a></dt>
<dd><p>Generates the list of datasets to build models for, with their key, bucket, split, and split uuid</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.generate_combo">
<span class="sig-name descname"><span class="pre">generate_combo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.generate_combo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.generate_combo" title="Permalink to this definition"></a></dt>
<dd><p>This is implemented in the specific sub-classes</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.generate_combos">
<span class="sig-name descname"><span class="pre">generate_combos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.generate_combos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.generate_combos" title="Permalink to this definition"></a></dt>
<dd><p>Calls sub-function generate_combo and then uses itertools.product to generate all desired combinations</p>
<dl class="simple">
<dt>Args:</dt><dd><p>params_dict:</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.generate_maestro_commands">
<span class="sig-name descname"><span class="pre">generate_maestro_commands</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.generate_maestro_commands"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.generate_maestro_commands" title="Permalink to this definition"></a></dt>
<dd><p>Generates commands that can be used by maestro</p>
<p>Generates a list of commands that can be put directly into
the shell to run model training.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>None</p>
</dd>
<dt>Returns:</dt><dd><p>list: A list of shell commands</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.generate_param_combos">
<span class="sig-name descname"><span class="pre">generate_param_combos</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.generate_param_combos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.generate_param_combos" title="Permalink to this definition"></a></dt>
<dd><p>Performs additional parsing of parameters and generates all combinations</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.generate_searches">
<span class="sig-name descname"><span class="pre">generate_searches</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.generate_searches"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.generate_searches" title="Permalink to this definition"></a></dt>
<dd><p>Generate a list of training jobs</p>
<p>Generates a list of model training jobs that spans
the hyperparameter search space. This function
filters out jobs that are redundant by calling filter_jobs</p>
<dl class="simple">
<dt>Args:</dt><dd><p>None</p>
</dd>
<dt>Returns:</dt><dd><p>list(tuple): A list of tuples that contain assay parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.generate_split_shortlist">
<span class="sig-name descname"><span class="pre">generate_split_shortlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.generate_split_shortlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.generate_split_shortlist" title="Permalink to this definition"></a></dt>
<dd><p>Processes a shortlist, generates splits for each dataset on the list, and uploads a new shortlist file with the
split_uuids included. Generates splits for the split_combos [[0.1,0.1], [0.1,0.2],[0.2,0.2]], [random, scaffold]</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.generate_split_shortlist_file">
<span class="sig-name descname"><span class="pre">generate_split_shortlist_file</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.generate_split_shortlist_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.generate_split_shortlist_file" title="Permalink to this definition"></a></dt>
<dd><p>Processes a shortlist, generates splits for each dataset on the list, and uploads a new shortlist file with the
split_uuids included. Generates splits for the split_combos [[0.1,0.1], [0.15,0.15], [0.1,0.2], [0.2,0.2]], [random, scaffold]</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.get_dataset_metadata">
<span class="sig-name descname"><span class="pre">get_dataset_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.get_dataset_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.get_dataset_metadata" title="Permalink to this definition"></a></dt>
<dd><p>Gather the required metadata for a dataset</p>
<dl class="simple">
<dt>Args:</dt><dd><p>assay_params: dataset metadata</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.get_shortlist_df">
<span class="sig-name descname"><span class="pre">get_shortlist_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">split_uuids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.get_shortlist_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.get_shortlist_df" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>Args:</dt><dd><p>split_uuids: Boolean value saying if you want just datasets returned or the split_uuids as well</p>
</dd>
<dt>Returns:</dt><dd><p>The list of dataset_keys, along with their accompanying bucket, split type, and split_uuid if split_uuids is True</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.return_split_uuid">
<span class="sig-name descname"><span class="pre">return_split_uuid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">splitter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split_combo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.return_split_uuid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.return_split_uuid" title="Permalink to this definition"></a></dt>
<dd><p>Loads a dataset, splits it, saves it, and returns the split_uuid</p>
<dl>
<dt>Args:</dt><dd><p>dataset_key: key for dataset to split</p>
<p>bucket: datastore-specific user group bucket</p>
<p>splitter: Type of splitter to use to split the dataset</p>
<p>split_combo: tuple of form (split_valid_frac, split_test_frac)</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.return_split_uuid_file">
<span class="sig-name descname"><span class="pre">return_split_uuid_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_cols</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">splitter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split_combo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.return_split_uuid_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.return_split_uuid_file" title="Permalink to this definition"></a></dt>
<dd><p>Loads a dataset, splits it, saves it, and returns the split_uuid.</p>
<dl>
<dt>Args:</dt><dd><p>dataset_key: key for dataset to split</p>
<p>bucket: datastore-specific user group bucket</p>
<p>splitter: Type of splitter to use to split the dataset</p>
<p>split_combo: tuple of form (split_valid_frac, split_test_frac)</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.run_search">
<span class="sig-name descname"><span class="pre">run_search</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.run_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.run_search" title="Permalink to this definition"></a></dt>
<dd><p>The driver code for generating hyperparameter combinations and submitting jobs</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.split_and_save_dataset">
<span class="sig-name descname"><span class="pre">split_and_save_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.split_and_save_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.split_and_save_dataset" title="Permalink to this definition"></a></dt>
<dd><p>Splits a given dataset, saves it, and sets the split_uuid in the metadata</p>
<dl class="simple">
<dt>Args:</dt><dd><p>assay_params: Dataset metadata</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.HyperparameterSearch.submit_jobs">
<span class="sig-name descname"><span class="pre">submit_jobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.submit_jobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.submit_jobs" title="Permalink to this definition"></a></dt>
<dd><p>Reformats parameters as necessary and then calls run_command in a loop to submit a job for each param combo</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.RandomSearch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">RandomSearch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#RandomSearch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.RandomSearch" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#utils.hyperparam_search_wrapper.HyperparameterSearch" title="utils.hyperparam_search_wrapper.HyperparameterSearch"><code class="xref py py-class docutils literal notranslate"><span class="pre">HyperparameterSearch</span></code></a></p>
<p>Generates the specified number of random parameter values for within the specified range</p>
<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.RandomSearch.generate_assay_list">
<span class="sig-name descname"><span class="pre">generate_assay_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#RandomSearch.generate_assay_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.RandomSearch.generate_assay_list" title="Permalink to this definition"></a></dt>
<dd><p>Generates the list of datasets to build models for, with their key, bucket, split, and split uuid</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.RandomSearch.generate_combo">
<span class="sig-name descname"><span class="pre">generate_combo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#RandomSearch.generate_combo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.RandomSearch.generate_combo" title="Permalink to this definition"></a></dt>
<dd><p>Method to generate all combinations from a given set of key-value pairs</p>
<dl class="simple">
<dt>Args:</dt><dd><p>params_dict: Set of key-value pairs with the key being the param name and the value being the list of values
you want to try for that param</p>
</dd>
<dt>Returns:</dt><dd><p>new_dict: The list of all combinations of parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.RandomSearch.generate_param_combos">
<span class="sig-name descname"><span class="pre">generate_param_combos</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#RandomSearch.generate_param_combos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.RandomSearch.generate_param_combos" title="Permalink to this definition"></a></dt>
<dd><p>Performs additional parsing of parameters and generates all combinations</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.RandomSearch.split_and_save_dataset">
<span class="sig-name descname"><span class="pre">split_and_save_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#RandomSearch.split_and_save_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.RandomSearch.split_and_save_dataset" title="Permalink to this definition"></a></dt>
<dd><p>Splits a given dataset, saves it, and sets the split_uuid in the metadata</p>
<dl class="simple">
<dt>Args:</dt><dd><p>assay_params: Dataset metadata</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.UserSpecifiedSearch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">UserSpecifiedSearch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#UserSpecifiedSearch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.UserSpecifiedSearch" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#utils.hyperparam_search_wrapper.HyperparameterSearch" title="utils.hyperparam_search_wrapper.HyperparameterSearch"><code class="xref py py-class docutils literal notranslate"><span class="pre">HyperparameterSearch</span></code></a></p>
<p>Generates combinations using the user-specified steps</p>
<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.UserSpecifiedSearch.generate_assay_list">
<span class="sig-name descname"><span class="pre">generate_assay_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#UserSpecifiedSearch.generate_assay_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.UserSpecifiedSearch.generate_assay_list" title="Permalink to this definition"></a></dt>
<dd><p>Generates the list of datasets to build models for, with their key, bucket, split, and split uuid</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.UserSpecifiedSearch.generate_combo">
<span class="sig-name descname"><span class="pre">generate_combo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#UserSpecifiedSearch.generate_combo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.UserSpecifiedSearch.generate_combo" title="Permalink to this definition"></a></dt>
<dd><p>Method to generate all combinations from a given set of key-value pairs</p>
<dl class="simple">
<dt>Args:</dt><dd><p>params_dict: Set of key-value pairs with the key being the param name and the value being the list of values
you want to try for that param</p>
</dd>
<dt>Returns:</dt><dd><p>new_dict: The list of all combinations of parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.UserSpecifiedSearch.generate_param_combos">
<span class="sig-name descname"><span class="pre">generate_param_combos</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#UserSpecifiedSearch.generate_param_combos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.UserSpecifiedSearch.generate_param_combos" title="Permalink to this definition"></a></dt>
<dd><p>Performs additional parsing of parameters and generates all combinations</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.UserSpecifiedSearch.split_and_save_dataset">
<span class="sig-name descname"><span class="pre">split_and_save_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#UserSpecifiedSearch.split_and_save_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.UserSpecifiedSearch.split_and_save_dataset" title="Permalink to this definition"></a></dt>
<dd><p>Splits a given dataset, saves it, and sets the split_uuid in the metadata</p>
<dl class="simple">
<dt>Args:</dt><dd><p>assay_params: Dataset metadata</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.build_hyperopt_search_domain">
<span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">build_hyperopt_search_domain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#build_hyperopt_search_domain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.build_hyperopt_search_domain" title="Permalink to this definition"></a></dt>
<dd><p>Generate HyperOpt search domain object from method and parameters, layer_nums is only for NN models.
This function is used by the HyperOptSearch class, not intended for standalone usage.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.build_search">
<span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">build_search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#build_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.build_search" title="Permalink to this definition"></a></dt>
<dd><p>Builds HyperparamterSearch object</p>
<blockquote>
<div><p>Looks at params.search_type and builds a HyperparamSearch object
of the correct flavor. Will exit if the search_type is not
recognized.</p>
</div></blockquote>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>params (Namespace): Namespace returned by </dt><dd><p>atomsci.ddm.pipeline.parameter_parser.wrapper()</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>HyperparameterSearch</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.gen_maestro_command">
<span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">gen_maestro_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">python_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">script_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#gen_maestro_command"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.gen_maestro_command" title="Permalink to this definition"></a></dt>
<dd><p>Generates a string that can be fed into a command line.</p>
<dl>
<dt>Side Effects:</dt><dd><dl class="simple">
<dt>Dataset key will be converted to an absolute path before</dt><dd><p>returned. It’s difficult to predict the working directory
used when maestro runs the script.</p>
</dd>
</dl>
</dd>
<dt>Args:</dt><dd><p>shell_script: Name of shell script to run</p>
<p>python_path: Path to python version</p>
<p>script_dir: Directory where script lives</p>
<p>params: parameters in dictionary format</p>
</dd>
<dt>Returns:</dt><dd><p>str: Formatted command in the form of a string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.get_num_params">
<span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">get_num_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">combo</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#get_num_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.get_num_params" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the number of parameters in a fully-connected neural networ</p>
<dl class="simple">
<dt>Args:</dt><dd><p>combo: Model parameters</p>
</dd>
<dt>Returns:</dt><dd><p>tmp_sum: Calculated number of parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.main">
<span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.main" title="Permalink to this definition"></a></dt>
<dd><p>Entry point when script is run</p>
<dl class="simple">
<dt>Args:</dt><dd><p>None</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.parse_params">
<span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">parse_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#parse_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.parse_params" title="Permalink to this definition"></a></dt>
<dd><p>Parse paramters</p>
<p>Parses parameters using parameter_parser.wrapper and 
filters out unnecessary parameters. Returns what an
argparse.Namespace</p>
<dl class="simple">
<dt>Args:</dt><dd><p><a href="#id1"><span class="problematic" id="id2">*</span></a>any_arg: any single input of a str, dict, argparse.Namespace, or list</p>
</dd>
<dt>Returns:</dt><dd><p>argparse.Namespace</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.permutate_NNlayer_combo_params">
<span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">permutate_NNlayer_combo_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">layer_nums</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_nums</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dropout_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_final_layer_size</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#permutate_NNlayer_combo_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.permutate_NNlayer_combo_params" title="Permalink to this definition"></a></dt>
<dd><p>to generate combos of layer_sizes(str) and dropouts(str) params from the layer_nums (list), node_nums (list), dropout_list (list).</p>
<p>The permutation will make the NN funnel shaped, so that the next layer can only be smaller or of the same size of the current layer.</p>
<p>Example:</p>
<p>permutate_NNlayer_combo_params([2], [4,8,16], [0], 16)
returns [[16, 4], [16, 8], [8,4]] [[0,0],[0,0],[0,0]]</p>
<p>If there are duplicates of the same size, it will create consecutive layers of the same size.</p>
<p>Example:</p>
<p>permutate_NNlayer_combo_params([2], [4,8,8], [0], 16)
returns [[8, 8], [8, 4]] [[0,0],[0,0]]</p>
<dl>
<dt>Args:</dt><dd><p>layer_nums: specify numbers of layers.</p>
<p>node_nums: specify numbers of nodes per layer.</p>
<p>dropout_list: specify the dropouts.</p>
<p>max_last_layer_size: sets the max size of the last layer. It will be set to the smallest node_num if needed.</p>
</dd>
<dt>Returns:</dt><dd><p>layer_sizes, dropouts: the layer sizes and dropouts generated based on the input parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.reformat_filter_dict">
<span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">reformat_filter_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#reformat_filter_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.reformat_filter_dict" title="Permalink to this definition"></a></dt>
<dd><p>Function to reformat a filter dictionary to match the Model Tracker metadata structure. Updated 9/2020 by A. Paulson
for new LC model tracker.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>filter_dict: Dictionary containing metadata for model of interest</p>
</dd>
<dt>Returns:</dt><dd><p>new_filter_dict: Filter dict reformatted</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.run_cmd">
<span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">run_cmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#run_cmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.run_cmd" title="Permalink to this definition"></a></dt>
<dd><p>Function to submit a job using subprocess</p>
<dl class="simple">
<dt>Args:</dt><dd><p>cmd: Command to run</p>
</dd>
<dt>Returns:</dt><dd><p>output: Output of command</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.hyperparam_search_wrapper.run_command">
<span class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></span><span class="sig-name descname"><span class="pre">run_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shell_script</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">python_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">script_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#run_command"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.run_command" title="Permalink to this definition"></a></dt>
<dd><p>Function to submit jobs on a slurm system</p>
<dl>
<dt>Args:</dt><dd><p>shell_script: Name of shell script to run</p>
<p>python_path: Path to python version</p>
<p>script_dir: Directory where script lives</p>
<p>params: parameters in dictionary format</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-utils.llnl_utils">
<span id="utils-llnl-utils-module"></span><h2>utils.llnl_utils module<a class="headerlink" href="#module-utils.llnl_utils" title="Permalink to this heading"></a></h2>
<p>Utility functions for running and managing jobs on LC machines.</p>
<dl class="py function">
<dt class="sig sig-object py" id="utils.llnl_utils.get_command_output">
<span class="sig-prename descclassname"><span class="pre">utils.llnl_utils.</span></span><span class="sig-name descname"><span class="pre">get_command_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/llnl_utils.html#get_command_output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.llnl_utils.get_command_output" title="Permalink to this definition"></a></dt>
<dd><p>Runs the given shell command in a subprocess and returns its output as a string.
Used by throttle_jobs function.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>cmd: Command to run</p>
</dd>
<dt>Returns:</dt><dd><p>output: Output of command</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.llnl_utils.get_my_username">
<span class="sig-prename descclassname"><span class="pre">utils.llnl_utils.</span></span><span class="sig-name descname"><span class="pre">get_my_username</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/llnl_utils.html#get_my_username"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.llnl_utils.get_my_username" title="Permalink to this definition"></a></dt>
<dd><p>Returns the username of the effective userid of the current process.
Used by throttle_jobs function.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>none</p>
</dd>
<dt>Returns:</dt><dd><p>username (str): The current effective username</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.llnl_utils.is_lc_system">
<span class="sig-prename descclassname"><span class="pre">utils.llnl_utils.</span></span><span class="sig-name descname"><span class="pre">is_lc_system</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/llnl_utils.html#is_lc_system"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.llnl_utils.is_lc_system" title="Permalink to this definition"></a></dt>
<dd><p>Use heuristic to determine if we’re running on an LC system.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>none</p>
</dd>
<dt>Returns:</dt><dd><p>result: True if it appears we’re running on an LC machine.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.llnl_utils.throttle_jobs">
<span class="sig-prename descclassname"><span class="pre">utils.llnl_utils.</span></span><span class="sig-name descname"><span class="pre">throttle_jobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_jobs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">my_username</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/llnl_utils.html#throttle_jobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.llnl_utils.throttle_jobs" title="Permalink to this definition"></a></dt>
<dd><p>Checks the number of SLURM jobs currently queued or running under the current userid.
Returns immediately if this number is less than max_jobs; otherwise, loops indefinitely,
checking the job count every retry_time seconds. Returns when the job count drops below 
max_jobs. Call this function before queueing a batch job in order to implement a self-
throttling mechanism.</p>
<dl>
<dt>Args:</dt><dd><p>max_jobs (int): Number of jobs we are allowing ourselves to have queued or running.</p>
<p>retry_time (int): Number of seconds to wait between job count checks.</p>
<p>my_username (str): Effective username of the caller; defaults to output of ‘whoami’
command.</p>
</dd>
<dt>Returns:</dt><dd><p>none</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-utils.many_to_one">
<span id="utils-many-to-one-module"></span><h2>utils.many_to_one module<a class="headerlink" href="#module-utils.many_to_one" title="Permalink to this heading"></a></h2>
<dl class="py exception">
<dt class="sig sig-object py" id="utils.many_to_one.ManyToOneException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">utils.many_to_one.</span></span><span class="sig-name descname"><span class="pre">ManyToOneException</span></span><a class="reference internal" href="_modules/utils/many_to_one.html#ManyToOneException"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.many_to_one.ManyToOneException" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="utils.many_to_one.NANCompoundIDException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">utils.many_to_one.</span></span><span class="sig-name descname"><span class="pre">NANCompoundIDException</span></span><a class="reference internal" href="_modules/utils/many_to_one.html#NANCompoundIDException"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.many_to_one.NANCompoundIDException" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="utils.many_to_one.NANSMILESException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">utils.many_to_one.</span></span><span class="sig-name descname"><span class="pre">NANSMILESException</span></span><a class="reference internal" href="_modules/utils/many_to_one.html#NANSMILESException"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.many_to_one.NANSMILESException" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.many_to_one.has_nans">
<span class="sig-prename descclassname"><span class="pre">utils.many_to_one.</span></span><span class="sig-name descname"><span class="pre">has_nans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/many_to_one.html#has_nans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.many_to_one.has_nans" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.many_to_one.many_to_one">
<span class="sig-prename descclassname"><span class="pre">utils.many_to_one.</span></span><span class="sig-name descname"><span class="pre">many_to_one</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_col</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/many_to_one.html#many_to_one"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.many_to_one.many_to_one" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.many_to_one.many_to_one_df">
<span class="sig-prename descclassname"><span class="pre">utils.many_to_one.</span></span><span class="sig-name descname"><span class="pre">many_to_one_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_col</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/many_to_one.html#many_to_one_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.many_to_one.many_to_one_df" title="Permalink to this definition"></a></dt>
<dd><p>AMPL requires that SMILES and compound_ids have a many to one mapping. 
This function opens the dataset and checks this restraint. It will also
check if any SMILES or compound_ids are empty/nan</p>
<dl class="simple">
<dt>Arguments:</dt><dd><p>df (pd.DataFrame): The DataFrame in question.
smiles_col (str): The column containing SMILES.
id_col (str): The column containing compound ids</p>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>True if there is a many to one mapping. Raises one of 3 errors if it:</dt><dd><ul class="simple">
<li><p>Has nan compound_ids</p></li>
<li><p>Has nan SMILES</p></li>
<li><p>Is not a many to one mapping between compound_ids and SMILES</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.many_to_one.no_nan_ids_or_smiles">
<span class="sig-prename descclassname"><span class="pre">utils.many_to_one.</span></span><span class="sig-name descname"><span class="pre">no_nan_ids_or_smiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_col</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/many_to_one.html#no_nan_ids_or_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.many_to_one.no_nan_ids_or_smiles" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-utils.model_retrain">
<span id="utils-model-retrain-module"></span><h2>utils.model_retrain module<a class="headerlink" href="#module-utils.model_retrain" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="utils.model_retrain.main">
<span class="sig-prename descclassname"><span class="pre">utils.model_retrain.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argv</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_retrain.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_retrain.main" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.model_retrain.train_model">
<span class="sig-prename descclassname"><span class="pre">utils.model_retrain.</span></span><span class="sig-name descname"><span class="pre">train_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dskey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_retrain.html#train_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_retrain.train_model" title="Permalink to this definition"></a></dt>
<dd><p>Retrain a model saved in a model_metadata.json file</p>
<dl>
<dt>Args:</dt><dd><p>input (str): path to model_metadata.json file</p>
<p>output (str): path to output directory</p>
<p>dskey (str): new dataset key if file location has changed</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.model_retrain.train_model_from_tar">
<span class="sig-prename descclassname"><span class="pre">utils.model_retrain.</span></span><span class="sig-name descname"><span class="pre">train_model_from_tar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dskey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_retrain.html#train_model_from_tar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_retrain.train_model_from_tar" title="Permalink to this definition"></a></dt>
<dd><p>Retrain a model saved in a tar.gz file</p>
<dl>
<dt>Args:</dt><dd><p>input (str): path to a tar.gz file</p>
<p>output (str): path to output directory</p>
<p>dskey (str): new dataset key if file location has changed</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.model_retrain.train_model_from_tracker">
<span class="sig-prename descclassname"><span class="pre">utils.model_retrain.</span></span><span class="sig-name descname"><span class="pre">train_model_from_tracker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_uuid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_retrain.html#train_model_from_tracker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_retrain.train_model_from_tracker" title="Permalink to this definition"></a></dt>
<dd><p>Retrain a model saved in the model tracker, but save it to output_dir and don’t insert it into the model tracker</p>
<dl>
<dt>Args:</dt><dd><p>model_uuid (str): model tracker model_uuid file</p>
<p>output_dir (str): path to output directory</p>
</dd>
<dt>Returns:</dt><dd><p>the model pipeline object with trained model</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.model_retrain.train_models_from_dataset_keys">
<span class="sig-prename descclassname"><span class="pre">utils.model_retrain.</span></span><span class="sig-name descname"><span class="pre">train_models_from_dataset_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'regression'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_retrain.html#train_models_from_dataset_keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_retrain.train_models_from_dataset_keys" title="Permalink to this definition"></a></dt>
<dd><p>Retrain a list of models from an input file</p>
<dl>
<dt>Args:</dt><dd><p>input (str): path to an Excel or csv file. the required columns are ‘dataset_key’ and ‘bucket’ (public, private_file or Filesystem).</p>
<p>output (str): path to output directory</p>
<p>pred_type (str, optional): set the model prediction type. if not, uses the default ‘regression’</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-utils.model_version_utils">
<span id="utils-model-version-utils-module"></span><h2>utils.model_version_utils module<a class="headerlink" href="#module-utils.model_version_utils" title="Permalink to this heading"></a></h2>
<p>model_version_utils.py</p>
<p>Misc utilities to get the AMPL version(s) used to train one or more models and check them
for compatibility with the currently running version of AMPL.:</p>
<p>To check the model version</p>
<blockquote>
<div><p>usage: model_version_utils.py [-h] -i INPUT</p>
<dl>
<dt>optional arguments:</dt><dd><blockquote>
<div><dl class="option-list">
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>show this help message and exit</p>
</dd>
</dl>
</div></blockquote>
<dl class="option-list">
<dt><kbd><span class="option">-i <var>INPUT</var></span>, <span class="option">--input <var>INPUT</var></span></kbd></dt>
<dd><p>input directory/file (required)</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="utils.model_version_utils.check_version_compatible">
<span class="sig-prename descclassname"><span class="pre">utils.model_version_utils.</span></span><span class="sig-name descname"><span class="pre">check_version_compatible</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_version_utils.html#check_version_compatible"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_version_utils.check_version_compatible" title="Permalink to this definition"></a></dt>
<dd><p>Compare the input file’s version against the running AMPL version to see if
they are compatible</p>
<dl class="simple">
<dt>Args:</dt><dd><p>filename (str): file or version number</p>
</dd>
<dt>Returns:</dt><dd><p>True if the input model version matches the compatible AMPL version group</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.model_version_utils.get_ampl_version">
<span class="sig-prename descclassname"><span class="pre">utils.model_version_utils.</span></span><span class="sig-name descname"><span class="pre">get_ampl_version</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_version_utils.html#get_ampl_version"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_version_utils.get_ampl_version" title="Permalink to this definition"></a></dt>
<dd><p>Get the running ampl version</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>the AMPL version</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.model_version_utils.get_ampl_version_from_dir">
<span class="sig-prename descclassname"><span class="pre">utils.model_version_utils.</span></span><span class="sig-name descname"><span class="pre">get_ampl_version_from_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_version_utils.html#get_ampl_version_from_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_version_utils.get_ampl_version_from_dir" title="Permalink to this definition"></a></dt>
<dd><p>Get the AMPL versions for all the models stored under the given directory and its subdirectories,
recursively.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>dirname (str): directory</p>
</dd>
<dt>Returns:</dt><dd><p>list of AMPL versions</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.model_version_utils.get_ampl_version_from_json">
<span class="sig-prename descclassname"><span class="pre">utils.model_version_utils.</span></span><span class="sig-name descname"><span class="pre">get_ampl_version_from_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_version_utils.html#get_ampl_version_from_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_version_utils.get_ampl_version_from_json" title="Permalink to this definition"></a></dt>
<dd><p>Parse model_metadata.json to get the AMPL version</p>
<dl class="simple">
<dt>Args:</dt><dd><p>filename (str): tar file</p>
</dd>
<dt>Returns:</dt><dd><p>the AMPL version number</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.model_version_utils.get_ampl_version_from_model">
<span class="sig-prename descclassname"><span class="pre">utils.model_version_utils.</span></span><span class="sig-name descname"><span class="pre">get_ampl_version_from_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_version_utils.html#get_ampl_version_from_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_version_utils.get_ampl_version_from_model" title="Permalink to this definition"></a></dt>
<dd><p>Get the AMPL version from the tar file’s model_metadata.json</p>
<dl class="simple">
<dt>Args:</dt><dd><p>filename (str): tar file</p>
</dd>
<dt>Returns:</dt><dd><p>the AMPL version number</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.model_version_utils.get_major_version">
<span class="sig-prename descclassname"><span class="pre">utils.model_version_utils.</span></span><span class="sig-name descname"><span class="pre">get_major_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">full_version</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_version_utils.html#get_major_version"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_version_utils.get_major_version" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.model_version_utils.main">
<span class="sig-prename descclassname"><span class="pre">utils.model_version_utils.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argv</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_version_utils.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_version_utils.main" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.model_version_utils.validate_version">
<span class="sig-prename descclassname"><span class="pre">utils.model_version_utils.</span></span><span class="sig-name descname"><span class="pre">validate_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_version_utils.html#validate_version"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_version_utils.validate_version" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="utils-open-docs-module">
<h2>utils.open-docs module<a class="headerlink" href="#utils-open-docs-module" title="Permalink to this heading"></a></h2>
</section>
<section id="module-utils.process_slurm">
<span id="utils-process-slurm-module"></span><h2>utils.process_slurm module<a class="headerlink" href="#module-utils.process_slurm" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="utils.process_slurm.get_timings">
<span class="sig-prename descclassname"><span class="pre">utils.process_slurm.</span></span><span class="sig-name descname"><span class="pre">get_timings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_dirs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/process_slurm.html#get_timings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.process_slurm.get_timings" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.process_slurm.main">
<span class="sig-prename descclassname"><span class="pre">utils.process_slurm.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/process_slurm.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.process_slurm.main" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.process_slurm.move_failed_slurm">
<span class="sig-prename descclassname"><span class="pre">utils.process_slurm.</span></span><span class="sig-name descname"><span class="pre">move_failed_slurm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_dirs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/process_slurm.html#move_failed_slurm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.process_slurm.move_failed_slurm" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.process_slurm.rerun_failed">
<span class="sig-prename descclassname"><span class="pre">utils.process_slurm.</span></span><span class="sig-name descname"><span class="pre">rerun_failed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">script_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">python_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dirs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/process_slurm.html#rerun_failed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.process_slurm.rerun_failed" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.process_slurm.run_cmd">
<span class="sig-prename descclassname"><span class="pre">utils.process_slurm.</span></span><span class="sig-name descname"><span class="pre">run_cmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/process_slurm.html#run_cmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.process_slurm.run_cmd" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.process_slurm.run_command">
<span class="sig-prename descclassname"><span class="pre">utils.process_slurm.</span></span><span class="sig-name descname"><span class="pre">run_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shell_script</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">python_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">script_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params_str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/process_slurm.html#run_command"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.process_slurm.run_command" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-utils.pubchem_utils">
<span id="utils-pubchem-utils-module"></span><h2>utils.pubchem_utils module<a class="headerlink" href="#module-utils.pubchem_utils" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="utils.pubchem_utils.download_SID_from_bioactivity_assay">
<span class="sig-prename descclassname"><span class="pre">utils.pubchem_utils.</span></span><span class="sig-name descname"><span class="pre">download_SID_from_bioactivity_assay</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bioassayid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/pubchem_utils.html#download_SID_from_bioactivity_assay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.pubchem_utils.download_SID_from_bioactivity_assay" title="Permalink to this definition"></a></dt>
<dd><p>Retrieve summary info on bioactivity assays.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>a single bioactivity id: PubChem AIDs (bioactivity assay ids)</p>
</dd>
<dt>Returns:</dt><dd><p>Returns the sids tested on this assay</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.pubchem_utils.download_activitytype">
<span class="sig-prename descclassname"><span class="pre">utils.pubchem_utils.</span></span><span class="sig-name descname"><span class="pre">download_activitytype</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/pubchem_utils.html#download_activitytype"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.pubchem_utils.download_activitytype" title="Permalink to this definition"></a></dt>
<dd><p>Retrieve data for assays for a select list of sids.</p>
<dl>
<dt>Args:</dt><dd><p>myList (list): a bioactivity id (aid)</p>
<p>sidlst (list): list of sids specified as integers</p>
</dd>
<dt>Returns:</dt><dd><p>Nothing returned yet, will return basic stats to help decide whether to use assay or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.pubchem_utils.download_bioactivity_assay">
<span class="sig-prename descclassname"><span class="pre">utils.pubchem_utils.</span></span><span class="sig-name descname"><span class="pre">download_bioactivity_assay</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">myList</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/pubchem_utils.html#download_bioactivity_assay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.pubchem_utils.download_bioactivity_assay" title="Permalink to this definition"></a></dt>
<dd><p>Retrieve summary info on bioactivity assays.</p>
<dl>
<dt>Args:</dt><dd><p>myList (list): List of PubChem AIDs (bioactivity assay ids)</p>
<p>intv (1): number of INCHIKEYS to submit queries for in one request, default is 1</p>
</dd>
<dt>Returns:</dt><dd><p>Nothing returned yet, will return basic stats to help decide whether to use assay or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.pubchem_utils.download_dose_response_from_bioactivity">
<span class="sig-prename descclassname"><span class="pre">utils.pubchem_utils.</span></span><span class="sig-name descname"><span class="pre">download_dose_response_from_bioactivity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sidlst</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/pubchem_utils.html#download_dose_response_from_bioactivity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.pubchem_utils.download_dose_response_from_bioactivity" title="Permalink to this definition"></a></dt>
<dd><p>Retrieve data for assays for a select list of sids.</p>
<dl>
<dt>Args:</dt><dd><p>myList (list): a bioactivity id (aid)</p>
<p>sidlst (list): list of sids specified as integers</p>
</dd>
<dt>Returns:</dt><dd><p>Nothing returned yet, will return basic stats to help decide whether to use assay or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.pubchem_utils.download_smiles">
<span class="sig-prename descclassname"><span class="pre">utils.pubchem_utils.</span></span><span class="sig-name descname"><span class="pre">download_smiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">myList</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/pubchem_utils.html#download_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.pubchem_utils.download_smiles" title="Permalink to this definition"></a></dt>
<dd><p>Retrieve canonical SMILES strings for a list of input INCHIKEYS.
Will return only one SMILES string per INCHIKEY.  If there are multiple values returned, the first is retained and the others are returned in a the discard_lst.  INCHIKEYS that fail to return a SMILES string are put in the fail_lst</p>
<dl>
<dt>Args:</dt><dd><p>myList (list): List of INCHIKEYS</p>
<p>intv (1): number of INCHIKEYS to submit queries for in one request, default is 1</p>
</dd>
<dt>Returns:</dt><dd><p>list of SMILES strings corresponding to INCHIKEYS</p>
<p>list of INCHIKEYS, which failed to return a SMILES string</p>
<p>list of CIDs and SMILES, which were returned beyond the first CID and SMILE found for input INCHIKEY</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-utils.rdkit_easy">
<span id="utils-rdkit-easy-module"></span><h2>utils.rdkit_easy module<a class="headerlink" href="#module-utils.rdkit_easy" title="Permalink to this heading"></a></h2>
<p>Utilities for clustering and visualizing compound structures using RDKit.</p>
<dl class="py function">
<dt class="sig sig-object py" id="utils.rdkit_easy.add_mol_column">
<span class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></span><span class="sig-name descname"><span class="pre">add_mol_column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">molecule_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mol'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#add_mol_column"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.add_mol_column" title="Permalink to this definition"></a></dt>
<dd><p>Converts SMILES strings in a data frame to RDKit Mol objects and adds them as a new column in the data frame.</p>
<dl>
<dt>Args:</dt><dd><p>df (pd.DataFrame): Data frame to add column to.</p>
<p>smiles_col (str): Column containing SMILES strings.</p>
<p>molecule_col (str): Name of column to create to hold Mol objects.</p>
</dd>
<dt>Returns:</dt><dd><p>pd.DataFrame: Modified data frame.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.rdkit_easy.calculate_descriptors">
<span class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></span><span class="sig-name descname"><span class="pre">calculate_descriptors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">molecule_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mol'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#calculate_descriptors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.calculate_descriptors" title="Permalink to this definition"></a></dt>
<dd><p>Uses RDKit to compute various descriptors for compounds specified by Mol objects in the given data frame.</p>
<dl>
<dt>Args:</dt><dd><p>df (pd.DataFrame): Data frame containing molecules.</p>
<p>molecule_column (str): Name of column containing Mol objects for compounds.</p>
</dd>
<dt>Returns:</dt><dd><p>pd.DataFrame: Modified data frame with added columns for the descriptors.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.rdkit_easy.cluster_dataframe">
<span class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></span><span class="sig-name descname"><span class="pre">cluster_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">molecule_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mol'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cluster'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#cluster_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.cluster_dataframe" title="Permalink to this definition"></a></dt>
<dd><p>Performs Butina clustering on compounds specified by Mol objects in a data frame.</p>
<p>Modifies the input dataframe to add a column ‘cluster_column’ containing the cluster
index for each molecule.</p>
<p>From RDKit cookbook <a class="reference external" href="http://rdkit.org/docs_temp/Cookbook.html">http://rdkit.org/docs_temp/Cookbook.html</a>.</p>
<dl>
<dt>Args:</dt><dd><p>df (pd.DataFrame): Data frame containing compounds to cluster.</p>
<p>molecule_column (str): Name of column containing rdkit Mol objects for compounds.</p>
<p>cluster_column (str): Column that will be created to hold cluster indices.</p>
<p>cutoff (float): Maximum Tanimoto distance parameter used by Butina algorithm to identify neighbors of each molecule.</p>
</dd>
<dt>Returns:</dt><dd><p>None. Input data frame will be modified in place.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.rdkit_easy.cluster_fingerprints">
<span class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></span><span class="sig-name descname"><span class="pre">cluster_fingerprints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#cluster_fingerprints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.cluster_fingerprints" title="Permalink to this definition"></a></dt>
<dd><p>Performs Butina clustering on compounds specified by a list of fingerprint bit vectors.</p>
<p>From RDKit cookbook <a class="reference external" href="http://rdkit.org/docs_temp/Cookbook.html">http://rdkit.org/docs_temp/Cookbook.html</a>.</p>
<dl>
<dt>Args:</dt><dd><p>fps (list of rdkit.ExplicitBitVect): List of fingerprint bit vectors.</p>
<p>cutoff (float): Cutoff distance parameter used to seed clusters in Butina algorithm.</p>
</dd>
<dt>Returns:</dt><dd><p>tuple of tuple: Indices of fingerprints assigned to each cluster.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.rdkit_easy.matching_atoms_and_bonds">
<span class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></span><span class="sig-name descname"><span class="pre">matching_atoms_and_bonds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match_mol</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#matching_atoms_and_bonds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.matching_atoms_and_bonds" title="Permalink to this definition"></a></dt>
<dd><p>Returns lists of indices of atoms and bonds within molecule <cite>mol</cite> that are part of the substructure
matched by <cite>match_mol</cite>.</p>
<dl>
<dt>Args:</dt><dd><p>mol (rdkit.Chem.Mol): Object representing molecule.</p>
<p>match_mol (rdkit.Chem.Mol): Object representing a substructure or SMARTS pattern to be
compared against <cite>mol</cite>, typically created by <cite>Chem.MolFromSmiles()</cite> or <cite>Chem.MolFromSmarts()</cite>.</p>
</dd>
<dt>Returns:</dt><dd><p>match_atoms, match_bonds (tuple(list(int), list(int))): Lists of indices of atoms and bonds
within <cite>mol</cite> contained in the substructure (if any) matched by <cite>match_mol</cite>. Returns empty lists
if there is no match.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.rdkit_easy.mol_to_html">
<span class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></span><span class="sig-name descname"><span class="pre">mol_to_html</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">highlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'svg'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rdkit_svg'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">400</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#mol_to_html"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.mol_to_html" title="Permalink to this definition"></a></dt>
<dd><p>Creates an image displaying the given molecule’s 2D structure, and generates an HTML
tag for it. The image can be embedded directly into the HTML tag or saved to a file.</p>
<dl>
<dt>Args:</dt><dd><p>mol (rdkit.Chem.Mol): Object representing molecule.</p>
<p>highlight (rdkit.Chem.Mol): Optional object representing a set of atoms and bonds to be highlighted in
the image.</p>
<p>name (str): Filename of image file to create, relative to ‘directory’; only used if embed=False.</p>
<p>type (str): Image format; must be ‘png’ or ‘svg’.</p>
<p>directory (str): Path relative to notebook directory of subdirectory where image file will be written. 
The directory will be created if necessary. Note that absolute paths will not work in notebooks. Ignored if embed=True.</p>
<p>embed (bool): If True, image data will be embedded in the generated HTML tag. Otherwise it will be written to a
file determined by the <cite>directory</cite> and <cite>name</cite> arguments.</p>
<p>width (int): Width of image bounding box.</p>
<p>height (int): Height of image bounding box.</p>
</dd>
<dt>Returns:</dt><dd><p>str: HTML image tag referencing the image file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.rdkit_easy.mol_to_pil">
<span class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></span><span class="sig-name descname"><span class="pre">mol_to_pil</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(400,</span> <span class="pre">200)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">highlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#mol_to_pil"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.mol_to_pil" title="Permalink to this definition"></a></dt>
<dd><p>Returns a Python Image Library (PIL) object containing an image of the given molecule’s structure.</p>
<dl>
<dt>Args:</dt><dd><p>mol (rdkit.Chem.Mol): Object representing molecule.</p>
<p>size (tuple): Width and height of bounding box of image.</p>
<p>highlight (rdkit.Chem.Mol): Object representing substructure to highlight on molecule.</p>
</dd>
<dt>Returns:</dt><dd><p>PIL.PngImageFile: An object containing an image of the molecule’s structure.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.rdkit_easy.mol_to_svg">
<span class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></span><span class="sig-name descname"><span class="pre">mol_to_svg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(400,</span> <span class="pre">200)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">highlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#mol_to_svg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.mol_to_svg" title="Permalink to this definition"></a></dt>
<dd><p>Returns a RDKit MolDraw2DSVG object containing an image of the given molecule’s structure.</p>
<dl>
<dt>Args:</dt><dd><p>mol (rdkit.Chem.Mol): Object representing molecule.</p>
<p>size (tuple): Width and height of bounding box of image.</p>
<p>highlight (rdkit.Chem.Mol): Object representing substructure to highlight on molecule.</p>
</dd>
<dt>Returns:</dt><dd><p>RDKit.rdMolDraw2D.MolDraw2DSVG text (str): An SVG object containing an image of the molecule’s structure.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.rdkit_easy.save_png">
<span class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></span><span class="sig-name descname"><span class="pre">save_png</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(400,</span> <span class="pre">200)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">highlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#save_png"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.save_png" title="Permalink to this definition"></a></dt>
<dd><p>Draws the molecule mol into a PNG file with filename ‘name’ and with the given size
in pixels.</p>
<dl>
<dt>Args:</dt><dd><p>mol (rdkit.Chem.Mol): Object representing molecule.</p>
<p>name (str): Path to write PNG file to.</p>
<p>size (tuple): Width and height of bounding box of image.</p>
<p>highlight (rdkit.Chem.Mol): Object representing substructure to highlight on molecule.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.rdkit_easy.save_svg">
<span class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></span><span class="sig-name descname"><span class="pre">save_svg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(400,</span> <span class="pre">200)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">highlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#save_svg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.save_svg" title="Permalink to this definition"></a></dt>
<dd><p>Draws the molecule mol into an SVG file with filename ‘name’ and with the given size
in pixels.</p>
<dl>
<dt>Args:</dt><dd><p>mol (rdkit.Chem.Mol): Object representing molecule.</p>
<p>name (str): Path to write SVG file to.</p>
<p>size (tuple): Width and height of bounding box of image.</p>
<p>highlight (rdkit.Chem.Mol): Object representing substructure to highlight on molecule.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.rdkit_easy.setup_notebook">
<span class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></span><span class="sig-name descname"><span class="pre">setup_notebook</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#setup_notebook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.setup_notebook" title="Permalink to this definition"></a></dt>
<dd><p>Set up current notebook for displaying plots and Bokeh output using full width of window</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.rdkit_easy.show_df">
<span class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></span><span class="sig-name descname"><span class="pre">show_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#show_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.show_df" title="Permalink to this definition"></a></dt>
<dd><p>Convenience function to display a pandas DataFrame in the current notebook window
with HTML images rendered in table cells.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>df (pd.DataFrame): Data frame to display.</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.rdkit_easy.show_html">
<span class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></span><span class="sig-name descname"><span class="pre">show_html</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">html</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#show_html"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.show_html" title="Permalink to this definition"></a></dt>
<dd><p>Convenience function to display an HTML image specified by image tag ‘html’.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>html (str): HTML image tag to render.</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-utils.struct_utils">
<span id="utils-struct-utils-module"></span><h2>utils.struct_utils module<a class="headerlink" href="#module-utils.struct_utils" title="Permalink to this heading"></a></h2>
<p>Functions to manipulate and convert between various representations of chemical structures: SMILES, InChi and RDKit Mol objects.
Many of these functions (those with a ‘workers’ argument) accept either a single SMILES or InChi string or a list of strings
as their first argument, and return a value with the same datatype. If a list is passed and the ‘workers’ argument is &gt; 1,
the calculation is parallelized across multiple threads; this can save significant time when operating on thousands of
molecules.</p>
<dl class="py function">
<dt class="sig sig-object py" id="utils.struct_utils.base_mol_from_inchi">
<span class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></span><span class="sig-name descname"><span class="pre">base_mol_from_inchi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inchi_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useIsomericSmiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">removeCharges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#base_mol_from_inchi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.base_mol_from_inchi" title="Permalink to this definition"></a></dt>
<dd><p>Generate a standardized RDKit Mol object for the largest fragment of the molecule specified by
InChi string inchi_str. Replace any rare isotopes with the most common ones for each element.
If removeCharges is True, add hydrogens as needed to eliminate charges.</p>
<dl>
<dt>Args:</dt><dd><p>inchi_str (str): InChi string representing molecule.</p>
<p>useIsomericSmiles (bool): Whether to retain stereochemistry information in the generated string.</p>
<p>removeCharges (bool): If true, add or remove hydrogens to produce uncharged molecules.</p>
</dd>
<dt>Returns:</dt><dd><p>str: Standardized salt-stripped SMILES string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.struct_utils.base_mol_from_smiles">
<span class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></span><span class="sig-name descname"><span class="pre">base_mol_from_smiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_smiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useIsomericSmiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">removeCharges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#base_mol_from_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.base_mol_from_smiles" title="Permalink to this definition"></a></dt>
<dd><p>Generate a standardized RDKit Mol object for the largest fragment of the molecule specified by
orig_smiles. Replace any rare isotopes with the most common ones for each element.
If removeCharges is True, add hydrogens as needed to eliminate charges.</p>
<dl>
<dt>Args:</dt><dd><p>orig_smiles (str): SMILES string to standardize.</p>
<p>useIsomericSmiles (bool): Whether to retain stereochemistry information in the generated string.</p>
<p>removeCharges (bool): If true, add or remove hydrogens to produce uncharged molecules.</p>
</dd>
<dt>Returns:</dt><dd><p>str: Standardized salt-stripped SMILES string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.struct_utils.base_smiles_from_inchi">
<span class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></span><span class="sig-name descname"><span class="pre">base_smiles_from_inchi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inchi_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useIsomericSmiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">removeCharges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#base_smiles_from_inchi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.base_smiles_from_inchi" title="Permalink to this definition"></a></dt>
<dd><p>Generate standardized salt-stripped SMILES strings for the largest fragments of each molecule represented by
InChi string(s) inchi_str. Replaces any rare isotopes with the most common ones for each element.</p>
<dl>
<dt>Args:</dt><dd><p>inchi_str (list or str): List of InChi strings to convert.</p>
<p>useIsomericSmiles (bool): Whether to retain stereochemistry information in the generated strings.</p>
<p>removeCharges (bool): If true, add or remove hydrogens to produce uncharged molecules.</p>
<p>workers (int): Number of parallel threads to use for calculation.</p>
</dd>
<dt>Returns:</dt><dd><p>list or str: Standardized SMILES strings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.struct_utils.base_smiles_from_smiles">
<span class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></span><span class="sig-name descname"><span class="pre">base_smiles_from_smiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_smiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useIsomericSmiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">removeCharges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#base_smiles_from_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.base_smiles_from_smiles" title="Permalink to this definition"></a></dt>
<dd><p>Generate standardized SMILES strings for the largest fragments of each molecule specified by
orig_smiles. Strips salt groups and replaces any rare isotopes with the most common ones for each element.</p>
<dl>
<dt>Args:</dt><dd><p>orig_smiles (list or str): List of SMILES strings to canonicalize.</p>
<p>useIsomericSmiles (bool): Whether to retain stereochemistry information in the generated strings.</p>
<p>removeCharges (bool): If true, add or remove hydrogens to produce uncharged molecules.</p>
<p>workers (int): Number of parallel threads to use for calculation.</p>
</dd>
<dt>Returns:</dt><dd><p>list or str: Canonicalized SMILES strings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.struct_utils.draw_structure">
<span class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></span><span class="sig-name descname"><span class="pre">draw_structure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">smiles_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#draw_structure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.draw_structure" title="Permalink to this definition"></a></dt>
<dd><p>Draw structure for the compound with the given SMILES string as a PNG file.</p>
<p>Note that there are more flexible functions for drawing structures in the rdkit_easy module.
This function is only retained for backward compatibility.</p>
<dl>
<dt>Args:</dt><dd><p>smiles_str (str): SMILES representation of compound.</p>
<p>image_path (str): Filepath for image file to be generated.</p>
<p>image_size (int): Width of square bounding box for image.</p>
</dd>
<dt>Returns:</dt><dd><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.struct_utils.fix_moe_smiles">
<span class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></span><span class="sig-name descname"><span class="pre">fix_moe_smiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">smiles</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#fix_moe_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.fix_moe_smiles" title="Permalink to this definition"></a></dt>
<dd><p>Correct the SMILES strings generated by MOE to standardize the representation of protonated atoms,
so that RDKit can read them.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>smiles (str): SMILES string.</p>
</dd>
<dt>Returns:</dt><dd><p>str: The corrected SMILES string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.struct_utils.get_rdkit_smiles">
<span class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></span><span class="sig-name descname"><span class="pre">get_rdkit_smiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_smiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useIsomericSmiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#get_rdkit_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.get_rdkit_smiles" title="Permalink to this definition"></a></dt>
<dd><p>Given a SMILES string, regenerate a “canonical” SMILES string for the same molecule
using the implementation in RDKit.</p>
<dl>
<dt>Args:</dt><dd><p>orig_smiles (str): SMILES string to canonicalize.</p>
<p>useIsomericSmiles (bool): Whether to retain stereochemistry information in the generated string.</p>
</dd>
<dt>Returns:</dt><dd><p>str: Canonicalized SMILES string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.struct_utils.kekulize_smiles">
<span class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></span><span class="sig-name descname"><span class="pre">kekulize_smiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_smiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useIsomericSmiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#kekulize_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.kekulize_smiles" title="Permalink to this definition"></a></dt>
<dd><p>Generate Kekulized SMILES strings for the molecules specified by orig_smiles. Kekulized SMILES strings
are ones in which aromatic rings are represented by uppercase letters with alternating single and
double bonds, rather than lowercase letters; they are needed by some external applications.</p>
<dl>
<dt>Args:</dt><dd><p>orig_smiles (list or str): List of SMILES strings to Kekulize.</p>
<p>useIsomericSmiles (bool): Whether to retain stereochemistry information in the generated strings.</p>
<p>workers (int): Number of parallel threads to use for calculation.</p>
</dd>
<dt>Returns:</dt><dd><p>list or str: Kekulized SMILES strings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.struct_utils.mol_wt_from_smiles">
<span class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></span><span class="sig-name descname"><span class="pre">mol_wt_from_smiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">smiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#mol_wt_from_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.mol_wt_from_smiles" title="Permalink to this definition"></a></dt>
<dd><p>Calculate molecular weights for molecules represented by SMILES strings.</p>
<dl>
<dt>Args:</dt><dd><p>smiles (list or str): List of SMILES strings.</p>
<p>workers (int): Number of parallel threads to use for calculations.</p>
</dd>
<dt>Returns:</dt><dd><p>list or float: Molecular weights. NaN is returned for SMILES strings that could not be read by RDKit.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.struct_utils.mols_from_smiles">
<span class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></span><span class="sig-name descname"><span class="pre">mols_from_smiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_smiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#mols_from_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.mols_from_smiles" title="Permalink to this definition"></a></dt>
<dd><p>Parallel function to create RDKit Mol objects for a list of SMILES strings. If orig_smiles is a list
and workers is &gt; 1, spawn ‘workers’ threads to convert input SMILES strings to Mol objects.</p>
<dl>
<dt>Args:</dt><dd><p>orig_smiles (list or str): List of SMILES strings to convert to Mol objects.</p>
<p>workers (int): Number of parallel threads to use for calculation.</p>
</dd>
<dt>Returns:</dt><dd><p>list of rdkit.Chem.Mol: RDKit objects representing molecules.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.struct_utils.rdkit_smiles_from_smiles">
<span class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></span><span class="sig-name descname"><span class="pre">rdkit_smiles_from_smiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_smiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useIsomericSmiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#rdkit_smiles_from_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.rdkit_smiles_from_smiles" title="Permalink to this definition"></a></dt>
<dd><p>Parallel version of get_rdkit_smiles. If orig_smiles is a list and workers is &gt; 1, spawn ‘workers’
threads to convert input SMILES strings to standardized RDKit format.</p>
<dl>
<dt>Args:</dt><dd><p>orig_smiles (list or str): List of SMILES strings to canonicalize.</p>
<p>useIsomericSmiles (bool): Whether to retain stereochemistry information in the generated strings.</p>
<p>workers (int): Number of parallel threads to use for calculation.</p>
</dd>
<dt>Returns:</dt><dd><p>list or str: Canonicalized SMILES strings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.struct_utils.smiles_to_inchi_key">
<span class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></span><span class="sig-name descname"><span class="pre">smiles_to_inchi_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">smiles</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#smiles_to_inchi_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.smiles_to_inchi_key" title="Permalink to this definition"></a></dt>
<dd><p>Generates an InChI key from a SMILES string.  Note that an InChI key is different from an InChI <em>string</em>;
it can be used as a unique identifier, but doesn’t hold the information needed to reconstruct a molecule.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>smiles (str): SMILES string.</p>
</dd>
<dt>Returns:</dt><dd><p>str: An InChI key. Returns None if RDKit cannot convert the SMILES string to an RDKit Mol object.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-utils" title="Permalink to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pipeline.html" class="btn btn-neutral float-left" title="pipeline package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, ATOM DDM Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>