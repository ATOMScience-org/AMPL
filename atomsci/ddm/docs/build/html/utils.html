

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>utils package &mdash; ATOM Data-Driven Modeling Pipeline 1.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ATOM Data-Driven Modeling Pipeline
          

          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">utils package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-utils.curate_data">utils.curate_data module</a></li>
<li><a class="reference internal" href="#utils-data-curation-functions-module">utils.data_curation_functions module</a></li>
<li><a class="reference internal" href="#module-utils.datastore_functions">utils.datastore_functions module</a></li>
<li><a class="reference internal" href="#utils-gentestset-module">utils.genTestset module</a></li>
<li><a class="reference internal" href="#module-utils.hyperparam_search_wrapper">utils.hyperparam_search_wrapper module</a></li>
<li><a class="reference internal" href="#module-utils.llnl_utils">utils.llnl_utils module</a></li>
<li><a class="reference internal" href="#module-utils.model_retrain">utils.model_retrain module</a></li>
<li><a class="reference internal" href="#utils-open-docs-module">utils.open-docs module</a></li>
<li><a class="reference internal" href="#module-utils.process_slurm">utils.process_slurm module</a></li>
<li><a class="reference internal" href="#module-utils.pubchem_utils">utils.pubchem_utils module</a></li>
<li><a class="reference internal" href="#module-utils.rdkit_easy">utils.rdkit_easy module</a></li>
<li><a class="reference internal" href="#module-utils.struct_utils">utils.struct_utils module</a></li>
<li><a class="reference internal" href="#module-utils.verify_results">utils.verify_results module</a></li>
<li><a class="reference internal" href="#module-utils">Module contents</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ATOM Data-Driven Modeling Pipeline</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>utils package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="utils-package">
<h1>utils package<a class="headerlink" href="#utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-utils.curate_data">
<span id="utils-curate-data-module"></span><h2>utils.curate_data module<a class="headerlink" href="#module-utils.curate_data" title="Permalink to this headline">¶</a></h2>
<p>Utility functions used for AMPL dataset curation and creation.</p>
<dl class="py function">
<dt id="utils.curate_data.add_binary_tertiary_classification">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">add_binary_tertiary_classification</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">low_limit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high_limit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#add_binary_tertiary_classification"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.add_binary_tertiary_classification" title="Permalink to this definition">¶</a></dt>
<dd><p>this function is set up for 3-tier (low, med, high) and 2-tier (low, high) classification.
If low_limit and high_limit are equal, the 2-tier system will be utilized
low_limit = values below this limit are considered “low”
high_limit = values above this limit are considered “high”
source_column = the column heading of the values being compared against high/med/low criteria</p>
</dd></dl>

<dl class="py function">
<dt id="utils.curate_data.add_classification">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">add_classification</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">low_limit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high_limit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#add_classification"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.add_classification" title="Permalink to this definition">¶</a></dt>
<dd><p>this function is set up for 3-tier (low, med, high) and 2-tier (low, high) classification.
If low_limit and high_limit are equal, the 2-tier system will be utilized
low_limit = values below this limit are considered “low”
high_limit = values above this limit are considered “high”
source_column = the column heading of the values being compared against high/med/low criteria</p>
</dd></dl>

<dl class="py function">
<dt id="utils.curate_data.add_classification_column">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">add_classification_column</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">thresholds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_inclusive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#add_classification_column"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.add_classification_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a classification column ‘label_column’ to data frame ‘data’ based on values in ‘value_column’,
according to a sequence of thresholds. The number of classes is one plus the number of thresholds.</p>
<dl>
<dt>Args:</dt><dd><p>thresholds (float or sequence of floats): Thresholds to use to assign class labels. Label i will
be assigned to values such that thresholds[i-1] &lt; value &lt;= thresholds[i] (if right_inclusive is True)
or thresholds[i-1] &lt;= value &lt; thresholds[i] (otherwise).</p>
<p>value_column (str): Name of the column from which class labels are derived.</p>
<p>label_column (str): Name of the new column to be created for class labels.</p>
<p>data (DataFrame): Data frame holding all data.</p>
<p>right_inclusive (bool): Whether the thresholding intervals are closed on the right or on the left.
Set this False to get the same behavior as add_binary_tertiary_classification. The default behavior
is preferred for the common case where the classification is based on a left-censoring threshold.</p>
</dd>
<dt>Returns:</dt><dd><p>data (DataFrame): Data frame updated to include class label column.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.curate_data.aggregate_assay_data">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">aggregate_assay_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'VALUE_NUM'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_value_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_actives</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active_thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'CMPD_NUMBER'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rdkit_smiles'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relation_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'VALUE_FLAG'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#aggregate_assay_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.aggregate_assay_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Map RDKit SMILES strings in assay_df to base structures, then compute an MLE estimate of the mean value over replicate measurements
for the same SMILES strings, taking censoring into account. Generate an aggregated result table with one value for each unique base
SMILES string, to be used in an ML-ready dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>assay_df</strong> – The input data frame to be processed.</p></li>
<li><p><strong>value_col</strong> – The column in the data frame containing assay values to be averaged.</p></li>
<li><p><strong>output_value_col</strong> – Optional; the column name to use in the output data frame for the averaged data.</p></li>
<li><p><strong>label_actives</strong> – If True, generate an additional column ‘active’ indicating whether the mean value is above a threshold specified by active_thresh.</p></li>
<li><p><strong>active_thresh</strong> – The threshold to be used for labeling compounds as active or inactive.</p></li>
</ul>
</dd>
</dl>
<p>If active_thresh is None (the default), the threshold used is the minimum reported value across all records
with left-censored values (i.e., those with ‘&lt;’ in the relation column.
:param id_col: The input data frame column containing compound IDs.
:param smiles_col: The input data frame column containing SMILES strings.
:param relation_col: The input data frame column containing relational operators (&lt;, &gt;, etc.).
:param date_col: The input data frame column containing dates when the assay data was uploaded. If not None, the code will assign the earliest
date among replicates to the aggregate data record.
:return: A data frame containing averaged assay values, with one value per compound.</p>
</dd></dl>

<dl class="py function">
<dt id="utils.curate_data.average_and_remove_duplicates">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">average_and_remove_duplicates</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_bad_duplicates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_stdev</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compound_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'CMPD_NUMBER'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rm_duplicate_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rdkit_smiles_parent'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#average_and_remove_duplicates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.average_and_remove_duplicates" title="Permalink to this definition">¶</a></dt>
<dd><p>This while loop loops through until no’bad duplicates’ are left.
column - column with the value of interest
tolerance - acceptable % difference between value and average</p>
<blockquote>
<div><p>ie.: if “[(value - mean)/mean*100]&gt;tolerance” then remove data row</p>
</div></blockquote>
<p>rm_duplicate_only - only remove bad duplicates, don’t average good ones, the resulting table can be fed into aggregate assay data to further process.
note: The mean is recalculated on each loop through to make sure it isn’t skewed by the ‘bad duplicate’ values</p>
</dd></dl>

<dl class="py function">
<dt id="utils.curate_data.create_new_rows_for_extra_results">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">create_new_rows_for_extra_results</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">extra_result_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#create_new_rows_for_extra_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.create_new_rows_for_extra_results" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="utils.curate_data.filter_in_by_column_values">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">filter_in_by_column_values</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#filter_in_by_column_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.filter_in_by_column_values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="utils.curate_data.filter_in_out_by_column_values">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">filter_in_out_by_column_values</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_out</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#filter_in_out_by_column_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.filter_in_out_by_column_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Include rows only for given values in specified column.
column - column name.
values - list of acceptable values.</p>
</dd></dl>

<dl class="py function">
<dt id="utils.curate_data.filter_out_by_column_values">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">filter_out_by_column_values</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#filter_out_by_column_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.filter_out_by_column_values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="utils.curate_data.filter_out_comments">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">filter_out_comments</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values_cs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#filter_out_comments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.filter_out_comments" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove rows that contain the text listed
values - list of values that are not case sensitive
values_cs - list of values that are case sensitive</p>
</dd></dl>

<dl class="py function">
<dt id="utils.curate_data.freq_table">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">freq_table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#freq_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.freq_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a data frame tabulating the repeat frequencies of each unique value in ‘vals’.
Restrict it to values occurring at least min_freq times.</p>
</dd></dl>

<dl class="py function">
<dt id="utils.curate_data.get_binary_class">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">get_binary_class</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#get_binary_class"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.get_binary_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Map a continuous value to a binary classification by thresholding.</p>
</dd></dl>

<dl class="py function">
<dt id="utils.curate_data.get_rdkit_smiles_parent">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">get_rdkit_smiles_parent</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#get_rdkit_smiles_parent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.get_rdkit_smiles_parent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="utils.curate_data.get_three_level_class">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">get_three_level_class</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">red_thresh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yellow_thresh</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#get_three_level_class"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.get_three_level_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Map a continuous value to a three level (green, yellow, red) classification in which intermediate (“yellow”)
values are tagged with class -1. The idea is that these values will be removed from the data set.</p>
</dd></dl>

<dl class="py function">
<dt id="utils.curate_data.labeled_freq_table">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">labeled_freq_table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#labeled_freq_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.labeled_freq_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a frequency table in which additional columns are included. The first column in ‘columns’
is assumed to be a unique ID; there should be a many-to-1 mapping from the ID to each of the additional
columns.</p>
</dd></dl>

<dl class="py function">
<dt id="utils.curate_data.mle_censored_mean">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">mle_censored_mean</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmpd_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std_est</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PIC50'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relation_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'relation'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#mle_censored_mean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.mle_censored_mean" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a maximum likelihood estimate of the true mean value underlying the distribution of replicate assay measurements for a
single compound. The data may be a mix of censored and uncensored measurements, as indicated by the ‘relation’ column in the input
data frame cmpd_df. std_est is an estimate for the standard deviation of the distribution, which is assumed to be Gaussian;
we typically compute a common estimate for the whole dataset using replicate_rmsd().</p>
</dd></dl>

<dl class="py function">
<dt id="utils.curate_data.replicate_rmsd">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">replicate_rmsd</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'base_rdkit_smiles'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PIC50'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relation_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'relation'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#replicate_rmsd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.replicate_rmsd" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute RMS deviation of all replicate uncensored measurements in dset_df from their means. Measurements are treated
as replicates if they correspond to the same SMILES string, and are considered censored if the relation
column contains &gt; or &lt;. The resulting value is meant to be used as an estimate of measurement error for all compounds
in the dataset.</p>
</dd></dl>

<dl class="py function">
<dt id="utils.curate_data.set_group_permissions">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">set_group_permissions</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AD'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">owner</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'GSK'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#set_group_permissions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.set_group_permissions" title="Permalink to this definition">¶</a></dt>
<dd><p>Set file group and permissions to standard values for a dataset containing proprietary
data owned by ‘owner’. Later we may add a ‘public’ option, or groups for data from other pharma companies.</p>
<dl>
<dt>Args:</dt><dd><p>path (string): File path</p>
<p>system (string): Computing environment from which group ownerships will be derived; currently, either ‘LC’ for LC
filesystems or ‘AD’ for LLNL systems where owners and groups are managed by Active Directory.</p>
<p>owner (string): Who the data belongs to, either ‘public’ or the name of a company (e.g. ‘GSK’) associated with a
restricted access group.</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.curate_data.summarize_data">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">summarize_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_bins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'No'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#summarize_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.summarize_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="utils.curate_data.xc50topxc50_for_nm">
<code class="sig-prename descclassname"><span class="pre">utils.curate_data.</span></code><code class="sig-name descname"><span class="pre">xc50topxc50_for_nm</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/curate_data.html#xc50topxc50_for_nm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.curate_data.xc50topxc50_for_nm" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert XC50 values measured in nanomolars to -log10 (PX50)
Args :</p>
<blockquote>
<div><p>x: input XC50 value measured in nanomolars</p>
</div></blockquote>
<dl class="simple">
<dt>Returns :</dt><dd><p>-log10 value of x</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="utils-data-curation-functions-module">
<h2>utils.data_curation_functions module<a class="headerlink" href="#utils-data-curation-functions-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-utils.datastore_functions">
<span id="utils-datastore-functions-module"></span><h2>utils.datastore_functions module<a class="headerlink" href="#module-utils.datastore_functions" title="Permalink to this headline">¶</a></h2>
<p>This file contains functions to make it easier to browse and retrieve data from the datastore.
Intended for general use. Add/modify functions as needed. Created 23Jul18 CHW</p>
<dl class="py function">
<dt id="utils.datastore_functions.bulk_export_kv_for_files">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">bulk_export_kv_for_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_as</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#bulk_export_kv_for_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.bulk_export_kv_for_files" title="Permalink to this definition">¶</a></dt>
<dd><p>exports a csv file with 3 columns: bucket, dataset_key, key/value pairs to make reviewing  metadata easier</p>
<dl class="simple">
<dt>Args:</dt><dd><p>files (list of tuples): format [(bucket1, dataset_key1), (bucket2, dataset_key2)]
save_as (str): filename to use for new file</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.bulk_update_kv">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">bulk_update_kv</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#bulk_update_kv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.bulk_update_kv" title="Permalink to this definition">¶</a></dt>
<dd><p>this function allows you to upload a properly formatted csv file with 4 columns (order and spelling of headings must match): bucket, dataset_key, kv_add, kv_del
the metadata for the files listed will then be updated in the Datastore</p>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.check_key_val">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">check_key_val</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enforced</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#check_key_val"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.check_key_val" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks to ensure the keys and values specified are ‘approved’ and that (optionally) all required keys are filled out.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>key_values (dict): keys and values specified by user for a file
client (optional): set client if not using the default
df (DataFrame) : dataframe to be uploaded
enforced (bool, optional): If True (default) checks that all required keys are filled out</p>
</dd>
<dt>Returns:</dt><dd><p>(bool): returns True if all keys and values are ‘approved’ AND enforcement criteria are met</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.config_client">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">config_client</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'https://twintron-blue.llnl.gov/atom/datastore/api/v1.0/swagger.json'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_instance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#config_client"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.config_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures client to access datastore service.</p>
<dl>
<dt>Args:</dt><dd><p>token (str): Path to file containing token for accessing datastore. Defaults to 
/usr/local/data/ds_token.txt on non-LC systems, or to $HOME/data/ds_token.txt on LC systems.</p>
<p>url (str): URL for datastore REST service.</p>
<p>new_instance (bool): True to force creation of a new client object. By default, a shared
singleton object is returned.</p>
</dd>
<dt>Returns:</dt><dd><p>returns configured client</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.copy_datasets_to_bucket">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">copy_datasets_to_bucket</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">from_bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ds_client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#copy_datasets_to_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.copy_datasets_to_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy each named dataset from one bucket to another.</p>
<dl>
<dt>Args:</dt><dd><p>dataset_keys (str or list of str): List of dataset_keys for datasets to move.</p>
<p>from_bucket (str): Bucket where datasets are now.</p>
<p>to_bucket (str): Bucket to move datasets to.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.dataset_key_exists">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">dataset_key_exists</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#dataset_key_exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.dataset_key_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a boolean indicating whether the given dataset_key is already present in the bucket specified.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>dataset_key (str): the dataset_key for the dataset you want (unique in each bucket)
bucket (str): the bucket the dataset you want resides in
client (optional): set client if not using the default</p>
</dd>
<dt>Returns:</dt><dd><p>(bool): returns ‘True’ if dataset_key is present in bucket specified</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.filter_datasets_interactive">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">filter_datasets_interactive</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_search</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restrict_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restrict_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_oid_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_all_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#filter_datasets_interactive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.filter_datasets_interactive" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an old way of searching for files. Not based on the current format. Only use</p>
<dl class="simple">
<dt>Args:</dt><dd><p>bucket (str or list, optional): buckets to search (defaults to searching all buckets you have access to in the datastore)
client (optional): set client if not using the default
restrict_key (bool, optional): if set to True, restricts the search to keys that are on the approved list (see file in bucket with dataset_key: accepted_key_values)
restrict_key (bool, optional): if set to True, restricts the search to values that are on the approved list (see file in bucket with dataset_key: accepted_key_values)
dataset_oid_only (bool, optional): if True, return a list of dataset_oids meeting the criteria;   if False, returns a dataframe of all the metadata for the files meeting search criteria
display_all_columns (bool, optional): If ‘False’ (default), then show only a selected subset of the columns
max_rows (int, optional): maximum rows to display during interactive search</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.get_key_val">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">get_key_val</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#get_key_val"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.get_key_val" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple utility to search through list of key value pairs and return values for query key</p>
<dl>
<dt>Args:</dt><dd><blockquote>
<div><blockquote>
<div><dl class="simple">
<dt>metadata list of key,value pairs (list)<span class="classifier">a list with position 0 = string/list of buckets, and remaining positions dictionaries of search criteria</span></dt><dd><dl class="simple">
<dt>example:</dt><dd><p>[{‘key’: ‘species’, ‘value’: [‘rat’] },
{‘key’: ‘assay_category’,’value’: [‘solubility’, ‘volume_of_distribution’]}]</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>key (str):  key to search for</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>returns When key is provide, returns value for matching key if found, None otherwise
returns dictionary for the list of key,value pairs when a query key is not provided.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.get_keyval">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">get_keyval</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_oid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#get_keyval"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.get_keyval" title="Permalink to this definition">¶</a></dt>
<dd><p>Requires either dataset_oid <em>or</em> dataset_key+bucket.
Function extracts the key:value pairs and converts from the ‘datastore format’ (list of dictionaries) into ‘model tracker format’ (a single dictionary).</p>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.initialize_model_tracker">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">initialize_model_tracker</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#initialize_model_tracker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.initialize_model_tracker" title="Permalink to this definition">¶</a></dt>
<dd><p>Create or obtain a client object for the model tracker service..</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>mlmt_client (MLMTClient): The client object for the model tracker service.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.key_exists">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">key_exists</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#key_exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.key_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if key exists in bucket(s) specified.
Args:</p>
<blockquote>
<div><p>key (str): the key of interest
bucket (str or list, optional): ‘all’ by default. Specify bucket (as a str or list) to limit search
client (optional): set client if not using the default</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>(bool): Returns True if key exists in bucket(s) specified</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.list_key_values">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">list_key_values</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">category</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'experimental'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#list_key_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.list_key_values" title="Permalink to this definition">¶</a></dt>
<dd><p>List the values for input key.  Requires that the input key be in the ‘approved’ list</p>
<dl class="simple">
<dt>Args:</dt><dd><p>bucket (str or list, optional): buckets to search (defaults to searching all buckets you have access to in the datastore)
input_key : user specified key to query
category : ‘experimental’ or ‘pdb_bind’
client (optional): set client if not using the default</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.repeat_defined_search">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">repeat_defined_search</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">defined_search</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_return</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'df'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_all_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#repeat_defined_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.repeat_defined_search" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves a DataFrame of files (and associated metadata) meeting the search criteria.
This is designed to work well with the output from the filter_datasets_interactive function with defined_search=True</p>
<dl>
<dt>Args:</dt><dd><dl class="simple">
<dt>defined_search (list)<span class="classifier">a list with position 0 = string/list of buckets, and remaining positions dictionaries of search criteria</span></dt><dd><dl class="simple">
<dt>example: defined_search = [‘gsk_ml’,</dt><dd><p>{‘key’: ‘species’, ‘value’: [‘rat’], ‘operator’: ‘in’},
{‘key’: ‘assay_category’,’value’: [‘solubility’, ‘volume_of_distribution’], ‘operator’: ‘in’}]</p>
</dd>
</dl>
</dd>
</dl>
<p>client (optional): set client if not using the default
to_return (str, optional): (default=df)</p>
<blockquote>
<div><p>‘df’ (df_results)  = return a pandas dataframe summarizing metadata of files meeting criteria
‘oid’ (dataset_oid) = return a list of dataset_oids meeting criteria
‘ds_key’ (dataset_key) = return a list of dataset_key + bucket tuples</p>
</div></blockquote>
<p>display_all_column (bool, optional) : default False. If True, displays all associated metadata instead of just a selected subset</p>
</dd>
<dt>Returns:</dt><dd><p>One of the following will be returned (based on selection for ‘to_return’)
(DataFrame) : dataframe of metadata for the files matching the criteria specified in the search
(list) : list of dataset_oids meeting the criteria specified in the search
(list) : list of bucket and dataset_key meeting the criteria specified in the search</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.retrieve_bucket_names">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">retrieve_bucket_names</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#retrieve_bucket_names"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.retrieve_bucket_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of the bucket names in datastore</p>
<dl class="simple">
<dt>Args:</dt><dd><p>client (optional): set client if not using the default</p>
</dd>
<dt>Returns:</dt><dd><p>(list): list of bucket names that exist in the datastore which user has access to</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.retrieve_columns_from_dataset">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">retrieve_columns_from_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#retrieve_columns_from_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.retrieve_columns_from_dataset" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Retrieve column(s) from csv file (may be bz2 compressed) in datastore.</dt><dd><p>‘NA’ returned if column not in file (as well as warning message).</p>
</dd>
<dt>Args:</dt><dd><p>return_names (bool): If true, just return column headers from file
max_rows (int): default=0 which will return all rows
client (optional): set client if not using the default</p>
</dd>
<dt>Returns:</dt><dd><p>(dict): dictionary corresponding to selected columns</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.retrieve_dataset_by_dataset_oid">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">retrieve_dataset_by_dataset_oid</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_oid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nrows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tarpath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#retrieve_dataset_by_dataset_oid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.retrieve_dataset_by_dataset_oid" title="Permalink to this definition">¶</a></dt>
<dd><p>retrieves the dataset and returns as a pandas dataframe (or other format as needed depending on file type).
Args:</p>
<blockquote>
<div><p>dataset_oid (str) : unique identifier for the dataset you want
client (optional): set client if not using the default
return_metadata (bool, optional): if set to True, return a dictionary of the metadata INSTEAD of a dataframe of the data
nrows (num, optional): used to limit the number of rows returned
print_metadata (bool, optional): if set to True, displays the document metadata/properties
sep (str, optional): separator used for csv file
tarpath (str, optional): path to use for tarball files
index_col (int, optional): For csv files, column to use as the row labels of the DataFrame</p>
</div></blockquote>
<dl>
<dt>Returns:</dt><dd><dl class="simple">
<dt>(DataFrame, OrderedDict, str, dict): filetype determines what type of object is returned.</dt><dd><p>xls and xlsx files returns an OrderedDict.
tarball (gz and tgz) files returns the location of the files as a string
csv returns a DataFrame</p>
</dd>
</dl>
<p>optionally, return a dictionary of the metadata only if ‘return_metadata’ is set to TRUE.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.retrieve_dataset_by_datasetkey">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">retrieve_dataset_by_datasetkey</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nrows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tarpath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#retrieve_dataset_by_datasetkey"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.retrieve_dataset_by_datasetkey" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the dataset and returns as a pandas dataframe (or other format as needed depending on file type).</p>
<dl>
<dt>Args:</dt><dd><p>dataset_key (str): the dataset_key for the dataset you want (unique in each bucket)
bucket (str): the bucket the dataset you want resides in
client (optional): set client if not using the default
return_metadata (bool, optional): if set to True, return a dictionary of the metadata INSTEAD of a dataframe of the data
nrows (num, optional): used to limit the number of rows returned
print_metadata (bool, optional): if set to True, displays the document metadata/properties
sep (str, optional): separator used for csv file
tarpath (str, optional): path to use for tarball files
index_col (int, optional): For csv files, column to use as the row labels of the DataFrame</p>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>(DataFrame, OrderedDict, str, dict): filetype determines what type of object is returned.</dt><dd><p>xls and xlsx files returns an OrderedDict.
tarball (gz and tgz) files returns the location of the files as a string
csv returns a DataFrame</p>
</dd>
</dl>
<p>optionally, return a dictionary of the metadata only if ‘return_metadata’ is set to TRUE.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.retrieve_keys">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">retrieve_keys</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#retrieve_keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.retrieve_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of keys in bucket(s) specified.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>bucket (str, optional): ‘all’ by default. Specify bucket (as a str or list) to limit search
client (optional): set client if not using the default
sort (bool, optional): if ‘True’ (default), sort the keys alphabetically</p>
</dd>
<dt>Returns:</dt><dd><p>(list): returns a list of keys in bucket(s) specified</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.retrieve_values_for_key">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">retrieve_values_for_key</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#retrieve_values_for_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.retrieve_values_for_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of values associated with a specified key.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>key (str): the key of interest
bucket (str or list, optional) : ‘all’ by default. Specify bucket (as a str or list) to limit search
client (optional): set client if not using the default</p>
</dd>
<dt>Returns:</dt><dd><p>(list): Returns a list of values (str) associated with a specified key</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.search_datasets_by_key_value">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">search_datasets_by_key_value</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'in'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_all_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#search_datasets_by_key_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.search_datasets_by_key_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Find datasets by key:value pairs and returns a DataFrame of datasets and associated properties.</p>
<dl>
<dt>Args:</dt><dd><p>key (str): the key of interest
value (str): the value of interest
client (optional): set client if not using the default
operator (str, optional): ‘in’ by default, but can be changed to any of the following:</p>
<blockquote>
<div><p>=, !=, &lt;, &lt;=, &gt;, &gt;=, all, in, not in</p>
</div></blockquote>
<p>bucket (str or list, optional) : ‘all’ by default. Specify bucket (as a str or list) to limit search
display_all_columns (bool, optional): If ‘False’ (default), then show only a selected subset of the columns</p>
</dd>
<dt>Returns:</dt><dd><p>(DataFrame): summary table of the files and relevant metadata matching the criteria specified</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.search_files_interactive">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">search_files_interactive</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_return</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'df'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_all_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#search_files_interactive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.search_files_interactive" title="Permalink to this definition">¶</a></dt>
<dd><p>This tool helps you find the files you need via an interactive/guided interface.</p>
<dl>
<dt>Args:</dt><dd><p>bucket (str or list, optional): buckets to search (defaults to searching all buckets you have access to in the datastore)
client (optional): set client if not using the default
to_return (str): ‘df’ (df_results)  = return a pandas dataframe summarizing metadata of files meeting criteria</p>
<blockquote>
<div><dl class="simple">
<dt>‘search’ (search_criteria) = return a list containing search criteria where position 0 = string/list of buckets, and remaining positions are dictionaries of search criteria.</dt><dd><p>Designed to work with ‘repeat_defined_search’ function.</p>
</dd>
</dl>
<p>‘oid’ (dataset_oid) = return a list of dataset_oids meeting criteria
‘ds_key’ (dataset_key) = return a list of dataset_key + bucket tuples</p>
</div></blockquote>
<p>display_all_columns (bool, optional): If ‘False’ (default), then show only a selected subset of the columns
max_rows (int, optional): maximum rows to display during interactive search</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.string_to_dict">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">string_to_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dict_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#string_to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.string_to_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.string_to_list">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">string_to_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">list_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#string_to_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.string_to_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.summarize_datasets">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">summarize_datasets</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_as</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_ht</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#summarize_datasets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.summarize_datasets" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate summary statistics such as min/max/median/mean on files specified (all files must be in same bucket).</p>
<dl class="simple">
<dt>Args:</dt><dd><p>dataset_keys (list): dataset_keys corresponding to the files to summarize
bucket (str): bucket the files reside in
client (optional): set client if not using the default
column (str, optional): column to summarize (will be prompted to specify if not pre-specified or if column does not exist in file)
save_as (str, optional): filename to save image of box plot(s) to
plot_ht (int, optional): height of box plots (default = 10)
labels (‘str’, optional):
last (bool optional): If True (default=False), then summarize values from last column instead of specifying column heading</p>
</dd>
<dt>Returns</dt><dd><p>(DataFrame): returns table summarizing the stats for the file(s) specified</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.update_distribution_kv">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">update_distribution_kv</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kv_add</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kv_del</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#update_distribution_kv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.update_distribution_kv" title="Permalink to this definition">¶</a></dt>
<dd><p>update the key:values for specified file. No change to file.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>bucket (str): Specify bucket where the file exists
dataset_key (str): dataset_key for the file to update metadata for
client (optional): set client if not using the default
kv_add (dict, optional): key-value pairs to add to the metadata for the file specified
kv_del (str or list, optional): keys to delete from the metadata for the file specified</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.update_kv">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">update_kv</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kv_add</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kv_del</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#update_kv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.update_kv" title="Permalink to this definition">¶</a></dt>
<dd><p>update the key:values for specified file. No change to file.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>bucket (str): Specify bucket where the file exists
dataset_key (str): dataset_key for the file to update metadata for
client (optional): set client if not using the default
kv_add (dict, optional): key-value pairs to add to the metadata for the file specified
kv_del (str or list, optional): keys to delete from the metadata for the file specified</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.upload_df_to_DS">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">upload_df_to_DS</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#upload_df_to_DS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.upload_df_to_DS" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will upload a file to the Datastore along with the associated metadata</p>
<dl>
<dt>Args:</dt><dd><p>df (DataFrame) : dataframe to be uploaded
bucket (str) : bucket the file will be put in
filename (str) : the filename to save the dataframe as in the datastore. Include the extension
title (str) : title of the file in (human friendly format)
description (str) : long text box to describe file (background/use notes)
tags (list) : must be a list.
key_values (dict) : key-value pairs to enable future users to find the file. Must be a dictionary.
client (optional): set client if not using the default
dataset_key (str) : If updating a file already in the datastore enter the corresponding dataset_key.</p>
<blockquote>
<div><p>If not, leave as ‘none’ and the dataset_key will be automatically generated.</p>
</div></blockquote>
<p>data_type (str,optional) : Specify dataType (e.g. csv,bz, etc) if not specified attempt to use file extension</p>
</dd>
<dt>Returns:</dt><dd><p>(dict): if return_metadata=True, then function returns a dictionary of the metadata for the uploaded dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.upload_file_to_DS">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">upload_file_to_DS</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_ref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#upload_file_to_DS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.upload_file_to_DS" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will upload a file to the Datastore along with the associated metadata</p>
<dl>
<dt>Args:</dt><dd><p>bucket (str): bucket the file will be put in
title (str): title of the file in (human friendly format)
description (str): long text box to describe file (background/use notes)
tags (list): must be a list.
key_values (dict): key:value pairs to enable future users to find the file. Must be a dictionary.
filepath (str): current location of the file
filename (str): current filename of the file
client (optional): set client if not using the default
dataset_key (str, optional): If updating a file already in the datastore enter the corresponding dataset_key.</p>
<blockquote>
<div><p>If not, leave as ‘none’ and the dataset_key will be automatically generated.</p>
</div></blockquote>
<p>override_check (bool, optional): If ‘True’ then do NOT perform a check of the keys/values against approved list and enforcement criteria
return_metadata (bool, optional): If ‘True’ (default=False), then return the metadata from the uploaded file
file_ref (bool, optional) : If ‘True’ (default=False), links file to the datastore instead of creating a copy to managed by the datastore.
data_type (str,optional) : Specify dataType (e.g. csv,bz, etc) if not specified attempt to use file extension</p>
</dd>
<dt>Returns:</dt><dd><p>(dict): optionally returns the metadata from the uploaded file (if return_metadata=True)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.datastore_functions.upload_pickle_to_DS">
<code class="sig-prename descclassname"><span class="pre">utils.datastore_functions.</span></code><code class="sig-name descname"><span class="pre">upload_pickle_to_DS</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/datastore_functions.html#upload_pickle_to_DS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.datastore_functions.upload_pickle_to_DS" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will upload a file to the Datastore along with the associated metadata.</p>
<dl>
<dt>Args:</dt><dd><p>data (DataFrame, str, list, tuple, pickle): data to be pickled and uploaded
bucket (str): bucket the file will be put in
filename (str): the filename to save the dataframe as in the datastore. Include the extension
title (str): title of the file in (human friendly format)
description (str): long text box to describe file (background/use notes)
tags (list): must be a list.
key_values (dict): key:value pairs to enable future users to find the file. Must be a dictionary.
client (optional): set client if not using the default
dataset_key (str, optional): If updating a file already in the datastore enter the corresponding dataset_key.</p>
<blockquote>
<div><p>If not, leave as ‘none’ and the dataset_key will be automatically generated.</p>
</div></blockquote>
<p>override_check (bool, optional): If True, overrides checking the metadata for the file when uploaded.
return_metadata (bool, optional): If True, returns metadata for the file after it is uploaded.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="utils-gentestset-module">
<h2>utils.genTestset module<a class="headerlink" href="#utils-gentestset-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-utils.hyperparam_search_wrapper">
<span id="utils-hyperparam-search-wrapper-module"></span><h2>utils.hyperparam_search_wrapper module<a class="headerlink" href="#module-utils.hyperparam_search_wrapper" title="Permalink to this headline">¶</a></h2>
<p>Script to generate hyperparameter combinations based on input params and send off jobs to a slurm system.
Author: Amanda Minnich</p>
<dl class="py class">
<dt id="utils.hyperparam_search_wrapper.GeometricSearch">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></code><code class="sig-name descname"><span class="pre">GeometricSearch</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GeometricSearch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GeometricSearch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#utils.hyperparam_search_wrapper.HyperparameterSearch" title="utils.hyperparam_search_wrapper.HyperparameterSearch"><code class="xref py py-class docutils literal notranslate"><span class="pre">utils.hyperparam_search_wrapper.HyperparameterSearch</span></code></a></p>
<p>Generates parameter values in logistic steps, rather than linear like GridSearch does</p>
<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.GeometricSearch.generate_assay_list">
<code class="sig-name descname"><span class="pre">generate_assay_list</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GeometricSearch.generate_assay_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GeometricSearch.generate_assay_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the list of datasets to build models for, with their key, bucket, split, and split uuid
Returns:</p>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.GeometricSearch.generate_combo">
<code class="sig-name descname"><span class="pre">generate_combo</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GeometricSearch.generate_combo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GeometricSearch.generate_combo" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to generate all combinations from a given set of key-value pairs</p>
<dl class="simple">
<dt>Args:</dt><dd><p>params_dict: Set of key-value pairs with the key being the param name and the value being the list of values
you want to try for that param</p>
</dd>
<dt>Returns:</dt><dd><p>new_dict: The list of all combinations of parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.GeometricSearch.generate_param_combos">
<code class="sig-name descname"><span class="pre">generate_param_combos</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GeometricSearch.generate_param_combos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GeometricSearch.generate_param_combos" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs additional parsing of parameters and generates all combinations</p>
<p>Returns:</p>
<blockquote>
<div><p>None</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.GeometricSearch.split_and_save_dataset">
<code class="sig-name descname"><span class="pre">split_and_save_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GeometricSearch.split_and_save_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GeometricSearch.split_and_save_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits a given dataset, saves it, and sets the split_uuid in the metadata</p>
<dl class="simple">
<dt>Args:</dt><dd><p>assay_params: Dataset metadata</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.GeometricSearch.submit_jobs">
<code class="sig-name descname"><span class="pre">submit_jobs</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GeometricSearch.submit_jobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GeometricSearch.submit_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Reformats parameters as necessary and then calls run_command in a loop to submit a job for each param combo</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="utils.hyperparam_search_wrapper.GridSearch">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></code><code class="sig-name descname"><span class="pre">GridSearch</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GridSearch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GridSearch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#utils.hyperparam_search_wrapper.HyperparameterSearch" title="utils.hyperparam_search_wrapper.HyperparameterSearch"><code class="xref py py-class docutils literal notranslate"><span class="pre">utils.hyperparam_search_wrapper.HyperparameterSearch</span></code></a></p>
<p>Generates fixed steps on a grid for a given hyperparameter range</p>
<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.GridSearch.generate_assay_list">
<code class="sig-name descname"><span class="pre">generate_assay_list</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GridSearch.generate_assay_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GridSearch.generate_assay_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the list of datasets to build models for, with their key, bucket, split, and split uuid
Returns:</p>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.GridSearch.generate_combo">
<code class="sig-name descname"><span class="pre">generate_combo</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GridSearch.generate_combo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GridSearch.generate_combo" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to generate all combinations from a given set of key-value pairs</p>
<dl class="simple">
<dt>Args:</dt><dd><p>params_dict: Set of key-value pairs with the key being the param name and the value being the list of values
you want to try for that param</p>
</dd>
<dt>Returns:</dt><dd><p>new_dict: The list of all combinations of parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.GridSearch.generate_param_combos">
<code class="sig-name descname"><span class="pre">generate_param_combos</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GridSearch.generate_param_combos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GridSearch.generate_param_combos" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs additional parsing of parameters and generates all combinations</p>
<p>Returns:</p>
<blockquote>
<div><p>None</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.GridSearch.split_and_save_dataset">
<code class="sig-name descname"><span class="pre">split_and_save_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GridSearch.split_and_save_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GridSearch.split_and_save_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits a given dataset, saves it, and sets the split_uuid in the metadata</p>
<dl class="simple">
<dt>Args:</dt><dd><p>assay_params: Dataset metadata</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.GridSearch.submit_jobs">
<code class="sig-name descname"><span class="pre">submit_jobs</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#GridSearch.submit_jobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.GridSearch.submit_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Reformats parameters as necessary and then calls run_command in a loop to submit a job for each param combo</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="utils.hyperparam_search_wrapper.HyperOptSearch">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></code><code class="sig-name descname"><span class="pre">HyperOptSearch</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperOptSearch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperOptSearch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Perform hyperparameter search with Bayesian Optmization (Tree Parzen Estimator)
To use HyperOptSearch, modify the config json file as follows:</p>
<blockquote>
<div><p>serach_type: use “hyperopt”
result_dir: use two directories (recommended), separated by comma, 1st one will be used to save the best model tarball, 2nd one will be used to store all models during the process.</p>
<blockquote>
<div><p>e.g. “result_dir”: “/path/of/the/final/dir,/path/of/the/temp/dir”</p>
</div></blockquote>
<dl class="simple">
<dt>model_type: RF or NN, also add max number of HyperOptSearch evaluations, e.g. “model_type”: “RF|100”.</dt><dd><p>If no max number provide, the default 100 will be used.</p>
</dd>
</dl>
<p>#For NN models only
lr: specify learning rate searching method and related parameters as the following scheme.</p>
<blockquote>
<div><p>method|parameter1,parameter2…
method: supported searching schemes in HyperOpt include: choice, uniform, loguniform, and uniformint, see <a class="reference external" href="https://github.com/hyperopt/hyperopt/wiki/FMin">https://github.com/hyperopt/hyperopt/wiki/FMin</a> for details.
parameters:</p>
<blockquote>
<div><p>choice: all values to search from, separated by comma, e.g. choice|0.0001,0.0005,0.0002,0.001
uniform: low and high bound of the interval to serach, e.g. uniform|0.00001,0.001
loguniform: low and high bound (in natural log) of the interval to serach, e.g. loguniform|-13.8,-6.9
uniformint: low and high bound of the interval to serach, e.g. uniformint|8,256</p>
</div></blockquote>
</div></blockquote>
<dl class="simple">
<dt>ls: similar as learning_rate, specify number of layers and size of each one.</dt><dd><p>method|num_layers|parameter1,parameter2…
e.g. choice|2|8,16,32,64,128,256,512  #this will generate a two-layer config, each layer takes size from the list “8,16,32,64,128,256,512”
e.g. uniformint|3|8,512  #this will generate a three-layer config, each layer takes size from the uniform interval [8,512]</p>
</dd>
<dt>dp: similar as layer_sizes, just make sure dropouts and layer_sizes should have the same number of layers.</dt><dd><p>e.g. uniform|3|0,0.4   #this will generate a three-layer config, each layer takes size from the uniform interval [0,0.4]</p>
</dd>
</dl>
<p>#For RF models only
rfe: rf_estimator, same structure as the learning rate above, e.g. uniformint|64,512  #take integer values from a uniform interval [64,512]
rfd: rf_max_depth, e.g. uniformint|8,256
rff: rf_max_feature, e.g. uniformint|8,128</p>
</div></blockquote>
<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperOptSearch.run_search">
<code class="sig-name descname"><span class="pre">run_search</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperOptSearch.run_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperOptSearch.run_search" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></code><code class="sig-name descname"><span class="pre">HyperparameterSearch</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hyperparam_uuid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The class for generating and running all hyperparameter combinations based on the input params given</p>
<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch.already_run">
<code class="sig-name descname"><span class="pre">already_run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.already_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.already_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks to see if a model with a given metadata combination has already been built
Args:</p>
<blockquote>
<div><p>assay_params: model metadata information</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>Boolean specifying if model has been previously built</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch.assemble_layers">
<code class="sig-name descname"><span class="pre">assemble_layers</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.assemble_layers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.assemble_layers" title="Permalink to this definition">¶</a></dt>
<dd><p>Reformats layer parameters</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch.generate_assay_list">
<code class="sig-name descname"><span class="pre">generate_assay_list</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.generate_assay_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.generate_assay_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the list of datasets to build models for, with their key, bucket, split, and split uuid
Returns:</p>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch.generate_combo">
<code class="sig-name descname"><span class="pre">generate_combo</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.generate_combo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.generate_combo" title="Permalink to this definition">¶</a></dt>
<dd><p>This is implemented in the specific sub-classes</p>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch.generate_combos">
<code class="sig-name descname"><span class="pre">generate_combos</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.generate_combos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.generate_combos" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls sub-function generate_combo and then uses itertools.product to generate all desired combinations
Args:</p>
<blockquote>
<div><p>params_dict:</p>
</div></blockquote>
<p>Returns:</p>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch.generate_param_combos">
<code class="sig-name descname"><span class="pre">generate_param_combos</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.generate_param_combos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.generate_param_combos" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs additional parsing of parameters and generates all combinations</p>
<p>Returns:</p>
<blockquote>
<div><p>None</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch.generate_split_shortlist">
<code class="sig-name descname"><span class="pre">generate_split_shortlist</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.generate_split_shortlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.generate_split_shortlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes a shortlist, generates splits for each dataset on the list, and uploads a new shortlist file with the
split_uuids included. Generates splits for the split_combos [[0.1,0.1], [0.1,0.2],[0.2,0.2]], [random, scaffold]</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch.generate_split_shortlist_file">
<code class="sig-name descname"><span class="pre">generate_split_shortlist_file</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.generate_split_shortlist_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.generate_split_shortlist_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes a shortlist, generates splits for each dataset on the list, and uploads a new shortlist file with the
split_uuids included. Generates splits for the split_combos [[0.1,0.1], [0.15,0.15], [0.1,0.2], [0.2,0.2]], [random, scaffold]</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch.get_dataset_metadata">
<code class="sig-name descname"><span class="pre">get_dataset_metadata</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.get_dataset_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.get_dataset_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Gather the required metadata for a dataset</p>
<dl class="simple">
<dt>Args:</dt><dd><p>assay_params: dataset metadata</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch.get_shortlist_df">
<code class="sig-name descname"><span class="pre">get_shortlist_df</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">split_uuids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.get_shortlist_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.get_shortlist_df" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Args:</dt><dd><p>split_uuids: Boolean value saying if you want just datasets returned or the split_uuids as well</p>
</dd>
<dt>Returns:</dt><dd><p>The list of dataset_keys, along with their accompanying bucket, split type, and split_uuid if split_uuids is True</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch.return_split_uuid">
<code class="sig-name descname"><span class="pre">return_split_uuid</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">splitter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split_combo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.return_split_uuid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.return_split_uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a dataset, splits it, saves it, and returns the split_uuid
Args:</p>
<blockquote>
<div><p>dataset_key: key for dataset to split
bucket: datastore-specific user group bucket
splitter: Type of splitter to use to split the dataset
split_combo: tuple of form (split_valid_frac, split_test_frac)</p>
</div></blockquote>
<p>Returns:</p>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch.return_split_uuid_file">
<code class="sig-name descname"><span class="pre">return_split_uuid_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_cols</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">splitter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split_combo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.return_split_uuid_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.return_split_uuid_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a dataset, splits it, saves it, and returns the split_uuid.
Args:</p>
<blockquote>
<div><p>dataset_key: key for dataset to split
bucket: datastore-specific user group bucket
splitter: Type of splitter to use to split the dataset
split_combo: tuple of form (split_valid_frac, split_test_frac)</p>
</div></blockquote>
<p>Returns:</p>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch.run_search">
<code class="sig-name descname"><span class="pre">run_search</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.run_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.run_search" title="Permalink to this definition">¶</a></dt>
<dd><p>The driver code for generating hyperparameter combinations and submitting jobs
Returns:</p>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch.split_and_save_dataset">
<code class="sig-name descname"><span class="pre">split_and_save_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.split_and_save_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.split_and_save_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits a given dataset, saves it, and sets the split_uuid in the metadata</p>
<dl class="simple">
<dt>Args:</dt><dd><p>assay_params: Dataset metadata</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.HyperparameterSearch.submit_jobs">
<code class="sig-name descname"><span class="pre">submit_jobs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#HyperparameterSearch.submit_jobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.HyperparameterSearch.submit_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Reformats parameters as necessary and then calls run_command in a loop to submit a job for each param combo</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="utils.hyperparam_search_wrapper.RandomSearch">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></code><code class="sig-name descname"><span class="pre">RandomSearch</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#RandomSearch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.RandomSearch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#utils.hyperparam_search_wrapper.HyperparameterSearch" title="utils.hyperparam_search_wrapper.HyperparameterSearch"><code class="xref py py-class docutils literal notranslate"><span class="pre">utils.hyperparam_search_wrapper.HyperparameterSearch</span></code></a></p>
<p>Generates the specified number of random parameter values for within the specified range</p>
<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.RandomSearch.generate_assay_list">
<code class="sig-name descname"><span class="pre">generate_assay_list</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#RandomSearch.generate_assay_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.RandomSearch.generate_assay_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the list of datasets to build models for, with their key, bucket, split, and split uuid
Returns:</p>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.RandomSearch.generate_combo">
<code class="sig-name descname"><span class="pre">generate_combo</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#RandomSearch.generate_combo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.RandomSearch.generate_combo" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to generate all combinations from a given set of key-value pairs</p>
<dl class="simple">
<dt>Args:</dt><dd><p>params_dict: Set of key-value pairs with the key being the param name and the value being the list of values
you want to try for that param</p>
</dd>
<dt>Returns:</dt><dd><p>new_dict: The list of all combinations of parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.RandomSearch.generate_param_combos">
<code class="sig-name descname"><span class="pre">generate_param_combos</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#RandomSearch.generate_param_combos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.RandomSearch.generate_param_combos" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs additional parsing of parameters and generates all combinations</p>
<p>Returns:</p>
<blockquote>
<div><p>None</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.RandomSearch.split_and_save_dataset">
<code class="sig-name descname"><span class="pre">split_and_save_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#RandomSearch.split_and_save_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.RandomSearch.split_and_save_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits a given dataset, saves it, and sets the split_uuid in the metadata</p>
<dl class="simple">
<dt>Args:</dt><dd><p>assay_params: Dataset metadata</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.RandomSearch.submit_jobs">
<code class="sig-name descname"><span class="pre">submit_jobs</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#RandomSearch.submit_jobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.RandomSearch.submit_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Reformats parameters as necessary and then calls run_command in a loop to submit a job for each param combo</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="utils.hyperparam_search_wrapper.UserSpecifiedSearch">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></code><code class="sig-name descname"><span class="pre">UserSpecifiedSearch</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#UserSpecifiedSearch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.UserSpecifiedSearch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#utils.hyperparam_search_wrapper.HyperparameterSearch" title="utils.hyperparam_search_wrapper.HyperparameterSearch"><code class="xref py py-class docutils literal notranslate"><span class="pre">utils.hyperparam_search_wrapper.HyperparameterSearch</span></code></a></p>
<p>Generates combinations using the user-specified steps</p>
<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.UserSpecifiedSearch.generate_assay_list">
<code class="sig-name descname"><span class="pre">generate_assay_list</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#UserSpecifiedSearch.generate_assay_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.UserSpecifiedSearch.generate_assay_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the list of datasets to build models for, with their key, bucket, split, and split uuid
Returns:</p>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.UserSpecifiedSearch.generate_combo">
<code class="sig-name descname"><span class="pre">generate_combo</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#UserSpecifiedSearch.generate_combo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.UserSpecifiedSearch.generate_combo" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to generate all combinations from a given set of key-value pairs</p>
<dl class="simple">
<dt>Args:</dt><dd><p>params_dict: Set of key-value pairs with the key being the param name and the value being the list of values
you want to try for that param</p>
</dd>
<dt>Returns:</dt><dd><p>new_dict: The list of all combinations of parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.UserSpecifiedSearch.generate_param_combos">
<code class="sig-name descname"><span class="pre">generate_param_combos</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#UserSpecifiedSearch.generate_param_combos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.UserSpecifiedSearch.generate_param_combos" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs additional parsing of parameters and generates all combinations</p>
<p>Returns:</p>
<blockquote>
<div><p>None</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.UserSpecifiedSearch.split_and_save_dataset">
<code class="sig-name descname"><span class="pre">split_and_save_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assay_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#UserSpecifiedSearch.split_and_save_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.UserSpecifiedSearch.split_and_save_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits a given dataset, saves it, and sets the split_uuid in the metadata</p>
<dl class="simple">
<dt>Args:</dt><dd><p>assay_params: Dataset metadata</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.hyperparam_search_wrapper.UserSpecifiedSearch.submit_jobs">
<code class="sig-name descname"><span class="pre">submit_jobs</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#UserSpecifiedSearch.submit_jobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.UserSpecifiedSearch.submit_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Reformats parameters as necessary and then calls run_command in a loop to submit a job for each param combo</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="utils.hyperparam_search_wrapper.build_hyperopt_search_domain">
<code class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></code><code class="sig-name descname"><span class="pre">build_hyperopt_search_domain</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#build_hyperopt_search_domain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.build_hyperopt_search_domain" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate HyperOpt search domain object from method and parameters, layer_nums is only for NN models.</p>
</dd></dl>

<dl class="py function">
<dt id="utils.hyperparam_search_wrapper.get_num_params">
<code class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></code><code class="sig-name descname"><span class="pre">get_num_params</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">combo</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#get_num_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.get_num_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the number of parameters in a fully-connected neural networ
Args:</p>
<blockquote>
<div><p>combo: Model parameters</p>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>tmp_sum: Calculated number of parameters</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="utils.hyperparam_search_wrapper.main">
<code class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></code><code class="sig-name descname"><span class="pre">main</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Entry point when script is run</p>
</dd></dl>

<dl class="py function">
<dt id="utils.hyperparam_search_wrapper.permutate_NNlayer_combo_params">
<code class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></code><code class="sig-name descname"><span class="pre">permutate_NNlayer_combo_params</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">layer_nums</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_nums</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dropout_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_final_layer_size</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#permutate_NNlayer_combo_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.permutate_NNlayer_combo_params" title="Permalink to this definition">¶</a></dt>
<dd><p>to generate combos of layer_sizes(str) and dropouts(str) params from the layer_nums (list), node_nums (list), dropout_list (list).</p>
<p>The permutation will make the NN funnel shaped, so that the next layer can only be smaller or of the same size of the current layer.
Example:
permutate_NNlayer_combo_params([2], [4,8,16], [0], 16)
returns [[16, 4], [16, 8], [8,4]] [[0,0],[0,0],[0,0]]</p>
<p>If there are duplicates of the same size, it will create consecutive layers of the same size.
Example:
permutate_NNlayer_combo_params([2], [4,8,8], [0], 16)
returns [[8, 8], [8, 4]] [[0,0],[0,0]]</p>
<dl>
<dt>Args:</dt><dd><p>layer_nums: specify numbers of layers.</p>
<p>node_nums: specify numbers of nodes per layer.</p>
<p>dropout_list: specify the dropouts.</p>
<p>max_last_layer_size: sets the max size of the last layer. It will be set to the smallest node_num if needed.</p>
</dd>
<dt>Returns:</dt><dd><p>layer_sizes, dropouts: the layer sizes and dropouts generated based on the input parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.hyperparam_search_wrapper.reformat_filter_dict">
<code class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></code><code class="sig-name descname"><span class="pre">reformat_filter_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#reformat_filter_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.reformat_filter_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to reformat a filter dictionary to match the Model Tracker metadata structure. Updated 9/2020 by A. Paulson
for new LC model tracker.</p>
<p>Args:</p>
<blockquote>
<div><p>filter_dict: Dictionary containing metadata for model of interest</p>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>new_filter_dict: Filter dict reformatted</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="utils.hyperparam_search_wrapper.run_cmd">
<code class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></code><code class="sig-name descname"><span class="pre">run_cmd</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#run_cmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.run_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to submit a job using subprocess</p>
<p>Args:</p>
<blockquote>
<div><p>cmd: Command to run</p>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>output: Output of command</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="utils.hyperparam_search_wrapper.run_command">
<code class="sig-prename descclassname"><span class="pre">utils.hyperparam_search_wrapper.</span></code><code class="sig-name descname"><span class="pre">run_command</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shell_script</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">python_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">script_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/hyperparam_search_wrapper.html#run_command"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.hyperparam_search_wrapper.run_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to submit jobs on a slurm system
Args:</p>
<blockquote>
<div><p>shell_script: Name of shell script to run
python_path: Path to python version
script_dir: Directory where script lives
params: parameters in dictionary format</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-utils.llnl_utils">
<span id="utils-llnl-utils-module"></span><h2>utils.llnl_utils module<a class="headerlink" href="#module-utils.llnl_utils" title="Permalink to this headline">¶</a></h2>
<p>Utility functions for running and managing jobs on LC machines.</p>
<dl class="py function">
<dt id="utils.llnl_utils.get_command_output">
<code class="sig-prename descclassname"><span class="pre">utils.llnl_utils.</span></code><code class="sig-name descname"><span class="pre">get_command_output</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/llnl_utils.html#get_command_output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.llnl_utils.get_command_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the given shell command in a subprocess and returns its output as a string.
Used by throttle_jobs function.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>cmd: Command to run</p>
</dd>
<dt>Returns:</dt><dd><p>output: Output of command</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.llnl_utils.get_my_username">
<code class="sig-prename descclassname"><span class="pre">utils.llnl_utils.</span></code><code class="sig-name descname"><span class="pre">get_my_username</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/llnl_utils.html#get_my_username"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.llnl_utils.get_my_username" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the username of the effective userid of the current process.
Used by throttle_jobs function.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>none</p>
</dd>
<dt>Returns:</dt><dd><p>username (str): The current effective username</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.llnl_utils.is_lc_system">
<code class="sig-prename descclassname"><span class="pre">utils.llnl_utils.</span></code><code class="sig-name descname"><span class="pre">is_lc_system</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/llnl_utils.html#is_lc_system"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.llnl_utils.is_lc_system" title="Permalink to this definition">¶</a></dt>
<dd><p>Use heuristic to determine if we’re running on an LC system.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>none</p>
</dd>
<dt>Returns:</dt><dd><p>result: True if it appears we’re running on an LC machine.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.llnl_utils.throttle_jobs">
<code class="sig-prename descclassname"><span class="pre">utils.llnl_utils.</span></code><code class="sig-name descname"><span class="pre">throttle_jobs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_jobs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">my_username</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/llnl_utils.html#throttle_jobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.llnl_utils.throttle_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks the number of SLURM jobs currently queued or running under the current userid.
Returns immediately if this number is less than max_jobs; otherwise, loops indefinitely,
checking the job count every retry_time seconds. Returns when the job count drops below 
max_jobs. Call this function before queueing a batch job in order to implement a self-
throttling mechanism.</p>
<dl>
<dt>Args:</dt><dd><p>max_jobs (int): Number of jobs we are allowing ourselves to have queued or running.</p>
<p>retry_time (int): Number of seconds to wait between job count checks.</p>
<p>my_username (str): Effective username of the caller; defaults to output of ‘whoami’
command.</p>
</dd>
<dt>Returns:</dt><dd><p>none</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-utils.model_retrain">
<span id="utils-model-retrain-module"></span><h2>utils.model_retrain module<a class="headerlink" href="#module-utils.model_retrain" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="utils.model_retrain.main">
<code class="sig-prename descclassname"><span class="pre">utils.model_retrain.</span></code><code class="sig-name descname"><span class="pre">main</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argv</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_retrain.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_retrain.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="utils.model_retrain.train_model">
<code class="sig-prename descclassname"><span class="pre">utils.model_retrain.</span></code><code class="sig-name descname"><span class="pre">train_model</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_retrain.html#train_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_retrain.train_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrain a model saved in a model_metadata.json file</p>
<dl class="simple">
<dt>Args:</dt><dd><p>input (str): path to model_metadata.json file
output (str): path to output directory</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.model_retrain.train_model_from_tar">
<code class="sig-prename descclassname"><span class="pre">utils.model_retrain.</span></code><code class="sig-name descname"><span class="pre">train_model_from_tar</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/model_retrain.html#train_model_from_tar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.model_retrain.train_model_from_tar" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrain a model saved in a tar.gz file</p>
<dl class="simple">
<dt>Args:</dt><dd><p>input (str): path to a tar.gz file
output (str): path to output directory</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="utils-open-docs-module">
<h2>utils.open-docs module<a class="headerlink" href="#utils-open-docs-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-utils.process_slurm">
<span id="utils-process-slurm-module"></span><h2>utils.process_slurm module<a class="headerlink" href="#module-utils.process_slurm" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="utils.process_slurm.get_timings">
<code class="sig-prename descclassname"><span class="pre">utils.process_slurm.</span></code><code class="sig-name descname"><span class="pre">get_timings</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_dirs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/process_slurm.html#get_timings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.process_slurm.get_timings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="utils.process_slurm.main">
<code class="sig-prename descclassname"><span class="pre">utils.process_slurm.</span></code><code class="sig-name descname"><span class="pre">main</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/process_slurm.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.process_slurm.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="utils.process_slurm.move_failed_slurm">
<code class="sig-prename descclassname"><span class="pre">utils.process_slurm.</span></code><code class="sig-name descname"><span class="pre">move_failed_slurm</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_dirs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/process_slurm.html#move_failed_slurm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.process_slurm.move_failed_slurm" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="utils.process_slurm.rerun_failed">
<code class="sig-prename descclassname"><span class="pre">utils.process_slurm.</span></code><code class="sig-name descname"><span class="pre">rerun_failed</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">script_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">python_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dirs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/process_slurm.html#rerun_failed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.process_slurm.rerun_failed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="utils.process_slurm.run_cmd">
<code class="sig-prename descclassname"><span class="pre">utils.process_slurm.</span></code><code class="sig-name descname"><span class="pre">run_cmd</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/process_slurm.html#run_cmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.process_slurm.run_cmd" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="utils.process_slurm.run_command">
<code class="sig-prename descclassname"><span class="pre">utils.process_slurm.</span></code><code class="sig-name descname"><span class="pre">run_command</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shell_script</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">python_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">script_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params_str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/process_slurm.html#run_command"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.process_slurm.run_command" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-utils.pubchem_utils">
<span id="utils-pubchem-utils-module"></span><h2>utils.pubchem_utils module<a class="headerlink" href="#module-utils.pubchem_utils" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="utils.pubchem_utils.download_SID_from_bioactivity_assay">
<code class="sig-prename descclassname"><span class="pre">utils.pubchem_utils.</span></code><code class="sig-name descname"><span class="pre">download_SID_from_bioactivity_assay</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bioassayid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/pubchem_utils.html#download_SID_from_bioactivity_assay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.pubchem_utils.download_SID_from_bioactivity_assay" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve summary info on bioactivity assays.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>a single bioactivity id: PubChem AIDs (bioactivity assay ids)</p>
</dd>
<dt>Returns:</dt><dd><p>Returns the sids tested on this assay</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.pubchem_utils.download_activitytype">
<code class="sig-prename descclassname"><span class="pre">utils.pubchem_utils.</span></code><code class="sig-name descname"><span class="pre">download_activitytype</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/pubchem_utils.html#download_activitytype"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.pubchem_utils.download_activitytype" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve data for assays for a select list of sids.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>myList (list): a bioactivity id (aid)
sidlst (list): list of sids specified as integers</p>
</dd>
<dt>Returns:</dt><dd><p>Nothing returned yet, will return basic stats to help decide whether to use assay or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.pubchem_utils.download_bioactivity_assay">
<code class="sig-prename descclassname"><span class="pre">utils.pubchem_utils.</span></code><code class="sig-name descname"><span class="pre">download_bioactivity_assay</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">myList</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/pubchem_utils.html#download_bioactivity_assay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.pubchem_utils.download_bioactivity_assay" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve summary info on bioactivity assays.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>myList (list): List of PubChem AIDs (bioactivity assay ids)
intv (1) : number of INCHIKEYS to submit queries for in one request, default is 1</p>
</dd>
<dt>Returns:</dt><dd><p>Nothing returned yet, will return basic stats to help decide whether to use assay or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.pubchem_utils.download_dose_response_from_bioactivity">
<code class="sig-prename descclassname"><span class="pre">utils.pubchem_utils.</span></code><code class="sig-name descname"><span class="pre">download_dose_response_from_bioactivity</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sidlst</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/pubchem_utils.html#download_dose_response_from_bioactivity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.pubchem_utils.download_dose_response_from_bioactivity" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve data for assays for a select list of sids.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>myList (list): a bioactivity id (aid)
sidlst (list): list of sids specified as integers</p>
</dd>
<dt>Returns:</dt><dd><p>Nothing returned yet, will return basic stats to help decide whether to use assay or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.pubchem_utils.download_smiles">
<code class="sig-prename descclassname"><span class="pre">utils.pubchem_utils.</span></code><code class="sig-name descname"><span class="pre">download_smiles</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">myList</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/pubchem_utils.html#download_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.pubchem_utils.download_smiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve canonical SMILES strings for a list of input INCHIKEYS.
Will return only one SMILES string per INCHIKEY.  If there are multiple values returned, the first is retained and the others are returned in a the discard_lst.  INCHIKEYS that fail to return a SMILES string are put in the fail_lst</p>
<dl class="simple">
<dt>Args:</dt><dd><p>myList (list): List of INCHIKEYS
intv (1) : number of INCHIKEYS to submit queries for in one request, default is 1</p>
</dd>
<dt>Returns:</dt><dd><p>list of SMILES strings corresponding to INCHIKEYS
list of INCHIKEYS, which failed to return a SMILES string
list of CIDs and SMILES, which were returned beyond the first CID and SMILE found for input INCHIKEY</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-utils.rdkit_easy">
<span id="utils-rdkit-easy-module"></span><h2>utils.rdkit_easy module<a class="headerlink" href="#module-utils.rdkit_easy" title="Permalink to this headline">¶</a></h2>
<p>Utilities for clustering and visualizing compound structures using RDKit.</p>
<dl class="py function">
<dt id="utils.rdkit_easy.add_mol_column">
<code class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></code><code class="sig-name descname"><span class="pre">add_mol_column</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">molecule_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mol'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#add_mol_column"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.add_mol_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts SMILES strings in a data frame to RDKit Mol objects and adds them as a new column in the data frame.</p>
<dl>
<dt>Args:</dt><dd><p>df (pd.DataFrame): Data frame to add column to.</p>
<p>smiles_col (str): Column containing SMILES strings.</p>
<p>molecule_col (str): Name of column to create to hold Mol objects.</p>
</dd>
<dt>Returns:</dt><dd><p>pd.DataFrame: Modified data frame.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.rdkit_easy.calculate_descriptors">
<code class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></code><code class="sig-name descname"><span class="pre">calculate_descriptors</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">molecule_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mol'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#calculate_descriptors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.calculate_descriptors" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses RDKit to compute various descriptors for compounds specified by Mol objects in the given data frame.</p>
<dl>
<dt>Args:</dt><dd><p>df (pd.DataFrame): Data frame containing molecules.</p>
<p>molecule_column (str): Name of column containing Mol objects for compounds.</p>
</dd>
<dt>Returns:</dt><dd><p>pd.DataFrame: Modified data frame with added columns for the descriptors.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.rdkit_easy.cluster_dataframe">
<code class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></code><code class="sig-name descname"><span class="pre">cluster_dataframe</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">molecule_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mol'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cluster'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#cluster_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.cluster_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs Butina clustering on compounds specified by Mol objects in a data frame.</p>
<p>Modifies the input dataframe to add a column ‘cluster_column’ containing the cluster
index for each molecule.</p>
<p>From RDKit cookbook <a class="reference external" href="http://rdkit.org/docs_temp/Cookbook.html">http://rdkit.org/docs_temp/Cookbook.html</a>.</p>
<dl>
<dt>Args:</dt><dd><p>df (pd.DataFrame): Data frame containing compounds to cluster.</p>
<p>molecule_column (str): Name of column containing rdkit Mol objects for compounds.</p>
<p>cluster_column (str): Column that will be created to hold cluster indices.</p>
<dl class="simple">
<dt>cutoff (float): Maximum Tanimoto distance parameter used by Butina algorithm to</dt><dd><p>identify neighbors of each molecule.</p>
</dd>
<dt>Returns:</dt><dd><p>None. Input data frame will be modified in place.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.rdkit_easy.cluster_fingerprints">
<code class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></code><code class="sig-name descname"><span class="pre">cluster_fingerprints</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#cluster_fingerprints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.cluster_fingerprints" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs Butina clustering on compounds specified by a list of fingerprint bit vectors.</p>
<p>From RDKit cookbook <a class="reference external" href="http://rdkit.org/docs_temp/Cookbook.html">http://rdkit.org/docs_temp/Cookbook.html</a>.</p>
<dl>
<dt>Args:</dt><dd><p>fps (list of rdkit.ExplicitBitVect): List of fingerprint bit vectors.</p>
<p>cutoff (float): Cutoff distance parameter used to seed clusters in Butina algorithm.</p>
</dd>
<dt>Returns:</dt><dd><p>tuple of tuple: Indices of fingerprints assigned to each cluster.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.rdkit_easy.mol_to_html">
<code class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></code><code class="sig-name descname"><span class="pre">mol_to_html</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'svg'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rdkit_svg'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">400</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#mol_to_html"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.mol_to_html" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an image file displaying the given molecule’s 2D structure, and generates an HTML
tag for it.</p>
<dl>
<dt>Args:</dt><dd><p>mol (rdkit.Chem.Mol): Object representing molecule.</p>
<p>name (str): Filename of image file to create, relative to ‘directory’.</p>
<p>type (str): Image format; must be ‘png’ or ‘svg’.</p>
<dl class="simple">
<dt>directory (str): Path relative to notebook directory of subdirectory where image file will be written.</dt><dd><p>The directory will be created if necessary. Note that absolute paths will not work in notebooks.</p>
</dd>
</dl>
<p>width (int): Width of image bounding box.</p>
<p>height (int): Height of image bounding box.</p>
</dd>
<dt>Returns:</dt><dd><p>str: HTML image tag referencing the image file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.rdkit_easy.mol_to_pil">
<code class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></code><code class="sig-name descname"><span class="pre">mol_to_pil</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(400,</span> <span class="pre">200)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#mol_to_pil"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.mol_to_pil" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a Python Image Library (PIL) object containing an image of the given molecule’s structure.</p>
<dl>
<dt>Args:</dt><dd><p>mol (rdkit.Chem.Mol): Object representing molecule.</p>
<p>size (tuple): Width and height of bounding box of image.</p>
</dd>
<dt>Returns:</dt><dd><p>PIL.PngImageFile: An object containing an image of the molecule’s structure.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.rdkit_easy.mol_to_png">
<code class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></code><code class="sig-name descname"><span class="pre">mol_to_png</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(400,</span> <span class="pre">200)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#mol_to_png"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.mol_to_png" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws the molecule mol into a PNG file with filename ‘name’ and with the given size
in pixels.</p>
<dl>
<dt>Args:</dt><dd><p>mol (rdkit.Chem.Mol): Object representing molecule.</p>
<p>name (str): Path to write PNG file to.</p>
<p>size (tuple): Width and height of bounding box of image.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.rdkit_easy.mol_to_svg">
<code class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></code><code class="sig-name descname"><span class="pre">mol_to_svg</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(400,</span> <span class="pre">200)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#mol_to_svg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.mol_to_svg" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw molecule mol’s structure into an SVG file with path ‘img_file’ and with the
given size.</p>
<dl>
<dt>Args:</dt><dd><p>mol (rdkit.Chem.Mol): Object representing molecule.</p>
<p>img_file (str): Path to write SVG file to.</p>
<p>size (tuple): Width and height of bounding box of image.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.rdkit_easy.show_df">
<code class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></code><code class="sig-name descname"><span class="pre">show_df</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#show_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.show_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to display a pandas DataFrame in the current notebook window
with HTML images rendered in table cells.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>df (pd.DataFrame): Data frame to display.</p>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

<dl class="py function">
<dt id="utils.rdkit_easy.show_html">
<code class="sig-prename descclassname"><span class="pre">utils.rdkit_easy.</span></code><code class="sig-name descname"><span class="pre">show_html</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">html</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rdkit_easy.html#show_html"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.rdkit_easy.show_html" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to display an HTML image specified by image tag ‘html’.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>html (str): HTML image tag to render.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-utils.struct_utils">
<span id="utils-struct-utils-module"></span><h2>utils.struct_utils module<a class="headerlink" href="#module-utils.struct_utils" title="Permalink to this headline">¶</a></h2>
<p>Functions to manipulate and convert between various representations of chemical structures: SMILES, InChi and RDKit Mol objects.
Many of these functions (those with a ‘workers’ argument) accept either a single SMILES or InChi string or a list of strings
as their first argument, and return a value with the same datatype. If a list is passed and the ‘workers’ argument is &gt; 1,
the calculation is parallelized across multiple threads; this can save significant time when operating on thousands of
molecules.</p>
<dl class="py function">
<dt id="utils.struct_utils.base_mol_from_inchi">
<code class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></code><code class="sig-name descname"><span class="pre">base_mol_from_inchi</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inchi_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useIsomericSmiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">removeCharges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#base_mol_from_inchi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.base_mol_from_inchi" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a standardized RDKit Mol object for the largest fragment of the molecule specified by
InChi string inchi_str. Replace any rare isotopes with the most common ones for each element.
If removeCharges is True, add hydrogens as needed to eliminate charges.</p>
<dl>
<dt>Args:</dt><dd><p>inchi_str (str): InChi string representing molecule.</p>
<p>useIsomericSmiles (bool): Whether to retain stereochemistry information in the generated string.</p>
<p>removeCharges (bool): If true, add or remove hydrogens to produce uncharged molecules.</p>
</dd>
<dt>Returns:</dt><dd><p>str: Standardized salt-stripped SMILES string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.struct_utils.base_mol_from_smiles">
<code class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></code><code class="sig-name descname"><span class="pre">base_mol_from_smiles</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_smiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useIsomericSmiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">removeCharges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#base_mol_from_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.base_mol_from_smiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a standardized RDKit Mol object for the largest fragment of the molecule specified by
orig_smiles. Replace any rare isotopes with the most common ones for each element.
If removeCharges is True, add hydrogens as needed to eliminate charges.</p>
<dl>
<dt>Args:</dt><dd><p>orig_smiles (str): SMILES string to standardize.</p>
<p>useIsomericSmiles (bool): Whether to retain stereochemistry information in the generated string.</p>
<p>removeCharges (bool): If true, add or remove hydrogens to produce uncharged molecules.</p>
</dd>
<dt>Returns:</dt><dd><p>str: Standardized salt-stripped SMILES string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.struct_utils.base_smiles_from_inchi">
<code class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></code><code class="sig-name descname"><span class="pre">base_smiles_from_inchi</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inchi_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useIsomericSmiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">removeCharges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#base_smiles_from_inchi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.base_smiles_from_inchi" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate standardized salt-stripped SMILES strings for the largest fragments of each molecule represented by
InChi string(s) inchi_str. Replaces any rare isotopes with the most common ones for each element.</p>
<dl>
<dt>Args:</dt><dd><p>inchi_str (list or str): List of InChi strings to convert.</p>
<p>useIsomericSmiles (bool): Whether to retain stereochemistry information in the generated strings.</p>
<p>removeCharges (bool): If true, add or remove hydrogens to produce uncharged molecules.</p>
<p>workers (int): Number of parallel threads to use for calculation.</p>
</dd>
<dt>Returns:</dt><dd><p>list or str: Standardized SMILES strings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.struct_utils.base_smiles_from_smiles">
<code class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></code><code class="sig-name descname"><span class="pre">base_smiles_from_smiles</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_smiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useIsomericSmiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">removeCharges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#base_smiles_from_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.base_smiles_from_smiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate standardized SMILES strings for the largest fragments of each molecule specified by
orig_smiles. Strips salt groups and replaces any rare isotopes with the most common ones for each element.</p>
<dl>
<dt>Args:</dt><dd><p>orig_smiles (list or str): List of SMILES strings to canonicalize.</p>
<p>useIsomericSmiles (bool): Whether to retain stereochemistry information in the generated strings.</p>
<p>removeCharges (bool): If true, add or remove hydrogens to produce uncharged molecules.</p>
<p>workers (int): Number of parallel threads to use for calculation.</p>
</dd>
<dt>Returns:</dt><dd><p>list or str: Canonicalized SMILES strings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.struct_utils.draw_structure">
<code class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></code><code class="sig-name descname"><span class="pre">draw_structure</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">smiles_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#draw_structure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.draw_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw structure for the compound with the given SMILES string as a PNG file.</p>
<p>Note that there are more flexible functions for drawing structures in the rdkit_easy module.
This function is only retained for backward compatibility.</p>
<dl>
<dt>Args:</dt><dd><p>smiles_str (str): SMILES representation of compound.</p>
<p>image_path (str): Filepath for image file to be generated.</p>
<p>image_size (int): Width of square bounding box for image.</p>
</dd>
<dt>Returns:</dt><dd><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.struct_utils.fix_moe_smiles">
<code class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></code><code class="sig-name descname"><span class="pre">fix_moe_smiles</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">smiles</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#fix_moe_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.fix_moe_smiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Correct the SMILES strings generated by MOE to standardize the representation of protonated atoms,
so that RDKit can read them.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>smiles (str): SMILES string.</p>
</dd>
<dt>Returns:</dt><dd><p>str: The corrected SMILES string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.struct_utils.get_rdkit_smiles">
<code class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></code><code class="sig-name descname"><span class="pre">get_rdkit_smiles</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_smiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useIsomericSmiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#get_rdkit_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.get_rdkit_smiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a SMILES string, regenerate a “canonical” SMILES string for the same molecule
using the implementation in RDKit.</p>
<dl>
<dt>Args:</dt><dd><p>orig_smiles (str): SMILES string to canonicalize.</p>
<p>useIsomericSmiles (bool): Whether to retain stereochemistry information in the generated string.</p>
</dd>
<dt>Returns:</dt><dd><p>str: Canonicalized SMILES string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.struct_utils.kekulize_smiles">
<code class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></code><code class="sig-name descname"><span class="pre">kekulize_smiles</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_smiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useIsomericSmiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#kekulize_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.kekulize_smiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Kekulized SMILES strings for the molecules specified by orig_smiles. Kekulized SMILES strings
are ones in which aromatic rings are represented by uppercase letters with alternating single and
double bonds, rather than lowercase letters; they are needed by some external applications.</p>
<dl>
<dt>Args:</dt><dd><p>orig_smiles (list or str): List of SMILES strings to Kekulize.</p>
<p>useIsomericSmiles (bool): Whether to retain stereochemistry information in the generated strings.</p>
<p>workers (int): Number of parallel threads to use for calculation.</p>
</dd>
<dt>Returns:</dt><dd><p>list or str: Kekulized SMILES strings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.struct_utils.mol_wt_from_smiles">
<code class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></code><code class="sig-name descname"><span class="pre">mol_wt_from_smiles</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">smiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#mol_wt_from_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.mol_wt_from_smiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate molecular weights for molecules represented by SMILES strings.</p>
<dl>
<dt>Args:</dt><dd><p>smiles (list or str): List of SMILES strings.</p>
<p>workers (int): Number of parallel threads to use for calculations.</p>
</dd>
<dt>Returns:</dt><dd><p>list or float: Molecular weights. NaN is returned for SMILES strings that could not be read by RDKit.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.struct_utils.mols_from_smiles">
<code class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></code><code class="sig-name descname"><span class="pre">mols_from_smiles</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_smiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#mols_from_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.mols_from_smiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Parallel function to create RDKit Mol objects for a list of SMILES strings. If orig_smiles is a list
and workers is &gt; 1, spawn ‘workers’ threads to convert input SMILES strings to Mol objects.</p>
<dl>
<dt>Args:</dt><dd><p>orig_smiles (list or str): List of SMILES strings to convert to Mol objects.</p>
<p>workers (int): Number of parallel threads to use for calculation.</p>
</dd>
<dt>Returns:</dt><dd><p>list of rdkit.Chem.Mol: RDKit objects representing molecules.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.struct_utils.rdkit_smiles_from_smiles">
<code class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></code><code class="sig-name descname"><span class="pre">rdkit_smiles_from_smiles</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_smiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useIsomericSmiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#rdkit_smiles_from_smiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.rdkit_smiles_from_smiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Parallel version of get_rdkit_smiles. If orig_smiles is a list and workers is &gt; 1, spawn ‘workers’
threads to convert input SMILES strings to standardized RDKit format.</p>
<dl>
<dt>Args:</dt><dd><p>orig_smiles (list or str): List of SMILES strings to canonicalize.</p>
<p>useIsomericSmiles (bool): Whether to retain stereochemistry information in the generated strings.</p>
<p>workers (int): Number of parallel threads to use for calculation.</p>
</dd>
<dt>Returns:</dt><dd><p>list or str: Canonicalized SMILES strings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="utils.struct_utils.smiles_to_inchi_key">
<code class="sig-prename descclassname"><span class="pre">utils.struct_utils.</span></code><code class="sig-name descname"><span class="pre">smiles_to_inchi_key</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">smiles</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/struct_utils.html#smiles_to_inchi_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.struct_utils.smiles_to_inchi_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates an InChI key from a SMILES string.  Note that an InChI key is different from an InChI <em>string</em>;
it can be used as a unique identifier, but doesn’t hold the information needed to reconstruct a molecule.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>smiles (str): SMILES string.</p>
</dd>
<dt>Returns:</dt><dd><p>str: An InChI key. Returns None if RDKit cannot convert the SMILES string to an RDKit Mol object.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-utils.verify_results">
<span id="utils-verify-results-module"></span><h2>utils.verify_results module<a class="headerlink" href="#module-utils.verify_results" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-utils" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, ATOM DDM Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>